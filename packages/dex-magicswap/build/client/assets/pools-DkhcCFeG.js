import{r as lo,P as Ko,F as L}from"./components-BLd368Cb.js";import{n as F,u as ne,v as le,l as ie,I as ve,x as we,y as Qr,z as ft,A as Fe,j as Ce,B as V,C as yn,D as C,t as ye,_ as es,h as U,E as W,k as ts,F as ke,G as Yo,H as Jo,J as Pt,K as sn,L as Ir,N as Pr,M as _r,O as Sr,P as Br,Q as Ar,T as Tr,V as Nr,W as on,X as Ft,Y as Xo,Z as Y,$ as eu,a0 as Qo,a1 as ea,p as de,a2 as $e,a3 as ns,a4 as rs,f as ss,a5 as po,a6 as ta,a7 as na,a8 as ra,a9 as os,aa as sa,ab as oa,ac as gn,r as gt,ad as aa,ae as an,af as ia,ag as fe,ah as cn,ai as re,aj as tu,ak as at,al as ca,am as as,an as nu,ao as Oe,ap as is,b as ua,aq as cs,ar as fa,as as kr,at as us,au as la,av as it,w as fs,aw as un,ax as Tt,ay as $r,az as St,g as xe,aA as da,aB as ru,aC as su,aD as Kt,aE as ls,aF as pa,aG as bt,aH as ou,aI as au,aJ as ha,aK as ma,aL as ya,aM as ga,aN as ba,aO as wa,aP as va,a as Mr,aQ as iu,aR as cu,aS as uu,aT as ho,aU as fu,aV as lu,aW as du,aX as pu,aY as xa,aZ as bn,a_ as Ea,U as Ia,a$ as ds,c as wn,s as Pa,b0 as _a,b1 as hu,b2 as mu,b3 as yu,b4 as gu,b5 as bu,b6 as wu,b7 as vu,b8 as xu,b9 as Eu,ba as Iu,bb as Pu,bc as _u,bd as Su,be as Bu,bf as Au,bg as Tu,R as Nu,bh as ku,bi as $u,bj as Mu,bk as Fu,S as Ou,bl as Ru,bm as Cu,bn as Du,bo as Lu,bp as qu,bq as ju,m as Uu,d as zu,e as Gu,i as Hu,br as Vu,bs as Wu,q as Zu,bt as Ku,bu as Yu,bv as Ju,bw as Xu,bx as Qu,by as ef,bz as tf,bA as nf,bB as rf,bC as sf,bD as of,bE as af,bF as cf,bG as uf,bH as ff,bI as lf,bJ as df,bK as pf,bL as hf,bM as mf,bN as yf,bO as gf,bP as bf,bQ as wf,bR as vf,bS as xf,bT as Ef,bU as If,bV as Pf,bW as _f,bX as Sf,bY as Bf,bZ as Af,b_ as Tf,b$ as Nf,c0 as kf,c1 as $f,c2 as Mf,c3 as Ff,c4 as Of,c5 as Rf,c6 as Cf,c7 as Df,c8 as Lf,c9 as qf,ca as jf,cb as Uf,cc as zf,cd as Gf,ce as Hf,cf as Vf,cg as Wf,ch as Zf,ci as Kf,cj as Yf,ck as Jf,cl as Xf,cm as Qf,cn as el,co as tl,cp as nl,cq as rl,cr as sl,cs as ol,ct as al,cu as il,cv as cl,cw as ul,cx as fl,cy as ll,cz as dl,cA as pl,cB as hl,cC as ml,cD as yl,cE as gl,cF as bl,cG as wl,cH as vl,cI as xl,cJ as El,cK as Il,cL as Pl,cM as _l,cN as Sl,cO as Bl,cP as Al,cQ as Tl,cR as Nl,cS as kl,cT as $l,cU as Ml,cV as Fl,cW as Ol,cX as Rl,cY as Cl,cZ as Dl,c_ as Ll,c$ as ql,d0 as jl,d1 as Ul,d2 as zl,o as Gl}from"./custom-BqWD8wPQ.js";import{B as O,f as Hl,s as Vl}from"./formatUnits-CQZyr6Jb.js";import{p as Nt,I as Wl,h as Zl,c as Ne,e as Kl,a as vn}from"./number-D-wl6pPl.js";import{d as Yl}from"./defineChain-B0Tnjtyc.js";async function Jl(e,{chain:t}){const{id:n,name:r,nativeCurrency:s,rpcUrls:o,blockExplorers:a}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:F(n),chainName:r,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:a?Object.values(a).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function ge(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new Fa(e.type);return`${e.name}(${xn(e.inputs,{includeName:t})})`}function xn(e,{includeName:t=!1}={}){return e?e.map(n=>Xl(n,{includeName:t})).join(t?", ":","):""}function Xl(e,{includeName:t}){return e.type.startsWith("tuple")?`(${xn(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}class ps extends O{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class kt extends O{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class Ql extends O{constructor({data:t,size:n}){super([`Data size of ${n} bytes is invalid.`,"Size must be in increments of 32 bytes (size % 32 === 0)."].join(`
`),{metaMessages:[`Data: ${t} (${n} bytes)`],name:"AbiDecodingDataSizeInvalidError"})}}class hs extends O{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${xn(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class Ot extends O{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Sa extends O{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Ba extends O{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${ne(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class ms extends O{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Aa extends O{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class Fr extends O{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class ys extends O{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class Ta extends O{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class gs extends O{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Or extends O{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Ve extends O{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class bs extends O{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class Na extends O{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class ed extends O{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${ge(t.abiItem)}\`, and`,`\`${n.type}\` in \`${ge(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class ws extends O{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class lt extends O{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${xn(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class Rt extends O{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${ge(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class ka extends O{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class $a extends O{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class Ma extends O{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class Fa extends O{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class Oa extends O{constructor(t){super(`Type "${t}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}function Ie(e,t){if(e.length!==t.length)throw new ms({expectedLength:e.length,givenLength:t.length});const n=td({params:e,values:t}),r=xs(n);return r.length===0?"0x":r}function td({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(vs({param:e[r],value:t[r]}));return n}function vs({param:e,value:t}){const n=Es(e.type);if(n){const[r,s]=n;return rd(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return cd(t,{param:e});if(e.type==="address")return nd(t);if(e.type==="bool")return od(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int");return ad(t,{signed:r})}if(e.type.startsWith("bytes"))return sd(t,{param:e});if(e.type==="string")return id(t);throw new ka(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function xs(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:c}=e[o];a?t+=32:t+=ne(c)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:c}=e[o];a?(n.push(F(t+s,{size:32})),r.push(c),s+=ne(c)):n.push(c)}return le([...n,...r])}function nd(e){if(!ie(e))throw new ve({address:e});return{dynamic:!1,encoded:we(e.toLowerCase())}}function rd(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Ma(e);if(!r&&e.length!==t)throw new Sa({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const o=[];for(let a=0;a<e.length;a++){const c=vs({param:n,value:e[a]});c.dynamic&&(s=!0),o.push(c)}if(r||s){const a=xs(o);if(r){const c=F(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?le([c,a]):c}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:le(o.map(({encoded:a})=>a))}}function sd(e,{param:t}){const[,n]=t.type.split("bytes"),r=ne(e);if(!n){let s=e;return r%32!==0&&(s=we(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:le([we(F(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Ba({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:we(e,{dir:"right"})}}function od(e){if(typeof e!="boolean")throw new O(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:we(Qr(e))}}function ad(e,{signed:t}){return{dynamic:!1,encoded:F(e,{size:32,signed:t})}}function id(e){const t=ft(e),n=Math.ceil(ne(t)/32),r=[];for(let s=0;s<n;s++)r.push(we(Fe(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:le([we(F(ne(t),{size:32})),...r])}}function cd(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const o=t.components[s],a=Array.isArray(e)?s:o.name,c=vs({param:o,value:e[a]});r.push(c),c.dynamic&&(n=!0)}return{dynamic:n,encoded:n?xs(r):le(r.map(({encoded:s})=>s))}}function Es(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const cr="/docs/contract/encodeDeployData";function Ct(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(a=>"type"in a&&a.type==="constructor");if(!s)throw new ps({docsPath:cr});if(!("inputs"in s))throw new kt({docsPath:cr});if(!s.inputs||s.inputs.length===0)throw new kt({docsPath:cr});const o=Ie(s.inputs,n);return Ce([r,o])}class Dt extends O{constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class ur extends O{constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function ud(e){const t=V(`0x${e.substring(4)}`).substring(26);return yn(`0x${t}`)}async function Ra({hash:e,signature:t}){const n=C(e)?e:ye(e),{secp256k1:r}=await es(async()=>{const{secp256k1:a}=await Promise.resolve().then(()=>mm);return{secp256k1:a}},void 0);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:i,s:l,v:f,yParity:d}=t,p=Number(d??f),h=mo(p);return new r.Signature(U(i),U(l)).addRecoveryBit(h)}const a=C(t)?t:ye(t),c=W(`0x${a.slice(130)}`),u=mo(c);return r.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function mo(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function Ye({hash:e,signature:t}){return ud(await Ra({hash:e,signature:t}))}function fd(e){const{chainId:t,contractAddress:n,nonce:r,to:s}=e,o=V(Ce(["0x05",ts([t?F(t):"0x",n,r?F(r):"0x"])]));return s==="bytes"?ke(o):o}async function Ca(e){const{authorization:t,signature:n}=e;return Ye({hash:fd(t),signature:n??t})}function Is({chain:e,currentChainId:t}){if(!e)throw new Yo;if(t!==e.id)throw new Jo({chain:e,currentChainId:t})}function Ps(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof O?e.walk(s=>s?.code===Pt.code):e;return r instanceof O?new Pt({cause:e,message:r.details}):Pt.nodeMessage.test(n)?new Pt({cause:e,message:e.details}):sn.nodeMessage.test(n)?new sn({cause:e,maxFeePerGas:t?.maxFeePerGas}):Ir.nodeMessage.test(n)?new Ir({cause:e,maxFeePerGas:t?.maxFeePerGas}):Pr.nodeMessage.test(n)?new Pr({cause:e,nonce:t?.nonce}):_r.nodeMessage.test(n)?new _r({cause:e,nonce:t?.nonce}):Sr.nodeMessage.test(n)?new Sr({cause:e,nonce:t?.nonce}):Br.nodeMessage.test(n)?new Br({cause:e}):Ar.nodeMessage.test(n)?new Ar({cause:e,gas:t?.gas}):Tr.nodeMessage.test(n)?new Tr({cause:e,gas:t?.gas}):Nr.nodeMessage.test(n)?new Nr({cause:e}):on.nodeMessage.test(n)?new on({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new Ft({cause:e})}function ld(e,{docsPath:t,...n}){const r=(()=>{const s=Ps(e,n);return s instanceof Ft?e:s})();return new Xo(r,{docsPath:t,...n})}function En(e,{format:t}){if(!t)return{};const n={};function r(o){const a=Object.keys(o);for(const c of a)c in e&&(n[c]=e[c]),o[c]&&typeof o[c]=="object"&&!Array.isArray(o[c])&&r(o[c])}const s=t(e||{});return r(s),n}const Da={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Je(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=pd(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>Y(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=F(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=F(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=F(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=F(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=F(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=F(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Da[e.type]),typeof e.value<"u"&&(t.value=F(e.value)),t}const dd=eu("transactionRequest",Je);function pd(e){return e.map(t=>({address:t.contractAddress,r:t.r,s:t.s,chainId:F(t.chainId),nonce:F(t.nonce),...typeof t.yParity<"u"?{yParity:F(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:F(t.v)}:{}}))}function R(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}function wt(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:o}=e,a=t?de(t):void 0;if(a&&!ie(a.address))throw new ve({address:a.address});if(o&&!ie(o))throw new ve({address:o});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new Qo;if(r&&r>ea)throw new sn({maxFeePerGas:r});if(s&&r&&s>r)throw new on({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Lt(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return W(t)}class La extends O{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class In extends O{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class qa extends O{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${$e(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class _s extends O{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}async function Te(e,{blockHash:t,blockNumber:n,blockTag:r,includeTransactions:s}={}){const o=r??"latest",a=s??!1,c=n!==void 0?F(n):void 0;let u=null;if(t?u=await e.request({method:"eth_getBlockByHash",params:[t,a]},{dedupe:!0}):u=await e.request({method:"eth_getBlockByNumber",params:[c||o,a]},{dedupe:!!c}),!u)throw new _s({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||ns)(u)}async function Ss(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function hd(e,t){return ja(e,t)}async function ja(e,t){const{block:n,chain:r=e.chain,request:s}=t||{};try{const o=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof o=="function"){const c=n||await R(e,Te,"getBlock")({}),u=await o({block:c,client:e,request:s});if(u===null)throw new Error;return u}if(typeof o<"u")return o;const a=await e.request({method:"eth_maxPriorityFeePerGas"});return U(a)}catch{const[o,a]=await Promise.all([n?Promise.resolve(n):R(e,Te,"getBlock")({}),R(e,Ss,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new In;const c=a-o.baseFeePerGas;return c<0n?0n:c}}async function md(e,t){return Rr(e,t)}async function Rr(e,t){const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},a=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(a<1)throw new La;const u=10**(a.toString().split(".")[1]?.length??0),i=d=>d*BigInt(Math.ceil(a*u))/BigInt(u),l=n||await R(e,Te,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const d=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:i,request:s,type:o});if(d!==null)return d}if(o==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new In;const d=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await ja(e,{block:l,chain:r,request:s}),p=i(l.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??p+d,maxPriorityFeePerGas:d}}return{gasPrice:s?.gasPrice??i(await R(e,Ss,"getGasPrice")({}))}}class Ua extends O{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:a,gasPrice:c,maxFeePerGas:u,maxPriorityFeePerGas:i,nonce:l,to:f,value:d}){const p=rs({from:n?.address,to:f,value:typeof d<"u"&&`${ss(d)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:a,gasPrice:typeof c<"u"&&`${$e(c)} gwei`,maxFeePerGas:typeof u<"u"&&`${$e(u)} gwei`,maxPriorityFeePerGas:typeof i<"u"&&`${$e(i)} gwei`,nonce:l});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}function yd(e,{docsPath:t,...n}){const r=(()=>{const s=Ps(e,n);return s instanceof Ft?e:s})();return new Ua(r,{docsPath:t,...n})}class za extends O{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class Ga extends O{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function yo(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function gd(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=yo(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=yo(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function go(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new po({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new po({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function bd(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,a={};if(o!==void 0&&(a.code=o),t!==void 0&&(a.balance=F(t)),n!==void 0&&(a.nonce=F(n)),r!==void 0&&(a.state=go(r)),s!==void 0){if(a.state)throw new Ga;a.stateDiff=go(s)}return a}function Ha(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!ie(n,{strict:!1}))throw new ve({address:n});if(t[n])throw new za({address:n});t[n]=bd(r)}return t}async function Va(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n?F(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function Bs(e,t){const{account:n=e.account}=t,r=n?de(n):void 0;try{let T=function(N){const{block:B,request:A,rpcStateOverride:$}=N;return e.request({method:"eth_estimateGas",params:$?[A,B??"latest",$]:B?[A,B]:[A]})};const{accessList:s,authorizationList:o,blobs:a,blobVersionedHashes:c,blockNumber:u,blockTag:i,data:l,gas:f,gasPrice:d,maxFeePerBlobGas:p,maxFeePerGas:h,maxPriorityFeePerGas:g,nonce:y,value:w,stateOverride:v,...x}=await Pn(e,{...t,parameters:r?.type==="local"?void 0:["blobVersionedHashes"]}),_=(u?F(u):void 0)||i,m=Ha(v),b=await(async()=>{if(x.to)return x.to;if(o&&o.length>0)return await Ca({authorization:o[0]}).catch(()=>{throw new O("`to` is required. Could not infer from `authorizationList`")})})();wt(t);const E=e.chain?.formatters?.transactionRequest?.format,S=(E||Je)({...En(x,{format:E}),from:r?.address,accessList:s,authorizationList:o,blobs:a,blobVersionedHashes:c,data:l,gas:f,gasPrice:d,maxFeePerBlobGas:p,maxFeePerGas:h,maxPriorityFeePerGas:g,nonce:y,to:b,value:w});let k=BigInt(await T({block:_,request:S,rpcStateOverride:m}));if(o){const N=await Va(e,{address:S.from}),B=await Promise.all(o.map(async A=>{const{contractAddress:$}=A,M=await T({block:_,request:{authorizationList:void 0,data:l,from:r?.address,to:$,value:F(N)},rpcStateOverride:m}).catch(()=>100000n);return 2n*BigInt(M)}));k+=B.reduce((A,$)=>A+$,0n)}return k}catch(s){throw yd(s,{...t,account:r,chain:e.chain})}}async function As(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,r?F(r):n]},{dedupe:!!r});return W(s)}const Wa=["blobVersionedHashes","chainId","fees","gas","nonce","type"];async function Pn(e,t){const{account:n=e.account,blobs:r,chain:s,gas:o,kzg:a,nonce:c,nonceManager:u,parameters:i=Wa,type:l}=t,f=n&&de(n),d={...t,...f?{from:f?.address}:{}};let p;async function h(){return p||(p=await R(e,Te,"getBlock")({blockTag:"latest"}),p)}let g;async function y(){return g||(s?s.id:typeof t.chainId<"u"?t.chainId:(g=await R(e,Lt,"getChainId")({}),g))}if((i.includes("blobVersionedHashes")||i.includes("sidecars"))&&r&&a){const w=ta({blobs:r,kzg:a});if(i.includes("blobVersionedHashes")){const v=na({commitments:w,to:"hex"});d.blobVersionedHashes=v}if(i.includes("sidecars")){const v=ra({blobs:r,commitments:w,kzg:a}),x=os({blobs:r,commitments:w,proofs:v,to:"hex"});d.sidecars=x}}if(i.includes("chainId")&&(d.chainId=await y()),i.includes("nonce")&&typeof c>"u"&&f)if(u){const w=await y();d.nonce=await u.consume({address:f.address,chainId:w,client:e})}else d.nonce=await R(e,As,"getTransactionCount")({address:f.address,blockTag:"pending"});if((i.includes("fees")||i.includes("type"))&&typeof l>"u")try{d.type=sa(d)}catch{const w=await h();d.type=typeof w?.baseFeePerGas=="bigint"?"eip1559":"legacy"}if(i.includes("fees"))if(d.type!=="legacy"&&d.type!=="eip2930"){if(typeof d.maxFeePerGas>"u"||typeof d.maxPriorityFeePerGas>"u"){const w=await h(),{maxFeePerGas:v,maxPriorityFeePerGas:x}=await Rr(e,{block:w,chain:s,request:d});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<x)throw new qa({maxPriorityFeePerGas:x});d.maxPriorityFeePerGas=x,d.maxFeePerGas=v}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new In;const w=await h(),{gasPrice:v}=await Rr(e,{block:w,chain:s,request:d,type:"legacy"});d.gasPrice=v}return i.includes("gas")&&typeof o>"u"&&(d.gas=await R(e,Bs,"estimateGas")({...d,account:f&&{address:f.address,type:"json-rpc"}})),wt(d),delete d.parameters,d}async function Ts(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const bo=new oa(128);async function Ns(e,t){const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:o,blobs:a,data:c,gas:u,gasPrice:i,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:d,nonce:p,value:h,...g}=t;if(typeof n>"u")throw new Dt({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?de(n):null;try{wt(t);const w=await(async()=>{if(t.to)return t.to;if(o&&o.length>0)return await Ca({authorization:o[0]}).catch(()=>{throw new O("`to` is required. Could not infer from `authorizationList`.")})})();if(y?.type==="json-rpc"||y===null){let v;r!==null&&(v=await R(e,Lt,"getChainId")({}),Is({currentChainId:v,chain:r}));const x=e.chain?.formatters?.transactionRequest?.format,_=(x||Je)({...En(g,{format:x}),accessList:s,authorizationList:o,blobs:a,chainId:v,data:c,from:y?.address,gas:u,gasPrice:i,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:d,nonce:p,to:w,value:h}),m=bo.get(e.uid)?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:m,params:[_]},{retryCount:0})}catch(b){const E=b;if(E.name==="InvalidInputRpcError"||E.name==="InvalidParamsRpcError"||E.name==="MethodNotFoundRpcError"||E.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[_]},{retryCount:0}).then(I=>(bo.set(e.uid,!0),I));throw E}}if(y?.type==="local"){const v=await R(e,Pn,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:o,blobs:a,chain:r,data:c,gas:u,gasPrice:i,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:d,nonce:p,nonceManager:y.nonceManager,parameters:[...Wa,"sidecars"],value:h,...g,to:w}),x=r?.serializers?.transaction,P=await y.signTransaction(v,{serializer:x});return await R(e,Ts,"sendRawTransaction")({serializedTransaction:P})}throw y?.type==="smart"?new ur({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new ur({docsPath:"/docs/actions/wallet/sendTransaction",type:y?.type})}catch(w){throw w instanceof ur?w:ld(w,{...t,account:y,chain:t.chain||void 0})}}function wd(e,t){const{abi:n,args:r,bytecode:s,...o}=t,a=Ct({abi:n,args:r,bytecode:s});return Ns(e,{...o,data:a})}const fn=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Za=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],Ka=[...Za,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],vd=[...Za,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],wo=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],vo=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Cr=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],xd=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Ed=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}]},{type:"function",name:"allowance",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"bytes32"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Id=[{type:"event",name:"Approval",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"event",name:"ApprovalForAll",inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"operator",type:"address"},{indexed:!1,name:"approved",type:"bool"}]},{type:"event",name:"Transfer",inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!0,name:"tokenId",type:"uint256"}]},{type:"function",name:"approve",stateMutability:"payable",inputs:[{name:"spender",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"getApproved",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"address"}]},{type:"function",name:"isApprovedForAll",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"operator",type:"address"}],outputs:[{type:"bool"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"ownerOf",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"owner",type:"address"}]},{type:"function",name:"safeTransferFrom",stateMutability:"payable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],outputs:[]},{type:"function",name:"safeTransferFrom",stateMutability:"nonpayable",inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"id",type:"uint256"},{name:"data",type:"bytes"}],outputs:[]},{type:"function",name:"setApprovalForAll",stateMutability:"nonpayable",inputs:[{name:"operator",type:"address"},{name:"approved",type:"bool"}],outputs:[]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:"string"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"index",type:"uint256"}],outputs:[{type:"uint256"}]},{type:"function",name:"tokenByIndex",stateMutability:"view",inputs:[{name:"owner",type:"address"},{name:"index",type:"uint256"}],outputs:[{name:"tokenId",type:"uint256"}]},{type:"function",name:"tokenURI",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{type:"string"}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]},{type:"function",name:"transferFrom",stateMutability:"payable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"tokeId",type:"uint256"}],outputs:[]}],Pd=[{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"receiver",type:"address"},{indexed:!0,name:"owner",type:"address"},{indexed:!1,name:"assets",type:"uint256"},{indexed:!1,name:"shares",type:"uint256"}],name:"Withdraw",type:"event"},{inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"asset",outputs:[{name:"assetTokenAddress",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"convertToAssets",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"convertToShares",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"}],name:"deposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxDeposit",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"caller",type:"address"}],name:"maxMint",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxRedeem",outputs:[{name:"maxShares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"maxWithdraw",outputs:[{name:"maxAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"}],name:"mint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewDeposit",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewMint",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"}],name:"previewRedeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"assets",type:"uint256"}],name:"previewWithdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"shares",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"redeem",outputs:[{name:"assets",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalAssets",outputs:[{name:"totalManagedAssets",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"assets",type:"uint256"},{name:"receiver",type:"address"},{name:"owner",type:"address"}],name:"withdraw",outputs:[{name:"shares",type:"uint256"}],stateMutability:"nonpayable",type:"function"}];function _d(e,t){const n=typeof t=="string"?{to:t}:t,r=n.to;return r==="number"?me(e,n):r==="bigint"?ks(e,n):r==="boolean"?$s(e,n):r==="string"?Ms(e,n):Y(e,n)}function ks(e,t={}){typeof t.size<"u"&&gn(e,{size:t.size});const n=Y(e,t);return U(n,t)}function $s(e,t={}){let n=e;if(typeof t.size<"u"&&(gn(n,{size:t.size}),n=gt(n)),n.length>1||n[0]>1)throw new aa(n);return!!n[0]}function me(e,t={}){typeof t.size<"u"&&gn(e,{size:t.size});const n=Y(e,t);return W(n,t)}function Ms(e,t={}){let n=e;return typeof t.size<"u"&&(gn(n,{size:t.size}),n=gt(n,{dir:"right"})),new TextDecoder().decode(n)}function De(e,t){const n=typeof t=="string"?ke(t):t,r=an(n);if(ne(n)===0&&e.length>0)throw new Ot;if(ne(t)&&ne(t)<32)throw new hs({data:typeof t=="string"?t:Y(t),params:e,size:ne(t)});let s=0;const o=[];for(let a=0;a<e.length;++a){const c=e[a];r.setPosition(s);const[u,i]=ct(r,c,{staticPosition:0});s+=i,o.push(u)}return o}function ct(e,t,{staticPosition:n}){const r=Es(t.type);if(r){const[s,o]=r;return Bd(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return kd(e,t,{staticPosition:n});if(t.type==="address")return Sd(e);if(t.type==="bool")return Ad(e);if(t.type.startsWith("bytes"))return Td(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Nd(e,t);if(t.type==="string")return $d(e,{staticPosition:n});throw new $a(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const xo=32,Dr=32;function Sd(e){const t=e.readBytes(32);return[yn(Y(ia(t,-20))),32]}function Bd(e,t,{length:n,staticPosition:r}){if(!n){const a=me(e.readBytes(Dr)),c=r+a,u=c+xo;e.setPosition(c);const i=me(e.readBytes(xo)),l=$t(t);let f=0;const d=[];for(let p=0;p<i;++p){e.setPosition(u+(l?p*32:f));const[h,g]=ct(e,t,{staticPosition:u});f+=g,d.push(h)}return e.setPosition(r+32),[d,32]}if($t(t)){const a=me(e.readBytes(Dr)),c=r+a,u=[];for(let i=0;i<n;++i){e.setPosition(c+i*32);const[l]=ct(e,t,{staticPosition:c});u.push(l)}return e.setPosition(r+32),[u,32]}let s=0;const o=[];for(let a=0;a<n;++a){const[c,u]=ct(e,t,{staticPosition:r+s});s+=u,o.push(c)}return[o,s]}function Ad(e){return[$s(e.readBytes(32),{size:32}),32]}function Td(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const a=me(e.readBytes(32));e.setPosition(n+a);const c=me(e.readBytes(32));if(c===0)return e.setPosition(n+32),["0x",32];const u=e.readBytes(c);return e.setPosition(n+32),[Y(u),32]}return[Y(e.readBytes(Number.parseInt(s),32)),32]}function Nd(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[r>48?ks(s,{signed:n}):me(s,{signed:n}),32]}function kd(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:a})=>!a),s=r?[]:{};let o=0;if($t(t)){const a=me(e.readBytes(Dr)),c=n+a;for(let u=0;u<t.components.length;++u){const i=t.components[u];e.setPosition(c+o);const[l,f]=ct(e,i,{staticPosition:c});o+=f,s[r?u:i?.name]=l}return e.setPosition(n+32),[s,32]}for(let a=0;a<t.components.length;++a){const c=t.components[a],[u,i]=ct(e,c,{staticPosition:n});s[r?a:c?.name]=u,o+=i}return[s,o]}function $d(e,{staticPosition:t}){const n=me(e.readBytes(32)),r=t+n;e.setPosition(r);const s=me(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),a=Ms(gt(o));return e.setPosition(t+32),[a,32]}function $t(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some($t);const n=Es(e.type);return!!(n&&$t({...e,type:n[1]}))}const Md=e=>V(fe(e));function Fd(e){return Md(e)}const Od="1.0.6";class ee extends Error{constructor(t,n={}){const r=n.cause instanceof ee?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof ee&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Od}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}}function Le(e,t){return e.exec(t)?.groups}const Ya=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ja=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Xa=/^\(.+?\).*?$/,Eo=/^tuple(?<array>(\[(\d*)\])*)$/;function Lr(e){let t=e.type;if(Eo.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const o=e.components[s];t+=Lr(o),s<n-1&&(t+=", ")}const r=Le(Eo,e.type);return t+=`)${r?.array??""}`,Lr({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Et(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=Lr(s),r!==n-1&&(t+=", ")}return t}function Rd(e){return e.type==="function"?`function ${e.name}(${Et(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs.length?` returns (${Et(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${Et(e.inputs)})`:e.type==="error"?`error ${e.name}(${Et(e.inputs)})`:e.type==="constructor"?`constructor(${Et(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?"fallback()":"receive() external payable"}const Qa=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Cd(e){return Qa.test(e)}function Dd(e){return Le(Qa,e)}const ei=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Ld(e){return ei.test(e)}function qd(e){return Le(ei,e)}const ti=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function jd(e){return ti.test(e)}function Ud(e){return Le(ti,e)}const ni=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function qt(e){return ni.test(e)}function zd(e){return Le(ni,e)}const ri=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Gd(e){return ri.test(e)}function Hd(e){return Le(ri,e)}const Vd=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Wd(e){return Vd.test(e)}const Zd=/^receive\(\) external payable$/;function Kd(e){return Zd.test(e)}const ln=new Set(["memory","indexed","storage","calldata"]),Yd=new Set(["indexed"]),qr=new Set(["calldata","memory","storage"]);class si extends ee{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class oi extends ee{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Jd extends ee{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class ai extends ee{constructor({param:t}){super("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameter-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParameterError"})}}class ii extends ee{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class ci extends ee{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class ui extends ee{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class fi extends ee{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class li extends ee{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class di extends ee{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class st extends ee{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class pi extends ee{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class hi extends ee{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class mi extends ee{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class yi extends ee{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Xd(e,t){return t?`${t}:${e}`:e}const fr=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function jr(e,t={}){if(jd(e)){const n=Ud(e);if(!n)throw new st({signature:e,type:"function"});const r=ae(n.parameters),s=[],o=r.length;for(let c=0;c<o;c++)s.push(he(r[c],{modifiers:qr,structs:t,type:"function"}));const a=[];if(n.returns){const c=ae(n.returns),u=c.length;for(let i=0;i<u;i++)a.push(he(c[i],{modifiers:qr,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:a}}if(Ld(e)){const n=qd(e);if(!n)throw new st({signature:e,type:"event"});const r=ae(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(he(r[a],{modifiers:Yd,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}if(Cd(e)){const n=Dd(e);if(!n)throw new st({signature:e,type:"error"});const r=ae(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(he(r[a],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}if(Gd(e)){const n=Hd(e);if(!n)throw new st({signature:e,type:"constructor"});const r=ae(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(he(r[a],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}if(Wd(e))return{type:"fallback"};if(Kd(e))return{type:"receive",stateMutability:"payable"};throw new pi({signature:e})}const Qd=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,e0=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,t0=/^u?int$/;function he(e,t){const n=Xd(e,t?.type);if(fr.has(n))return fr.get(n);const r=Xa.test(e),s=Le(r?e0:Qd,e);if(!s)throw new ci({param:e});if(s.name&&r0(s.name))throw new ui({param:e,name:s.name});const o=s.name?{name:s.name}:{},a=s.modifier==="indexed"?{indexed:!0}:{},c=t?.structs??{};let u,i={};if(r){u="tuple";const f=ae(s.type),d=[],p=f.length;for(let h=0;h<p;h++)d.push(he(f[h],{structs:c}));i={components:d}}else if(s.type in c)u="tuple",i={components:c[s.type]};else if(t0.test(s.type))u=`${s.type}256`;else if(u=s.type,t?.type!=="struct"&&!gi(u))throw new Jd({type:u});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new fi({param:e,type:t?.type,modifier:s.modifier});if(qr.has(s.modifier)&&!s0(u,!!s.array))throw new li({param:e,type:t?.type,modifier:s.modifier})}const l={type:`${u}${s.array??""}`,...o,...a,...i};return fr.set(n,l),l}function ae(e,t=[],n="",r=0){const s=e.trim().length;for(let o=0;o<s;o++){const a=e[o],c=e.slice(o+1);switch(a){case",":return r===0?ae(c,[...t,n.trim()]):ae(c,t,`${n}${a}`,r);case"(":return ae(c,t,`${n}${a}`,r+1);case")":return ae(c,t,`${n}${a}`,r-1);default:return ae(c,t,`${n}${a}`,r)}}if(n==="")return t;if(r!==0)throw new yi({current:n,depth:r});return t.push(n.trim()),t}function gi(e){return e==="address"||e==="bool"||e==="function"||e==="string"||Ya.test(e)||Ja.test(e)}const n0=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function r0(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||Ya.test(e)||Ja.test(e)||n0.test(e)}function s0(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function _n(e){const t={},n=e.length;for(let a=0;a<n;a++){const c=e[a];if(!qt(c))continue;const u=zd(c);if(!u)throw new st({signature:c,type:"struct"});const i=u.properties.split(";"),l=[],f=i.length;for(let d=0;d<f;d++){const h=i[d].trim();if(!h)continue;const g=he(h,{type:"struct"});l.push(g)}if(!l.length)throw new hi({signature:c});t[u.name]=l}const r={},s=Object.entries(t),o=s.length;for(let a=0;a<o;a++){const[c,u]=s[a];r[c]=bi(u,t)}return r}const o0=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function bi(e,t,n=new Set){const r=[],s=e.length;for(let o=0;o<s;o++){const a=e[o];if(Xa.test(a.type))r.push(a);else{const u=Le(o0,a.type);if(!u?.type)throw new di({abiParameter:a});const{array:i,type:l}=u;if(l in t){if(n.has(l))throw new mi({type:l});r.push({...a,type:`tuple${i??""}`,components:bi(t[l]??[],t,new Set([...n,l]))})}else if(gi(l))r.push(a);else throw new oi({type:l})}}return r}function Fs(e){const t=_n(e),n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];qt(o)||n.push(jr(o,t))}return n}function a0(e){let t;if(typeof e=="string")t=jr(e);else{const n=_n(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(!qt(o)){t=jr(o,n);break}}}if(!t)throw new si({signature:e});return t}function i0(e){let t;if(typeof e=="string")t=he(e,{modifiers:ln});else{const n=_n(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(!qt(o)){t=he(o,{modifiers:ln,structs:n});break}}}if(!t)throw new ai({param:e});return t}function c0(e){const t=[];if(typeof e=="string"){const n=ae(e),r=n.length;for(let s=0;s<r;s++)t.push(he(n[s],{modifiers:ln}))}else{const n=_n(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(qt(o))continue;const a=ae(o),c=a.length;for(let u=0;u<c;u++)t.push(he(a[u],{modifiers:ln,structs:n}))}}if(t.length===0)throw new ii({params:e});return t}function u0(e){let t=!0,n="",r=0,s="",o=!1;for(let a=0;a<e.length;a++){const c=e[a];if(["(",")",","].includes(c)&&(t=!0),c==="("&&r++,c===")"&&r--,!!t){if(r===0){if(c===" "&&["event","function",""].includes(s))s="";else if(s+=c,c===")"){o=!0;break}continue}if(c===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=c,n+=c}}if(!o)throw new O("Unable to normalize signature.");return s}const _t=e=>{const t=typeof e=="string"?e:Rd(e);return u0(t)};function dn(e){return Fd(_t(e))}const dt=dn,We=e=>Fe(dn(e),0,4);function qe(e){const{abi:t,args:n=[],name:r}=e,s=C(r,{strict:!1}),o=t.filter(c=>s?c.type==="function"?We(c)===r:c.type==="event"?dt(c)===r:!1:"name"in c&&c.name===r);if(o.length===0)return;if(o.length===1)return o[0];let a;for(const c of o){if(!("inputs"in c))continue;if(!n||n.length===0){if(!c.inputs||c.inputs.length===0)return c;continue}if(!c.inputs||c.inputs.length===0||c.inputs.length!==n.length)continue;if(n.every((i,l)=>{const f="inputs"in c&&c.inputs[l];return f?Ur(i,f):!1})){if(a&&"inputs"in a&&a.inputs){const i=wi(c.inputs,a.inputs,n);if(i)throw new ed({abiItem:c,type:i[0]},{abiItem:a,type:i[1]})}a=c}}return a||o[0]}function Ur(e,t){const n=typeof e,r=t.type;switch(r){case"address":return ie(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>Ur(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>Ur(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function wi(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return wi(s.components,o.components,n[r]);const a=[s.type,o.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?ie(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?ie(n[r],{strict:!1}):!1)return a}}const lr="/docs/contract/decodeFunctionResult";function Xe(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const c=qe({abi:t,args:n,name:r});if(!c)throw new Ve(r,{docsPath:lr});o=c}if(o.type!=="function")throw new Ve(void 0,{docsPath:lr});if(!o.outputs)throw new bs(o.name,{docsPath:lr});const a=De(o.outputs,s);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}const Io="/docs/contract/encodeFunctionData";function vi(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const o=qe({abi:t,args:n,name:r});if(!o)throw new Ve(r,{docsPath:Io});s=o}if(s.type!=="function")throw new Ve(void 0,{docsPath:Io});return{abi:[s],functionName:We(ge(s))}}function Pe(e){const{args:t}=e,{abi:n,functionName:r}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:vi(e),s=n[0],o=r,a="inputs"in s&&s.inputs?Ie(s.inputs,t??[]):void 0;return Ce([o,a??"0x"])}function Qe({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new cn({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new cn({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const xi={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},f0={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},l0={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Os(e){const{abi:t,data:n}=e,r=Fe(n,0,4);if(r==="0x")throw new Ot;const o=[...t||[],f0,l0].find(a=>a.type==="error"&&r===We(ge(a)));if(!o)throw new ys(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?De(o.inputs,Fe(n,4)):void 0,errorName:o.name}}function Ei({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?re(t[o]):t[o]}`).join(", ")})`}class Rs extends O{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:a,gasPrice:c,maxFeePerGas:u,maxPriorityFeePerGas:i,nonce:l,to:f,value:d,stateOverride:p}){const h=n?de(n):void 0;let g=rs({from:h?.address,to:f,value:typeof d<"u"&&`${ss(d)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:a,gasPrice:typeof c<"u"&&`${$e(c)} gwei`,maxFeePerGas:typeof u<"u"&&`${$e(u)} gwei`,maxPriorityFeePerGas:typeof i<"u"&&`${$e(i)} gwei`,nonce:l});p&&(g+=`
${gd(p)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Ii extends O{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:a,sender:c}){const u=qe({abi:n,args:r,name:a}),i=u?Ei({abiItem:u,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=u?ge(u,{includeName:!0}):void 0,f=rs({address:s&&tu(s),function:l,args:i&&i!=="()"&&`${[...Array(a?.length??0).keys()].map(()=>" ").join("")}${i}`,sender:c});super(t.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],f&&"Contract Call:",f].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=a,this.sender=c}}class pn extends O{constructor({abi:t,data:n,functionName:r,message:s}){let o,a,c,u;if(n&&n!=="0x")try{a=Os({abi:t,data:n});const{abiItem:l,errorName:f,args:d}=a;if(f==="Error")u=d[0];else if(f==="Panic"){const[p]=d;u=xi[p]}else{const p=l?ge(l,{includeName:!0}):void 0,h=l&&d?Ei({abiItem:l,args:d,includeFunctionName:!1,includeName:!1}):void 0;c=[p?`Error: ${p}`:"",h&&h!=="()"?`       ${[...Array(f?.length??0).keys()].map(()=>" ").join("")}${h}`:""]}}catch(l){o=l}else s&&(u=s);let i;o instanceof ys&&(i=o.signature,c=[`Unable to decode signature "${i}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${i}.`]),super(u&&u!=="execution reverted"||i?[`The contract function "${r}" reverted with the following ${i?"signature":"reason"}:`,u||i].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:c,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.reason=u,this.signature=i}}class Pi extends O{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class _i extends O{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class Sn extends O{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}function Cs(e,t){if(!(e instanceof O))return!1;const n=e.walk(r=>r instanceof pn);return n instanceof pn?!!(n.data?.errorName==="ResolverNotFound"||n.data?.errorName==="ResolverWildcardNotSupported"||n.data?.errorName==="ResolverNotContract"||n.data?.errorName==="ResolverError"||n.data?.errorName==="HttpError"||n.reason?.includes("Wildcard on non-extended resolvers is not supported")||t==="reverse"&&n.reason===xi[50]):!1}function Si(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return C(t)?t:null}function Bt(e){let t=new Uint8Array(32).fill(0);if(!e)return Y(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=Si(n[r]),o=s?fe(s):V(at(n[r]),"bytes");t=V(le([t,o]),"bytes")}return Y(t)}function d0(e){return`[${e.slice(2)}]`}function Bi(e){const t=new Uint8Array(32).fill(0);return e?Si(e)||V(at(e)):Y(t)}function Bn(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(at(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let a=at(s[o]);a.byteLength>255&&(a=at(d0(Bi(s[o])))),n[r]=a.length,n.set(a,r+1),r+=a.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const p0=3;function Ze(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:a}){const{code:c,data:u,message:i,shortMessage:l}=e instanceof Sn?e:e instanceof O?e.walk(d=>"data"in d)||e.walk():{},f=e instanceof Ot?new Pi({functionName:o}):[p0,ca.code].includes(c)&&(u||i||l)?new pn({abi:t,data:typeof u=="object"?u.data:u,functionName:o,message:l??i}):e;return new Ii(f,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:a})}const h0="0x82ad56cb",Ai="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Ti="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Ni="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function m0(e,{docsPath:t,...n}){const r=(()=>{const s=Ps(e,n);return s instanceof Ft?e:s})();return new Rs(r,{docsPath:t,...n})}function ki(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const dr=new Map;function Ds({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const o=async()=>{const l=u();a();const f=l.map(({args:d})=>d);f.length!==0&&e(f).then(d=>{s&&Array.isArray(d)&&d.sort(s);for(let p=0;p<l.length;p++){const{resolve:h}=l[p];h?.([d[p],d])}}).catch(d=>{for(let p=0;p<l.length;p++){const{reject:h}=l[p];h?.(d)}})},a=()=>dr.delete(t),c=()=>u().map(({args:l})=>l),u=()=>dr.get(t)||[],i=l=>dr.set(t,[...u(),l]);return{flush:a,async schedule(l){const{promise:f,resolve:d,reject:p}=ki();return n?.([...c(),l])&&o(),u().length>0?(i({args:l,resolve:d,reject:p}),f):(i({args:l,resolve:d,reject:p}),setTimeout(o,r),f)}}}async function jt(e,t){const{account:n=e.account,batch:r=!!e.batch?.multicall,blockNumber:s,blockTag:o="latest",accessList:a,blobs:c,code:u,data:i,factory:l,factoryData:f,gas:d,gasPrice:p,maxFeePerBlobGas:h,maxFeePerGas:g,maxPriorityFeePerGas:y,nonce:w,to:v,value:x,stateOverride:P,..._}=t,m=n?de(n):void 0;if(u&&(l||f))throw new O("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&v)throw new O("Cannot provide both `code` & `to` as parameters.");const b=u&&i,E=l&&f&&v&&i,I=b||E,S=b?b0({code:u,data:i}):E?w0({data:i,factory:l,factoryData:f,to:v}):i;try{wt(t);const k=(s?F(s):void 0)||o,N=Ha(P),B=e.chain?.formatters?.transactionRequest?.format,$=(B||Je)({...En(_,{format:B}),from:m?.address,accessList:a,blobs:c,data:S,gas:d,gasPrice:p,maxFeePerBlobGas:h,maxFeePerGas:g,maxPriorityFeePerGas:y,nonce:w,to:I?void 0:v,value:x});if(r&&y0({request:$})&&!N)try{return await g0(e,{...$,blockNumber:s,blockTag:o})}catch(q){if(!(q instanceof as)&&!(q instanceof cn))throw q}const M=await e.request({method:"eth_call",params:N?[$,k,N]:[$,k]});return M==="0x"?{data:void 0}:{data:M}}catch(T){const k=v0(T),{offchainLookup:N,offchainLookupSignature:B}=await es(async()=>{const{offchainLookup:A,offchainLookupSignature:$}=await Promise.resolve().then(()=>mp);return{offchainLookup:A,offchainLookupSignature:$}},void 0);if(e.ccipRead!==!1&&k?.slice(0,10)===B&&v)return{data:await N(e,{data:k,to:v})};throw I&&k?.slice(0,10)==="0x101bb98d"?new _i({factory:l}):m0(T,{...t,account:m,chain:e.chain})}}function y0({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(h0)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function g0(e,t){const{batchSize:n=1024,wait:r=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:s,blockTag:o="latest",data:a,multicallAddress:c,to:u}=t;let i=c;if(!i){if(!e.chain)throw new as;i=Qe({blockNumber:s,chain:e.chain,contract:"multicall3"})}const f=(s?F(s):void 0)||o,{schedule:d}=Ds({id:`${e.uid}.${f}`,wait:r,shouldSplitBatch(g){return g.reduce((w,{data:v})=>w+(v.length-2),0)>n*2},fn:async g=>{const y=g.map(x=>({allowFailure:!0,callData:x.data,target:x.to})),w=Pe({abi:fn,args:[y],functionName:"aggregate3"}),v=await e.request({method:"eth_call",params:[{data:w,to:i},f]});return Xe({abi:fn,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:p,success:h}]=await d({data:a,to:u});if(!h)throw new Sn({data:p});return p==="0x"?{data:void 0}:{data:p}}function b0(e){const{code:t,data:n}=e;return Ct({abi:Fs(["constructor(bytes, bytes)"]),bytecode:Ai,args:[t,n]})}function w0(e){const{data:t,factory:n,factoryData:r,to:s}=e;return Ct({abi:Fs(["constructor(address, bytes, address, bytes)"]),bytecode:Ti,args:[s,t,n,r]})}function v0(e){if(!(e instanceof O))return;const t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}async function Ee(e,t){const{abi:n,address:r,args:s,functionName:o,...a}=t,c=Pe({abi:n,args:s,functionName:o});try{const{data:u}=await R(e,jt,"call")({...a,data:c,to:r});return Xe({abi:n,args:s,functionName:o,data:u||"0x"})}catch(u){throw Ze(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function x0(e,{blockNumber:t,blockTag:n,coinType:r,name:s,gatewayUrls:o,strict:a,universalResolverAddress:c}){let u=c;if(!u){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");u=Qe({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i=Pe({abi:vo,functionName:"addr",...r!=null?{args:[Bt(s),BigInt(r)]}:{args:[Bt(s)]}}),l={address:u,abi:Ka,functionName:"resolve",args:[ye(Bn(s)),i],blockNumber:t,blockTag:n},f=R(e,Ee,"readContract"),d=o?await f({...l,args:[...l.args,o]}):await f(l);if(d[0]==="0x")return null;const p=Xe({abi:vo,args:r!=null?[Bt(s),BigInt(r)]:void 0,functionName:"addr",data:d[0]});return p==="0x"||gt(p)==="0x00"?null:p}catch(i){if(a)throw i;if(Cs(i,"resolve"))return null;throw i}}class E0 extends O{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class rt extends O{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class An extends O{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class $i extends O{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const I0=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,P0=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,_0=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,S0=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function B0(e){try{const t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Po(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function Mi({uri:e,gatewayUrls:t}){const n=_0.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Po(t?.ipfs,"https://ipfs.io"),s=Po(t?.arweave,"https://arweave.net"),o=e.match(I0),{protocol:a,subpath:c,target:u,subtarget:i=""}=o?.groups||{},l=a==="ipns:/"||c==="ipns/",f=a==="ipfs:/"||c==="ipfs/"||P0.test(e);if(e.startsWith("http")&&!l&&!f){let p=e;return t?.arweave&&(p=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:p,isOnChain:!1,isEncoded:!1}}if((l||f)&&u)return{uri:`${r}/${l?"ipns":"ipfs"}/${u}${i}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&u)return{uri:`${s}/${u}${i||""}`,isOnChain:!1,isEncoded:!1};let d=e.replace(S0,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new An({uri:e})}function Fi(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new E0({data:e});return e.image||e.image_url||e.image_data}async function A0({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await Ls({gatewayUrls:e,uri:Fi(n)})}catch{throw new An({uri:t})}}async function Ls({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=Mi({uri:t,gatewayUrls:e});if(r||await B0(n))return n;throw new An({uri:t})}function T0(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,a]=n.split(":"),[c,u]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new rt({reason:"Only EIP-155 supported"});if(!a)throw new rt({reason:"Chain ID not found"});if(!u)throw new rt({reason:"Contract address not found"});if(!s)throw new rt({reason:"Token ID not found"});if(!c)throw new rt({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a),namespace:c.toLowerCase(),contractAddress:u,tokenID:s}}async function N0(e,{nft:t}){if(t.namespace==="erc721")return Ee(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Ee(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new $i({namespace:t.namespace})}async function k0(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?$0(e,{gatewayUrls:t,record:n}):Ls({uri:n,gatewayUrls:t})}async function $0(e,{gatewayUrls:t,record:n}){const r=T0(n),s=await N0(e,{nft:r}),{uri:o,isOnChain:a,isEncoded:c}=Mi({uri:s,gatewayUrls:t});if(a&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const i=c?atob(o.replace("data:application/json;base64,","")):o,l=JSON.parse(i);return Ls({uri:Fi(l),gatewayUrls:t})}let u=r.tokenID;return r.namespace==="erc1155"&&(u=u.replace("0x","").padStart(64,"0")),A0({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,u)})}async function Oi(e,{blockNumber:t,blockTag:n,name:r,key:s,gatewayUrls:o,strict:a,universalResolverAddress:c}){let u=c;if(!u){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");u=Qe({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}try{const i={address:u,abi:Ka,functionName:"resolve",args:[ye(Bn(r)),Pe({abi:wo,functionName:"text",args:[Bt(r),s]})],blockNumber:t,blockTag:n},l=R(e,Ee,"readContract"),f=o?await l({...i,args:[...i.args,o]}):await l(i);if(f[0]==="0x")return null;const d=Xe({abi:wo,functionName:"text",data:f[0]});return d===""?null:d}catch(i){if(a)throw i;if(Cs(i,"resolve"))return null;throw i}}async function M0(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:a,universalResolverAddress:c}){const u=await R(e,Oi,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:c,gatewayUrls:o,strict:a});if(!u)return null;try{return await k0(e,{record:u,gatewayUrls:r})}catch{return null}}async function F0(e,{address:t,blockNumber:n,blockTag:r,gatewayUrls:s,strict:o,universalResolverAddress:a}){let c=a;if(!c){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");c=Qe({blockNumber:n,chain:e.chain,contract:"ensUniversalResolver"})}const u=`${t.toLowerCase().substring(2)}.addr.reverse`;try{const i={address:c,abi:vd,functionName:"reverse",args:[ye(Bn(u))],blockNumber:n,blockTag:r},l=R(e,Ee,"readContract"),[f,d]=s?await l({...i,args:[...i.args,s]}):await l(i);return t.toLowerCase()!==d.toLowerCase()?null:f}catch(i){if(o)throw i;if(Cs(i,"reverse"))return null;throw i}}async function O0(e,{blockNumber:t,blockTag:n,name:r,universalResolverAddress:s}){let o=s;if(!o){if(!e.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Qe({blockNumber:t,chain:e.chain,contract:"ensUniversalResolver"})}const[a]=await R(e,Ee,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[ye(Bn(r))],blockNumber:t,blockTag:n});return a}function Tn(e,{method:t}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:r,response:s,status:o,transport:a})=>{o==="success"&&t===r&&(n[s]=a.request)}),r=>n[r]||e.request}async function R0(e){const t=Tn(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}class Ri extends O{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const _o="/docs/contract/encodeEventTopics";function vt(e){const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const u=qe({abi:t,name:n});if(!u)throw new Or(n,{docsPath:_o});s=u}if(s.type!=="event")throw new Or(void 0,{docsPath:_o});const o=ge(s),a=dt(o);let c=[];if(r&&"inputs"in s){const u=s.inputs?.filter(l=>"indexed"in l&&l.indexed),i=Array.isArray(r)?r:Object.values(r).length>0?u?.map(l=>r[l.name])??[]:[];i.length>0&&(c=u?.map((l,f)=>Array.isArray(i[f])?i[f].map((d,p)=>So({param:l,value:i[f][p]})):i[f]?So({param:l,value:i[f]}):null)??[])}return[a,...c]}function So({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return V(fe(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new Ri(e.type);return Ie([e],[t])}async function qs(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:a,strict:c,toBlock:u}=t,i=Tn(e,{method:"eth_newFilter"}),l=o?vt({abi:r,args:s,eventName:o}):void 0,f=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof a=="bigint"?F(a):a,toBlock:typeof u=="bigint"?F(u):u,topics:l}]});return{abi:r,args:s,eventName:o,id:f,request:i(f),strict:!!c,type:"event"}}async function Ci(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:a,toBlock:c}={}){const u=s??(r?[r]:void 0),i=Tn(e,{method:"eth_newFilter"});let l=[];u&&(l=[u.flatMap(p=>vt({abi:[p],eventName:p.name,args:n}))],r&&(l=l[0]));const f=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?F(o):o,toBlock:typeof c=="bigint"?F(c):c,...l.length?{topics:l}:{}}]});return{abi:u,args:n,eventName:r?r.name:void 0,fromBlock:o,id:f,request:i(f),strict:!!a,toBlock:c,type:"event"}}async function Di(e){const t=Tn(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function C0(e){return e.request({method:`${e.mode}_dumpState`})}async function Li(e,t){const{abi:n,address:r,args:s,functionName:o,...a}=t,c=Pe({abi:n,args:s,functionName:o});try{return await R(e,Bs,"estimateGas")({data:c,to:r,...a})}catch(u){const i=a.account?de(a.account):void 0;throw Ze(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:i?.address})}}async function D0(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}const L0=new Map,q0=new Map;function j0(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:a=>o.set(s,a)}),n=t(e,L0),r=t(e,q0);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function U0(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=j0(t),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const a=await o;return r.response.set({created:new Date,data:a}),a}finally{r.promise.clear()}}const z0=e=>`blockNumber.${e}`;async function Ut(e,{cacheTime:t=e.cacheTime}={}){const n=await U0(()=>e.request({method:"eth_blockNumber"}),{cacheKey:z0(e.uid),cacheTime:t});return BigInt(n)}async function G0(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?F(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),W(o)}async function Bo(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?F(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}function je(e,t){if(!ie(e,{strict:!1}))throw new ve({address:e});if(!ie(t,{strict:!1}))throw new ve({address:t});return e.toLowerCase()===t.toLowerCase()}const Ao="/docs/contract/decodeEventLog";function Nn(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[a,...c]=s;if(!a)throw new Ta({docsPath:Ao});const u=t.length===1?t[0]:t.find(g=>g.type==="event"&&a===dt(ge(g)));if(!(u&&"name"in u)||u.type!=="event")throw new gs(a,{docsPath:Ao});const{name:i,inputs:l}=u,f=l?.some(g=>!("name"in g&&g.name));let d=f?[]:{};const p=l.filter(g=>"indexed"in g&&g.indexed);for(let g=0;g<p.length;g++){const y=p[g],w=c[g];if(!w)throw new Rt({abiItem:u,param:y});d[f?g:y.name||g]=H0({param:y,value:w})}const h=l.filter(g=>!("indexed"in g&&g.indexed));if(h.length>0){if(n&&n!=="0x")try{const g=De(h,n);if(g)if(f)d=[...d,...g];else for(let y=0;y<h.length;y++)d[h[y].name]=g[y]}catch(g){if(o)throw g instanceof hs||g instanceof nu?new lt({abiItem:u,data:n,params:h,size:ne(n)}):g}else if(o)throw new lt({abiItem:u,data:"0x",params:h,size:0})}return{eventName:i,args:Object.values(d).length>0?d:void 0}}function H0({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(De([e],t)||[])[0]}function kn(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(a=>{try{const c=t.find(i=>i.type==="event"&&a.topics[0]===dt(i));if(!c)return null;const u=Nn({...a,abi:[c],strict:s});return o&&!o.includes(u.eventName)||!V0({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...a}}catch(c){let u,i;if(c instanceof gs)return null;if(c instanceof lt||c instanceof Rt){if(s)return null;u=c.abiItem.name,i=c.abiItem.inputs?.some(l=>!("name"in l&&l.name))}return{...a,args:i?[]:{},eventName:u}}}).filter(Boolean)}function V0(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,a,c){try{return o.type==="address"?je(a,c):o.type==="string"||o.type==="bytes"?V(fe(a))===c:a===c}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,a)=>{if(o==null)return!0;const c=n[a];return c?(Array.isArray(o)?o:[o]).some(i=>s(c,i,t[a])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,a])=>{if(a==null)return!0;const c=n.find(i=>i.name===o);return c?(Array.isArray(a)?a:[a]).some(i=>s(c,i,t[o])):!1}):!1}async function js(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:a,args:c,strict:u}={}){const i=u??!1,l=a??(o?[o]:void 0);let f=[];l&&(f=[l.flatMap(g=>vt({abi:[g],eventName:g.name,args:a?void 0:c}))],o&&(f=f[0]));let d;n?d=await e.request({method:"eth_getLogs",params:[{address:t,topics:f,blockHash:n}]}):d=await e.request({method:"eth_getLogs",params:[{address:t,topics:f,fromBlock:typeof r=="bigint"?F(r):r,toBlock:typeof s=="bigint"?F(s):s}]});const p=d.map(h=>Oe(h));return l?kn({abi:l,args:c,logs:p,strict:i}):p}async function Us(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:a,fromBlock:c,toBlock:u,strict:i}=t,l=a?qe({abi:n,name:a}):void 0,f=l?void 0:n.filter(d=>d.type==="event");return R(e,js,"getLogs")({address:r,args:s,blockHash:o,event:l,events:f,fromBlock:c,toBlock:u,strict:i})}class W0 extends O{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Z0(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,a,c,u,i,l,f]=await R(e,Ee,"readContract")({abi:K0,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:a,version:c,chainId:Number(u),verifyingContract:i,salt:l},extensions:f,fields:o}}catch(o){const a=o;throw a.name==="ContractFunctionExecutionError"&&a.cause.name==="ContractFunctionZeroDataError"?new W0({address:n}):a}}const K0=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Y0(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(n=>BigInt(n)))}}async function J0(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=n?F(n):void 0,a=await e.request({method:"eth_feeHistory",params:[F(t),o||r,s]},{dedupe:!!o});return Y0(a)}async function $n(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>Oe(o));return!("abi"in t)||!t.abi?s:kn({abi:t.abi,logs:s,strict:n})}async function X0(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>Oe(o));return t.abi?kn({abi:t.abi,logs:s,strict:n}):s}async function Q0(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?F(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function zs(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){const a=r||"latest",c=n!==void 0?F(n):void 0;let u=null;if(s?u=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?u=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,F(o)]},{dedupe:!0}):(c||a)&&(u=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[c||a,F(o)]},{dedupe:!!c})),!u)throw new is({blockHash:t,blockNumber:n,blockTag:a,hash:s,index:o});return(e.chain?.formatters?.transaction?.format||ua)(u)}async function ep(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([R(e,Ut,"getBlockNumber")({}),t?R(e,zs,"getTransaction")({hash:t}):void 0]),o=n?.blockNumber||s?.blockNumber;return o?r-o+1n:0n}async function zr(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new cs({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||fa)(n)}async function tp(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function np(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[F(t)]})}async function rp(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function sp(e,{blocks:t,interval:n}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:F(t)}]}):await e.request({method:`${e.mode}_mine`,params:[F(t),F(n||0)]})}async function op(e,t){const{allowFailure:n=!0,batchSize:r,blockNumber:s,blockTag:o,multicallAddress:a,stateOverride:c}=t,u=t.contracts,i=r??(typeof e.batch?.multicall=="object"&&e.batch.multicall.batchSize||1024);let l=a;if(!l){if(!e.chain)throw new Error("client chain not configured. multicallAddress is required.");l=Qe({blockNumber:s,chain:e.chain,contract:"multicall3"})}const f=[[]];let d=0,p=0;for(let y=0;y<u.length;y++){const{abi:w,address:v,args:x,functionName:P}=u[y];try{const _=Pe({abi:w,args:x,functionName:P});p+=(_.length-2)/2,i>0&&p>i&&f[d].length>0&&(d++,p=(_.length-2)/2,f[d]=[]),f[d]=[...f[d],{allowFailure:!0,callData:_,target:v}]}catch(_){const m=Ze(_,{abi:w,address:v,args:x,docsPath:"/docs/contract/multicall",functionName:P});if(!n)throw m;f[d]=[...f[d],{allowFailure:!0,callData:"0x",target:v}]}}const h=await Promise.allSettled(f.map(y=>R(e,Ee,"readContract")({abi:fn,address:l,args:[y],blockNumber:s,blockTag:o,functionName:"aggregate3",stateOverride:c}))),g=[];for(let y=0;y<h.length;y++){const w=h[y];if(w.status==="rejected"){if(!n)throw w.reason;for(let x=0;x<f[y].length;x++)g.push({status:"failure",error:w.reason,result:void 0});continue}const v=w.value;for(let x=0;x<v.length;x++){const{returnData:P,success:_}=v[x],{callData:m}=f[y][x],{abi:b,address:E,functionName:I,args:S}=u[g.length];try{if(m==="0x")throw new Ot;if(!_)throw new Sn({data:P});const T=Xe({abi:b,args:S,data:P,functionName:I});g.push(n?{result:T,status:"success"}:T)}catch(T){const k=Ze(T,{abi:b,address:E,args:S,docsPath:"/docs/contract/multicall",functionName:I});if(!n)throw k;g.push({error:k,result:void 0,status:"failure"})}}}if(g.length!==u.length)throw new O("multicall results mismatch");return g}const pr=new Map,To=new Map;let ap=0;function Re(e,t,n){const r=++ap,s=()=>pr.get(e)||[],o=()=>{const l=s();pr.set(e,l.filter(f=>f.id!==r))},a=()=>{const l=To.get(e);s().length===1&&l&&l(),o()},c=s();if(pr.set(e,[...c,{id:r,fns:t}]),c&&c.length>0)return a;const u={};for(const l in t)u[l]=(...f)=>{const d=s();if(d.length!==0)for(const p of d)p.fns[l]?.(...f)};const i=n(u);return typeof i=="function"&&To.set(e,i),a}function zt(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let c;t&&(c=await e({unpoll:o}));const u=await n?.(c)??r;await kr(u);const i=async()=>{s&&(await e({unpoll:o}),await kr(r),i())};i()})(),o}function ip(e,{blockTag:t="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:a,poll:c,pollingInterval:u=e.pollingInterval}){const i=typeof c<"u"?c:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),l=a??!1;let f;return i?(()=>{const h=re(["watchBlocks",e.uid,t,n,r,l,u]);return Re(h,{onBlock:s,onError:o},g=>zt(async()=>{try{const y=await R(e,Te,"getBlock")({blockTag:t,includeTransactions:l});if(y.number&&f?.number){if(y.number===f.number)return;if(y.number-f.number>1&&n)for(let w=f?.number+1n;w<y.number;w++){const v=await R(e,Te,"getBlock")({blockNumber:w,includeTransactions:l});g.onBlock(v,f),f=v}}(!f?.number||t==="pending"&&!y?.number||y.number&&y.number>f.number)&&(g.onBlock(y,f),f=y)}catch(y){g.onError?.(y)}},{emitOnBegin:r,interval:u}))})():(()=>{let h=!0,g=!0,y=()=>h=!1;return(async()=>{try{r&&R(e,Te,"getBlock")({blockTag:t,includeTransactions:l}).then(x=>{h&&g&&(s(x,void 0),g=!1)});const w=(()=>{if(e.transport.type==="fallback"){const x=e.transport.transports.find(P=>P.config.type==="webSocket");return x?x.value:e.transport}return e.transport})(),{unsubscribe:v}=await w.subscribe({params:["newHeads"],onData(x){if(!h)return;const _=(e.chain?.formatters?.block?.format||ns)(x.result);s(_,f),g=!1,f=_},onError(x){o?.(x)}});y=v,h||y()}catch(w){o?.(w)}})(),()=>y()})()}function qi(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:a=e.pollingInterval}){const c=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket");let u;return c?(()=>{const f=re(["watchBlockNumber",e.uid,t,n,a]);return Re(f,{onBlockNumber:r,onError:s},d=>zt(async()=>{try{const p=await R(e,Ut,"getBlockNumber")({cacheTime:0});if(u){if(p===u)return;if(p-u>1&&n)for(let h=u+1n;h<p;h++)d.onBlockNumber(h,u),u=h}(!u||p>u)&&(d.onBlockNumber(p,u),u=p)}catch(p){d.onError?.(p)}},{emitOnBegin:t,interval:a}))})():(()=>{const f=re(["watchBlockNumber",e.uid,t,n]);return Re(f,{onBlockNumber:r,onError:s},d=>{let p=!0,h=()=>p=!1;return(async()=>{try{const g=(()=>{if(e.transport.type==="fallback"){const w=e.transport.transports.find(v=>v.config.type==="webSocket");return w?w.value:e.transport}return e.transport})(),{unsubscribe:y}=await g.subscribe({params:["newHeads"],onData(w){if(!p)return;const v=U(w.result?.number);d.onBlockNumber(v,u),u=v},onError(w){d.onError?.(w)}});h=y,p||h()}catch(g){s?.(g)}})(),()=>h()})})()}async function Mn(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function cp(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:a,onError:c,onLogs:u,poll:i,pollingInterval:l=e.pollingInterval,strict:f}){const d=typeof i<"u"?i:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"),p=f??!1;return d?(()=>{const y=re(["watchEvent",t,n,r,e.uid,s,l,a]);return Re(y,{onLogs:u,onError:c},w=>{let v;a!==void 0&&(v=a-1n);let x,P=!1;const _=zt(async()=>{if(!P){try{x=await R(e,Ci,"createEventFilter")({address:t,args:n,event:s,events:o,strict:p,fromBlock:a})}catch{}P=!0;return}try{let m;if(x)m=await R(e,$n,"getFilterChanges")({filter:x});else{const b=await R(e,Ut,"getBlockNumber")({});v&&v!==b?m=await R(e,js,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:v+1n,toBlock:b}):m=[],v=b}if(m.length===0)return;if(r)w.onLogs(m);else for(const b of m)w.onLogs([b])}catch(m){x&&m instanceof us&&(P=!1),w.onError?.(m)}},{emitOnBegin:!0,interval:l});return async()=>{x&&await R(e,Mn,"uninstallFilter")({filter:x}),_()}})})():(()=>{let y=!0,w=()=>y=!1;return(async()=>{try{const v=(()=>{if(e.transport.type==="fallback"){const m=e.transport.transports.find(b=>b.config.type==="webSocket");return m?m.value:e.transport}return e.transport})(),x=o??(s?[s]:void 0);let P=[];x&&(P=[x.flatMap(b=>vt({abi:[b],eventName:b.name,args:n}))],s&&(P=P[0]));const{unsubscribe:_}=await v.subscribe({params:["logs",{address:t,topics:P}],onData(m){if(!y)return;const b=m.result;try{const{eventName:E,args:I}=Nn({abi:x??[],data:b.data,topics:b.topics,strict:p}),S=Oe(b,{args:I,eventName:E});u([S])}catch(E){let I,S;if(E instanceof lt||E instanceof Rt){if(f)return;I=E.abiItem.name,S=E.abiItem.inputs?.some(k=>!("name"in k&&k.name))}const T=Oe(b,{args:S?[]:{},eventName:I});u([T])}},onError(m){c?.(m)}});w=_,y||w()}catch(v){c?.(v)}})(),()=>w()})()}function up(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket")?(()=>{const i=re(["watchPendingTransactions",e.uid,t,o]);return Re(i,{onTransactions:r,onError:n},l=>{let f;const d=zt(async()=>{try{if(!f)try{f=await R(e,Di,"createPendingTransactionFilter")({});return}catch(h){throw d(),h}const p=await R(e,$n,"getFilterChanges")({filter:f});if(p.length===0)return;if(t)l.onTransactions(p);else for(const h of p)l.onTransactions([h])}catch(p){l.onError?.(p)}},{emitOnBegin:!0,interval:o});return async()=>{f&&await R(e,Mn,"uninstallFilter")({filter:f}),d()}})})():(()=>{let i=!0,l=()=>i=!1;return(async()=>{try{const{unsubscribe:f}=await e.transport.subscribe({params:["newPendingTransactions"],onData(d){if(!i)return;const p=d.result;r([p])},onError(d){n?.(d)}});l=f,i||l()}catch(f){n?.(f)}})(),()=>l()})()}async function fp(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>yn(n))}async function lp(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}class dp extends O{constructor({callbackSelector:t,cause:n,data:r,extraData:s,sender:o,urls:a}){super(n.shortMessage||"An error occurred while fetching for an offchain result.",{cause:n,metaMessages:[...n.metaMessages||[],n.metaMessages?.length?"":[],"Offchain Gateway Call:",a&&["  Gateway URL(s):",...a.map(c=>`    ${la(c)}`)],`  Sender: ${o}`,`  Data: ${r}`,`  Callback selector: ${t}`,`  Extra data: ${s}`].flat(),name:"OffchainLookupError"})}}class pp extends O{constructor({result:t,url:n}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${la(n)}`,`Response: ${re(t)}`],name:"OffchainLookupResponseMalformedError"})}}class hp extends O{constructor({sender:t,to:n}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${n}`,`OffchainLookup sender address: ${t}`],name:"OffchainLookupSenderMismatchError"})}}const ji="0x556f1830",Gs={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function Ui(e,{blockNumber:t,blockTag:n,data:r,to:s}){const{args:o}=Os({data:r,abi:[Gs]}),[a,c,u,i,l]=o,{ccipRead:f}=e,d=f&&typeof f?.request=="function"?f.request:hn;try{if(!je(s,a))throw new hp({sender:a,to:s});const p=await d({data:u,sender:a,urls:c}),{data:h}=await jt(e,{blockNumber:t,blockTag:n,data:le([i,Ie([{type:"bytes"},{type:"bytes"}],[p,l])]),to:s});return h}catch(p){throw new dp({callbackSelector:i,cause:p,data:r,extraData:l,sender:a,urls:c})}}async function hn({data:e,sender:t,urls:n}){let r=new Error("An unknown error occurred.");for(let s=0;s<n.length;s++){const o=n[s],a=o.includes("{data}")?"GET":"POST",c=a==="POST"?{data:e,sender:t}:void 0,u=a==="POST"?{"Content-Type":"application/json"}:{};try{const i=await fetch(o.replace("{sender}",t).replace("{data}",e),{body:JSON.stringify(c),headers:u,method:a});let l;if(i.headers.get("Content-Type")?.startsWith("application/json")?l=(await i.json()).data:l=await i.text(),!i.ok){r=new it({body:c,details:l?.error?re(l.error):i.statusText,headers:i.headers,status:i.status,url:o});continue}if(!C(l)){r=new pp({result:l,url:o});continue}return l}catch(i){r=new it({body:c,details:i.message,url:o})}}throw r}const mp=Object.freeze(Object.defineProperty({__proto__:null,ccipRequest:hn,offchainLookup:Ui,offchainLookupAbiItem:Gs,offchainLookupSignature:ji},Symbol.toStringTag,{value:"Module"}));function yp({chains:e,id:t}){return e.find(n=>n.id===t)}const gp=/^(.*)\[([0-9]*)\]$/,zi=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Gi=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function bp(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Gr=bp();function wp(e,t={}){return{async request(n){const{body:r,onRequest:s=t.onRequest,onResponse:o=t.onResponse,timeout:a=t.timeout??1e4}=n,c={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:u,method:i,signal:l}=c;try{const f=await fs(async({signal:p})=>{const h={...c,body:Array.isArray(r)?re(r.map(v=>({jsonrpc:"2.0",id:v.id??Gr.take(),...v}))):re({jsonrpc:"2.0",id:r.id??Gr.take(),...r}),headers:{"Content-Type":"application/json",...u},method:i||"POST",signal:l||(a>0?p:null)},g=new Request(e,h),y=await s?.(g,h)??{...h,url:e};return await fetch(y.url??e,y)},{errorInstance:new un({body:r,url:e}),timeout:a,signal:!0});o&&await o(f);let d;if(f.headers.get("Content-Type")?.startsWith("application/json"))d=await f.json();else{d=await f.text();try{d=JSON.parse(d||"{}")}catch(p){if(f.ok)throw p;d={error:d}}}if(!f.ok)throw new it({body:r,details:re(d.error)||f.statusText,headers:f.headers,status:f.status,url:e});return d}catch(f){throw f instanceof it||f instanceof un?f:new it({body:r,cause:f,url:e})}}}}const hr=new Map;async function vp(e){const{getSocket:t,keepAlive:n=!0,key:r="socket",reconnect:s=!0,url:o}=e,{interval:a=3e4}=typeof n=="object"?n:{},{attempts:c=5,delay:u=2e3}=typeof s=="object"?s:{};let i=hr.get(`${r}:${o}`);if(i)return i;let l=0;const{schedule:f}=Ds({id:`${r}:${o}`,fn:async()=>{const h=new Map,g=new Map;let y,w,v;async function x(){const P=await t({onClose(){for(const _ of h.values())_.onError?.(new Tt({url:o}));for(const _ of g.values())_.onError?.(new Tt({url:o}));h.clear(),g.clear(),s&&l<c&&setTimeout(async()=>{l++,await x().catch(console.error)},u)},onError(_){y=_;for(const m of h.values())m.onError?.(y);for(const m of g.values())m.onError?.(y);h.clear(),g.clear(),s&&l<c&&setTimeout(async()=>{l++,await x().catch(console.error)},u)},onOpen(){y=void 0,l=0},onResponse(_){const m=_.method==="eth_subscription",b=m?_.params.subscription:_.id,E=m?g:h,I=E.get(b);I&&I.onResponse(_),m||E.delete(b)}});return w=P,n&&(v&&clearInterval(v),v=setInterval(()=>w.ping?.(),a)),P}return await x(),y=void 0,i={close(){v&&clearInterval(v),w.close(),hr.delete(`${r}:${o}`)},get socket(){return w},request({body:P,onError:_,onResponse:m}){y&&_&&_(y);const b=P.id??Gr.take(),E=I=>{typeof I.id=="number"&&b!==I.id||(P.method==="eth_subscribe"&&typeof I.result=="string"&&g.set(I.result,{onResponse:E,onError:_}),P.method==="eth_unsubscribe"&&g.delete(P.params?.[0]),m(I))};h.set(b,{onResponse:E,onError:_});try{w.request({body:{jsonrpc:"2.0",id:b,...P}})}catch(I){_?.(I)}},requestAsync({body:P,timeout:_=1e4}){return fs(()=>new Promise((m,b)=>this.request({body:P,onError:b,onResponse:m})),{errorInstance:new un({body:P,url:o}),timeout:_})},requests:h,subscriptions:g,url:o},hr.set(`${r}:${o}`,i),[i]}}),[d,[p]]=await f();return p}async function rn(e,t={}){const{keepAlive:n,reconnect:r}=t;return vp({async getSocket({onClose:s,onError:o,onOpen:a,onResponse:c}){const u=await es(()=>import("./native-CJ5et6AR.js"),[]).then(p=>p.WebSocket),i=new u(e);function l(){s(),i.removeEventListener("close",l),i.removeEventListener("message",f),i.removeEventListener("error",o),i.removeEventListener("open",a)}function f({data:p}){c(JSON.parse(p))}i.addEventListener("close",l),i.addEventListener("message",f),i.addEventListener("error",o),i.addEventListener("open",a),i.readyState===u.CONNECTING&&await new Promise((p,h)=>{i&&(i.onopen=p,i.onerror=h)});const{close:d}=i;return Object.assign(i,{close(){d.bind(i)(),s()},ping(){try{if(i.readyState===i.CLOSED||i.readyState===i.CLOSING)throw new $r({url:i.url,cause:new Tt({url:i.url})});const p={jsonrpc:"2.0",method:"net_version",params:[]};i.send(JSON.stringify(p))}catch(p){o(p)}},request({body:p}){if(i.readyState===i.CLOSED||i.readyState===i.CLOSING)throw new $r({body:p,url:i.url,cause:new Tt({url:i.url})});return i.send(JSON.stringify(p))}})},keepAlive:n,reconnect:r,url:e})}async function xp(e){const t=await rn(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}class Hi extends O{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Hs(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:Fn({domain:t}),...e.types};Ws({domain:t,message:n,primaryType:r,types:s});const o=["0x1901"];return t&&o.push(Vs({domain:t,types:s})),r!=="EIP712Domain"&&o.push(Vi({data:n,primaryType:r,types:s})),V(le(o))}function Vs({domain:e,types:t}){return Vi({data:e,primaryType:"EIP712Domain",types:t})}function Vi({data:e,primaryType:t,types:n}){const r=Wi({data:e,primaryType:t,types:n});return V(r)}function Wi({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[Ep({primaryType:t,types:n})];for(const o of n[t]){const[a,c]=Ki({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(a),s.push(c)}return Ie(r,s)}function Ep({primaryType:e,types:t}){const n=ye(Ip({primaryType:e,types:t}));return V(n)}function Ip({primaryType:e,types:t}){let n="";const r=Zi({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const o of s)n+=`${o}(${t[o].map(({name:a,type:c})=>`${c} ${a}`).join(",")})`;return n}function Zi({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u)?.[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const o of t[s])Zi({primaryType:o.type,types:t},n);return n}function Ki({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},V(Wi({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},V(r)];if(n==="string")return[{type:"bytes32"},V(ye(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),o=r.map(a=>Ki({name:t,type:s,types:e,value:a}));return[{type:"bytes32"},V(Ie(o.map(([a])=>a),o.map(([,a])=>a)))]}return[{type:n},r]}function Yi(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(u,i)=>{const l={...i};for(const f of u){const{name:d,type:p}=f;p==="address"&&(l[d]=l[d].toLowerCase())}return l},a=s.EIP712Domain?t?o(s.EIP712Domain,t):{}:{},c=(()=>{if(r!=="EIP712Domain")return o(s[r],n)})();return re({domain:a,message:c,primaryType:r,types:s})}function Ws(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(a,c)=>{for(const u of a){const{name:i,type:l}=u,f=c[i],d=l.match(Gi);if(d&&(typeof f=="number"||typeof f=="bigint")){const[g,y,w]=d;F(f,{signed:y==="int",size:Number.parseInt(w)/8})}if(l==="address"&&typeof f=="string"&&!ie(f))throw new ve({address:f});const p=l.match(zi);if(p){const[g,y]=p;if(y&&ne(f)!==Number.parseInt(y))throw new ws({expectedSize:Number.parseInt(y),givenSize:ne(f)})}const h=s[l];h&&(_p(l),o(h,f))}};s.EIP712Domain&&t&&o(s.EIP712Domain,t),r!=="EIP712Domain"&&o(s[r],n)}function Fn({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},typeof e?.chainId=="number"&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Pp({domain:e}){return Vs({domain:e,types:{EIP712Domain:Fn({domain:e})}})}function _p(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Hi({type:e})}function Sp(e){const{abi:t,data:n}=e,r=Fe(n,0,4),s=t.find(o=>o.type==="function"&&r===We(ge(o)));if(!s)throw new Na(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?De(s.inputs,Fe(n,4)):void 0}}const mr="/docs/contract/encodeErrorResult";function Bp(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const u=qe({abi:t,args:r,name:n});if(!u)throw new Fr(n,{docsPath:mr});s=u}if(s.type!=="error")throw new Fr(void 0,{docsPath:mr});const o=ge(s),a=We(o);let c="0x";if(r&&r.length>0){if(!s.inputs)throw new Aa(s.name,{docsPath:mr});c=Ie(s.inputs,r)}return Ce([a,c])}const yr="/docs/contract/encodeFunctionResult";function Ap(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const a=qe({abi:t,name:n});if(!a)throw new Ve(n,{docsPath:yr});s=a}if(s.type!=="function")throw new Ve(void 0,{docsPath:yr});if(!s.outputs)throw new bs(s.name,{docsPath:yr});let o=Array.isArray(r)?r:[r];return s.outputs.length===0&&!o[0]&&(o=[]),Ie(s.outputs,o)}function Tp(e,t){if(e.length!==t.length)throw new ms({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(Ji(s,o))}return Ce(n)}function Ji(e,t,n=!1){if(e==="address"){const a=t;if(!ie(a))throw new ve({address:a});return St(a.toLowerCase(),{size:n?32:null})}if(e==="string")return ft(t);if(e==="bytes")return t;if(e==="bool")return St(Qr(t),{size:n?32:1});const r=e.match(Gi);if(r){const[a,c,u="256"]=r,i=Number.parseInt(u)/8;return F(t,{size:n?32:i,signed:c==="int"})}const s=e.match(zi);if(s){const[a,c]=s;if(Number.parseInt(c)!==(t.length-2)/2)throw new ws({expectedSize:Number.parseInt(c),givenSize:(t.length-2)/2});return St(t,{dir:"right",size:n?32:null})}const o=e.match(gp);if(o&&Array.isArray(t)){const[a,c]=o,u=[];for(let i=0;i<t.length;i++)u.push(Ji(c,t[i],!0));return u.length===0?"0x":Ce(u)}throw new Oa(e)}function Hr(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function Np(e){return e.opcode==="CREATE2"?Qi(e):Xi(e)}function Xi(e){const t=fe(xe(e.from));let n=fe(e.nonce);return n[0]===0&&(n=new Uint8Array([])),xe(`0x${V(ts([t,n],"bytes")).slice(26)}`)}function Qi(e){const t=fe(xe(e.from)),n=St(Hr(e.salt)?e.salt:fe(e.salt),{size:32}),r="bytecodeHash"in e?Hr(e.bytecodeHash)?e.bytecodeHash:fe(e.bytecodeHash):V(e.bytecode,"bytes");return xe(Fe(V(le([fe("0xff"),t,n,r])),12))}function Zs(e,t="hex"){const n=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new da(e);return ke(e)}return e})(),r=an(n,{recursiveReadLimit:Number.POSITIVE_INFINITY});return ec(r,t)}function ec(e,t="hex"){if(e.bytes.length===0)return t==="hex"?Y(e.bytes):e.bytes;const n=e.readByte();if(n<128&&e.decrementPosition(1),n<192){const s=No(e,n,128),o=e.readBytes(s);return t==="hex"?Y(o):o}const r=No(e,n,192);return kp(e,r,t)}function No(e,t,n){if(n===128&&t<128)return 1;if(t<=n+55)return t-n;if(t===n+55+1)return e.readUint8();if(t===n+55+2)return e.readUint16();if(t===n+55+3)return e.readUint24();if(t===n+55+4)return e.readUint32();throw new O("Invalid RLP prefix")}function kp(e,t,n){const r=e.position,s=[];for(;e.position-r<t;)s.push(ec(e,n));return s}function tc(e){return C(e)&&ne(e)===32}const $p=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),nc=new Uint8Array(new Array(16).fill(0).map((e,t)=>t)),Mp=nc.map(e=>(9*e+5)%16);let Ks=[nc],Ys=[Mp];for(let e=0;e<4;e++)for(let t of[Ks,Ys])t.push(t[e].map(n=>$p[n]));const rc=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),Fp=Ks.map((e,t)=>e.map(n=>rc[t][n])),Op=Ys.map((e,t)=>e.map(n=>rc[t][n])),Rp=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Cp=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function ko(e,t,n,r){return e===0?t^n^r:e===1?t&n|~t&r:e===2?(t|~n)^r:e===3?t&r|n&~r:t^(n|~r)}const Yt=new Uint32Array(16);class Dp extends su{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:r,h3:s,h4:o}=this;return[t,n,r,s,o]}set(t,n,r,s,o){this.h0=t|0,this.h1=n|0,this.h2=r|0,this.h3=s|0,this.h4=o|0}process(t,n){for(let p=0;p<16;p++,n+=4)Yt[p]=t.getUint32(n,!0);let r=this.h0|0,s=r,o=this.h1|0,a=o,c=this.h2|0,u=c,i=this.h3|0,l=i,f=this.h4|0,d=f;for(let p=0;p<5;p++){const h=4-p,g=Rp[p],y=Cp[p],w=Ks[p],v=Ys[p],x=Fp[p],P=Op[p];for(let _=0;_<16;_++){const m=Kt(r+ko(p,o,c,i)+Yt[w[_]]+g,x[_])+f|0;r=f,f=i,i=Kt(c,10)|0,c=o,o=m}for(let _=0;_<16;_++){const m=Kt(s+ko(h,a,u,l)+Yt[v[_]]+y,P[_])+d|0;s=d,d=l,l=Kt(u,10)|0,u=a,a=m}}this.set(this.h1+c+l|0,this.h2+i+d|0,this.h3+f+s|0,this.h4+r+a|0,this.h0+o+u|0)}roundClean(){Yt.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Lp=ru(()=>new Dp);function qp(e,t){const n=t||"hex",r=Lp(C(e,{strict:!1})?fe(e):e);return n==="bytes"?r:ye(r)}const sc=`Ethereum Signed Message:
`;function oc(e){const t=typeof e=="string"?ft(e):typeof e.raw=="string"?e.raw:Y(e.raw),n=ft(`${sc}${ne(t)}`);return le([n,t])}function On(e,t){return V(oc(e),t)}async function ac({message:e,signature:t}){return Ye({hash:On(e),signature:t})}async function ic(e){const{domain:t,message:n,primaryType:r,signature:s,types:o}=e;return Ye({hash:Hs({domain:t,message:n,primaryType:r,types:o}),signature:s})}async function jp({address:e,hash:t,signature:n}){return je(xe(e),await Ye({hash:t,signature:n}))}async function Up({address:e,message:t,signature:n}){return je(xe(e),await ac({message:t,signature:n}))}async function zp(e){const{address:t,domain:n,message:r,primaryType:s,signature:o,types:a}=e;return je(xe(t),await ic({domain:n,message:r,primaryType:s,signature:o,types:a}))}const cc="0x6492649264926492649264926492649264926492649264926492649264926492",Gp="0x0000000000000000000000000000000000000000000000000000000000000000";function Js(e){return ls(e,-32)===cc}function Hp(e){if(!Js(e))return{signature:e};const[t,n,r]=De([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:n,signature:r}}function uc(e){const{address:t,data:n,signature:r,to:s="hex"}=e,o=Ce([Ie([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),cc]);return s==="hex"?o:ke(o)}function fc(e){const t=ls(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&W(t)>=192)return"legacy";throw new pa({serializedType:t})}function lc(e){const t=fc(e);return t==="eip1559"?Zp(e):t==="eip2930"?Kp(e):t==="eip4844"?Wp(e):t==="eip7702"?Vp(e):Yp(e)}function Vp(e){const t=Rn(e),[n,r,s,o,a,c,u,i,l,f,d,p,h]=t;if(t.length!==10&&t.length!==13)throw new bt({attributes:{chainId:n,nonce:r,maxPriorityFeePerGas:s,maxFeePerGas:o,gas:a,to:c,value:u,data:i,accessList:l,authorizationList:f,...t.length>9?{v:d,r:p,s:h}:{}},serializedTransaction:e,type:"eip7702"});const g={chainId:W(n),type:"eip7702"};return C(c)&&c!=="0x"&&(g.to=c),C(a)&&a!=="0x"&&(g.gas=U(a)),C(i)&&i!=="0x"&&(g.data=i),C(r)&&r!=="0x"&&(g.nonce=W(r)),C(u)&&u!=="0x"&&(g.value=U(u)),C(o)&&o!=="0x"&&(g.maxFeePerGas=U(o)),C(s)&&s!=="0x"&&(g.maxPriorityFeePerGas=U(s)),l.length!==0&&l!=="0x"&&(g.accessList=Cn(l)),f.length!==0&&f!=="0x"&&(g.authorizationList=Jp(f)),ou(g),{...t.length===13?Gt(t):void 0,...g}}function Wp(e){const t=Rn(e),n=t.length===4,r=n?t[0]:t,s=n?t.slice(1):[],[o,a,c,u,i,l,f,d,p,h,g,y,w,v]=r,[x,P,_]=s;if(!(r.length===11||r.length===14))throw new bt({attributes:{chainId:o,nonce:a,maxPriorityFeePerGas:c,maxFeePerGas:u,gas:i,to:l,value:f,data:d,accessList:p,...r.length>9?{v:y,r:w,s:v}:{}},serializedTransaction:e,type:"eip4844"});const m={blobVersionedHashes:g,chainId:W(o),type:"eip4844"};return C(l)&&l!=="0x"&&(m.to=l),C(i)&&i!=="0x"&&(m.gas=U(i)),C(d)&&d!=="0x"&&(m.data=d),C(a)&&a!=="0x"&&(m.nonce=W(a)),C(f)&&f!=="0x"&&(m.value=U(f)),C(h)&&h!=="0x"&&(m.maxFeePerBlobGas=U(h)),C(u)&&u!=="0x"&&(m.maxFeePerGas=U(u)),C(c)&&c!=="0x"&&(m.maxPriorityFeePerGas=U(c)),p.length!==0&&p!=="0x"&&(m.accessList=Cn(p)),x&&P&&_&&(m.sidecars=os({blobs:x,commitments:P,proofs:_})),au(m),{...r.length===14?Gt(r):void 0,...m}}function Zp(e){const t=Rn(e),[n,r,s,o,a,c,u,i,l,f,d,p]=t;if(!(t.length===9||t.length===12))throw new bt({attributes:{chainId:n,nonce:r,maxPriorityFeePerGas:s,maxFeePerGas:o,gas:a,to:c,value:u,data:i,accessList:l,...t.length>9?{v:f,r:d,s:p}:{}},serializedTransaction:e,type:"eip1559"});const h={chainId:W(n),type:"eip1559"};return C(c)&&c!=="0x"&&(h.to=c),C(a)&&a!=="0x"&&(h.gas=U(a)),C(i)&&i!=="0x"&&(h.data=i),C(r)&&r!=="0x"&&(h.nonce=W(r)),C(u)&&u!=="0x"&&(h.value=U(u)),C(o)&&o!=="0x"&&(h.maxFeePerGas=U(o)),C(s)&&s!=="0x"&&(h.maxPriorityFeePerGas=U(s)),l.length!==0&&l!=="0x"&&(h.accessList=Cn(l)),ha(h),{...t.length===12?Gt(t):void 0,...h}}function Kp(e){const t=Rn(e),[n,r,s,o,a,c,u,i,l,f,d]=t;if(!(t.length===8||t.length===11))throw new bt({attributes:{chainId:n,nonce:r,gasPrice:s,gas:o,to:a,value:c,data:u,accessList:i,...t.length>8?{v:l,r:f,s:d}:{}},serializedTransaction:e,type:"eip2930"});const p={chainId:W(n),type:"eip2930"};return C(a)&&a!=="0x"&&(p.to=a),C(o)&&o!=="0x"&&(p.gas=U(o)),C(u)&&u!=="0x"&&(p.data=u),C(r)&&r!=="0x"&&(p.nonce=W(r)),C(c)&&c!=="0x"&&(p.value=U(c)),C(s)&&s!=="0x"&&(p.gasPrice=U(s)),i.length!==0&&i!=="0x"&&(p.accessList=Cn(i)),ma(p),{...t.length===11?Gt(t):void 0,...p}}function Yp(e){const t=Zs(e,"hex"),[n,r,s,o,a,c,u,i,l]=t;if(!(t.length===6||t.length===9))throw new bt({attributes:{nonce:n,gasPrice:r,gas:s,to:o,value:a,data:c,...t.length>6?{v:u,r:i,s:l}:{}},serializedTransaction:e,type:"legacy"});const f={type:"legacy"};if(C(o)&&o!=="0x"&&(f.to=o),C(s)&&s!=="0x"&&(f.gas=U(s)),C(c)&&c!=="0x"&&(f.data=c),C(n)&&n!=="0x"&&(f.nonce=W(n)),C(a)&&a!=="0x"&&(f.value=U(a)),C(r)&&r!=="0x"&&(f.gasPrice=U(r)),ya(f),t.length===6)return f;const d=C(u)&&u!=="0x"?U(u):0n;if(l==="0x"&&i==="0x")return d>0&&(f.chainId=Number(d)),f;const p=d,h=Number((p-35n)/2n);if(h>0)f.chainId=h;else if(p!==27n&&p!==28n)throw new ga({v:p});return f.v=p,f.s=l,f.r=i,f.yParity=p%2n===0n?1:0,f}function Rn(e){return Zs(`0x${e.slice(4)}`,"hex")}function Cn(e){const t=[];for(let n=0;n<e.length;n++){const[r,s]=e[n];if(!ie(r,{strict:!1}))throw new ve({address:r});t.push({address:r,storageKeys:s.map(o=>tc(o)?o:gt(o))})}return t}function Jp(e){const t=[];for(let n=0;n<e.length;n++){const[r,s,o,a,c,u]=e[n];t.push({chainId:W(r),contractAddress:s,nonce:W(o),...Gt([a,c,u])})}return t}function Gt(e){const t=e.slice(-3),n=t[0]==="0x"||U(t[0])===0n?27n:28n;return{r:we(t[1],{size:32}),s:we(t[2],{size:32}),v:n,yParity:n===27n?0:1}}function Xp(e,t="wei"){return Nt(e,ba[t])}function Qp(e,t="wei"){return Nt(e,wa[t])}function dc(e){const{source:t}=e,n=new Map,r=new oa(8192),s=new Map,o=({address:a,chainId:c})=>`${a}.${c}`;return{async consume({address:a,chainId:c,client:u}){const i=o({address:a,chainId:c}),l=this.get({address:a,chainId:c,client:u});this.increment({address:a,chainId:c});const f=await l;return await t.set({address:a,chainId:c},f),r.set(i,f),f},async increment({address:a,chainId:c}){const u=o({address:a,chainId:c}),i=n.get(u)??0;n.set(u,i+1)},async get({address:a,chainId:c,client:u}){const i=o({address:a,chainId:c});let l=s.get(i);return l||(l=(async()=>{try{const d=await t.get({address:a,chainId:c,client:u}),p=r.get(i)??0;return p>0&&d<=p?p+1:(r.delete(i),d)}finally{this.reset({address:a,chainId:c})}})(),s.set(i,l)),(n.get(i)??0)+await l},reset({address:a,chainId:c}){const u=o({address:a,chainId:c});n.delete(u),s.delete(u)}}}function eh(){return{async get(e){const{address:t,client:n}=e;return As(n,{address:t,blockTag:"pending"})},set(){}}}const th=dc({source:eh()});function nh(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function rh(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?W(e.nonce):void 0,storageProof:e.storageProof?nh(e.storageProof):void 0}}async function sh(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",a=n!==void 0?F(n):void 0,c=await e.request({method:"eth_getProof",params:[t,s,a||o]});return rh(c)}async function oh(e,{confirmations:t=1,hash:n,onReplaced:r,pollingInterval:s=e.pollingInterval,retryCount:o=6,retryDelay:a=({count:u})=>~~(1<<u)*200,timeout:c=18e4}){const u=re(["waitForTransactionReceipt",e.uid,n]);let i,l,f,d=!1;const{promise:p,resolve:h,reject:g}=ki(),y=c?setTimeout(()=>g(new va({hash:n})),c):void 0,w=Re(u,{onReplaced:r,resolve:h,reject:g},v=>{const x=R(e,qi,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(P){const _=b=>{clearTimeout(y),x(),b(),w()};let m=P;if(!d)try{if(f){if(t>1&&(!f.blockNumber||m-f.blockNumber+1n<t))return;_(()=>v.resolve(f));return}if(i||(d=!0,await Mr(async()=>{i=await R(e,zs,"getTransaction")({hash:n}),i.blockNumber&&(m=i.blockNumber)},{delay:a,retryCount:o}),d=!1),f=await R(e,zr,"getTransactionReceipt")({hash:n}),t>1&&(!f.blockNumber||m-f.blockNumber+1n<t))return;_(()=>v.resolve(f))}catch(b){if(b instanceof is||b instanceof cs){if(!i){d=!1;return}try{l=i,d=!0;const E=await Mr(()=>R(e,Te,"getBlock")({blockNumber:m,includeTransactions:!0}),{delay:a,retryCount:o,shouldRetry:({error:T})=>T instanceof _s});d=!1;const I=E.transactions.find(({from:T,nonce:k})=>T===l.from&&k===l.nonce);if(!I||(f=await R(e,zr,"getTransactionReceipt")({hash:I.hash}),t>1&&(!f.blockNumber||m-f.blockNumber+1n<t)))return;let S="replaced";I.to===l.to&&I.value===l.value?S="repriced":I.from===I.to&&I.value===0n&&(S="cancelled"),_(()=>{v.onReplaced?.({reason:S,replacedTransaction:l,transaction:I,transactionReceipt:f}),v.resolve(f)})}catch(E){_(()=>v.reject(E))}}else _(()=>v.reject(b))}}})});return p}async function ah(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>xe(n))}async function ih(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function ch(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function uh(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function fh(e){return await e.request({method:"txpool_content"})}async function lh(e){const{pending:t,queued:n}=await e.request({method:"txpool_status"});return{pending:W(t),queued:W(n)}}async function dh(e){return await e.request({method:"txpool_inspect"})}async function ph(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function hh(e,{blockNumber:t,jsonRpcUrl:n}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:n}}]})}async function mh(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function yh(e,t){const{account:n=e.account,chain:r=e.chain,...s}=t;if(!n)throw new Dt({docsPath:"/docs/actions/wallet/signTransaction"});const o=de(n);wt({account:o,...t});const a=await R(e,Lt,"getChainId")({});r!==null&&Is({currentChainId:a,chain:r});const u=(r?.formatters||e.chain?.formatters)?.transactionRequest?.format||Je;return o.signTransaction?o.signTransaction({...s,chainId:a},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...u(s),chainId:F(a),from:o.address}]},{retryCount:0})}async function gh(e,t){const{accessList:n,data:r,from:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:i,to:l,value:f,...d}=t,p=e.chain?.formatters?.transactionRequest?.format,g=(p||Je)({...En(d,{format:p}),accessList:n,data:r,from:s,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:i,to:l,value:f});return await e.request({method:"eth_sendUnsignedTransaction",params:[g]})}async function bh(e,{address:t,value:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,F(n)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,F(n)]})}async function wh(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function vh(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[F(t)]})}async function xh(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[n]})}async function Eh(e,{address:t,bytecode:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,n]}):await e.request({method:`${e.mode}_setCode`,params:[t,n]})}async function Ih(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function Ph(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[n]})}async function _h(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function Sh(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[F(t)]})}async function Bh(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[F(t)]})}async function Ah(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[F(t)]})}async function Th(e,{address:t,nonce:n}){await e.request({method:`${e.mode}_setNonce`,params:[t,F(n)]})}async function Nh(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function kh(e,{address:t,index:n,value:r}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof n=="number"?F(n):n,r]})}async function $h(e){return await e.request({method:"evm_snapshot"})}async function Mh(e,{account:t=e.account,message:n}){if(!t)throw new Dt({docsPath:"/docs/actions/wallet/signMessage"});const r=de(t);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?ft(n):n.raw instanceof Uint8Array?ye(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Fh(e,t){const{account:n=e.account,domain:r,message:s,primaryType:o}=t;if(!n)throw new Dt({docsPath:"/docs/actions/wallet/signTypedData"});const a=de(n),c={EIP712Domain:Fn({domain:r}),...t.types};if(Ws({domain:r,message:s,primaryType:o,types:c}),a.signTypedData)return a.signTypedData({domain:r,message:s,primaryType:o,types:c});const u=Yi({domain:r,message:s,primaryType:o,types:c});return e.request({method:"eth_signTypedData_v4",params:[a.address,u]},{retryCount:0})}async function pc(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:a,...c}=t,u=c.account?de(c.account):e.account,i=Pe({abi:n,args:s,functionName:a});try{const{data:l}=await R(e,jt,"call")({batch:!1,data:`${i}${o?o.replace("0x",""):""}`,to:r,...c,account:u}),f=Xe({abi:n,args:s,functionName:a,data:l||"0x"}),d=n.filter(p=>"name"in p&&p.name===t.functionName);return{result:f,request:{abi:d,address:r,args:s,dataSuffix:o,functionName:a,...c,account:u}}}catch(l){throw Ze(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:a,sender:u?.address})}}async function Oh(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}async function Rh(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:F(t)}]},{retryCount:0})}class hc extends iu{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,cu(t);const r=uu(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),o.fill(0)}update(t){return ho(this),this.iHash.update(t),this}digestInto(t){ho(this),fu(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:a,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=a,t.outputLen=c,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const mc=(e,t,n)=>new hc(e,t).update(n).digest();mc.create=(e,t)=>new hc(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xs=BigInt(0),Dn=BigInt(1),Ch=BigInt(2);function Ke(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Ht(e){if(!Ke(e))throw new Error("Uint8Array expected")}function pt(e,t){if(typeof t!="boolean")throw new Error(`${e} must be valid boolean, got "${t}".`)}const Dh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function ht(e){Ht(e);let t="";for(let n=0;n<e.length;n++)t+=Dh[e[n]];return t}function ot(e){const t=e.toString(16);return t.length&1?`0${t}`:t}function Qs(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}const Se={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function $o(e){if(e>=Se._0&&e<=Se._9)return e-Se._0;if(e>=Se._A&&e<=Se._F)return e-(Se._A-10);if(e>=Se._a&&e<=Se._f)return e-(Se._a-10)}function mt(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const a=$o(e.charCodeAt(o)),c=$o(e.charCodeAt(o+1));if(a===void 0||c===void 0){const u=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+o)}r[s]=a*16+c}return r}function Ge(e){return Qs(ht(e))}function eo(e){return Ht(e),Qs(ht(Uint8Array.from(e).reverse()))}function yt(e,t){return mt(e.toString(16).padStart(t*2,"0"))}function to(e,t){return yt(e,t).reverse()}function Lh(e){return mt(ot(e))}function pe(e,t,n){let r;if(typeof t=="string")try{r=mt(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else if(Ke(t))r=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return r}function Mt(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Ht(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}function qh(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function jh(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}const gr=e=>typeof e=="bigint"&&Xs<=e;function Ln(e,t,n){return gr(e)&&gr(t)&&gr(n)&&t<=e&&e<n}function He(e,t,n,r){if(!Ln(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)}function yc(e){let t;for(t=0;e>Xs;e>>=Dn,t+=1);return t}function Uh(e,t){return e>>BigInt(t)&Dn}function zh(e,t,n){return e|(n?Dn:Xs)<<BigInt(t)}const no=e=>(Ch<<BigInt(e-1))-Dn,br=e=>new Uint8Array(e),Mo=e=>Uint8Array.from(e);function gc(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=br(e),s=br(e),o=0;const a=()=>{r.fill(1),s.fill(0),o=0},c=(...f)=>n(s,r,...f),u=(f=br())=>{s=c(Mo([0]),f),r=c(),f.length!==0&&(s=c(Mo([1]),f),r=c())},i=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const d=[];for(;f<t;){r=c();const p=r.slice();d.push(p),f+=r.length}return Mt(...d)};return(f,d)=>{a(),u(f);let p;for(;!(p=d(i()));)u();return a(),p}}const Gh={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||Ke(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Vt(e,t,n={}){const r=(s,o,a)=>{const c=Gh[o];if(typeof c!="function")throw new Error(`Invalid validator "${o}", expected function`);const u=e[s];if(!(a&&u===void 0)&&!c(u,e))throw new Error(`Invalid param ${String(s)}=${u} (${typeof u}), expected ${o}`)};for(const[s,o]of Object.entries(t))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return e}const Hh=()=>{throw new Error("not implemented")};function Vr(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}const Vh=Object.freeze(Object.defineProperty({__proto__:null,aInRange:He,abool:pt,abytes:Ht,bitGet:Uh,bitLen:yc,bitMask:no,bitSet:zh,bytesToHex:ht,bytesToNumberBE:Ge,bytesToNumberLE:eo,concatBytes:Mt,createHmacDrbg:gc,ensureBytes:pe,equalBytes:qh,hexToBytes:mt,hexToNumber:Qs,inRange:Ln,isBytes:Ke,memoized:Vr,notImplemented:Hh,numberToBytesBE:yt,numberToBytesLE:to,numberToHexUnpadded:ot,numberToVarBytesBE:Lh,utf8ToBytes:jh,validateObject:Vt},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Q=BigInt(0),H=BigInt(1),ze=BigInt(2),Wh=BigInt(3),Wr=BigInt(4),Fo=BigInt(5),Oo=BigInt(8);BigInt(9);BigInt(16);function oe(e,t){const n=e%t;return n>=Q?n:t+n}function Zh(e,t,n){if(n<=Q||t<Q)throw new Error("Expected power/modulo > 0");if(n===H)return Q;let r=H;for(;t>Q;)t&H&&(r=r*e%n),e=e*e%n,t>>=H;return r}function ue(e,t,n){let r=e;for(;t-- >Q;)r*=r,r%=n;return r}function Zr(e,t){if(e===Q||t<=Q)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=oe(e,t),r=t,s=Q,o=H;for(;n!==Q;){const c=r/n,u=r%n,i=s-o*c;r=n,n=u,s=o,o=i}if(r!==H)throw new Error("invert: does not exist");return oe(s,t)}function Kh(e){const t=(e-H)/ze;let n,r,s;for(n=e-H,r=0;n%ze===Q;n/=ze,r++);for(s=ze;s<e&&Zh(s,t,e)!==e-H;s++);if(r===1){const a=(e+H)/Wr;return function(u,i){const l=u.pow(i,a);if(!u.eql(u.sqr(l),i))throw new Error("Cannot find square root");return l}}const o=(n+H)/ze;return function(c,u){if(c.pow(u,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let i=r,l=c.pow(c.mul(c.ONE,s),n),f=c.pow(u,o),d=c.pow(u,n);for(;!c.eql(d,c.ONE);){if(c.eql(d,c.ZERO))return c.ZERO;let p=1;for(let g=c.sqr(d);p<i&&!c.eql(g,c.ONE);p++)g=c.sqr(g);const h=c.pow(l,H<<BigInt(i-p-1));l=c.sqr(h),f=c.mul(f,h),d=c.mul(d,l),i=p}return f}}function Yh(e){if(e%Wr===Wh){const t=(e+H)/Wr;return function(r,s){const o=r.pow(s,t);if(!r.eql(r.sqr(o),s))throw new Error("Cannot find square root");return o}}if(e%Oo===Fo){const t=(e-Fo)/Oo;return function(r,s){const o=r.mul(s,ze),a=r.pow(o,t),c=r.mul(s,a),u=r.mul(r.mul(c,ze),a),i=r.mul(c,r.sub(u,r.ONE));if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}return Kh(e)}const Jh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Xh(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Jh.reduce((r,s)=>(r[s]="function",r),t);return Vt(e,n)}function Qh(e,t,n){if(n<Q)throw new Error("Expected power > 0");if(n===Q)return e.ONE;if(n===H)return t;let r=e.ONE,s=t;for(;n>Q;)n&H&&(r=e.mul(r,s)),s=e.sqr(s),n>>=H;return r}function em(e,t){const n=new Array(t.length),r=t.reduce((o,a,c)=>e.is0(a)?o:(n[c]=o,e.mul(o,a)),e.ONE),s=e.inv(r);return t.reduceRight((o,a,c)=>e.is0(a)?o:(n[c]=e.mul(o,n[c]),e.mul(o,a)),s),n}function bc(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function wc(e,t,n=!1,r={}){if(e<=Q)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:s,nByteLength:o}=bc(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Yh(e),c=Object.freeze({ORDER:e,BITS:s,BYTES:o,MASK:no(s),ZERO:Q,ONE:H,create:u=>oe(u,e),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return Q<=u&&u<e},is0:u=>u===Q,isOdd:u=>(u&H)===H,neg:u=>oe(-u,e),eql:(u,i)=>u===i,sqr:u=>oe(u*u,e),add:(u,i)=>oe(u+i,e),sub:(u,i)=>oe(u-i,e),mul:(u,i)=>oe(u*i,e),pow:(u,i)=>Qh(c,u,i),div:(u,i)=>oe(u*Zr(i,e),e),sqrN:u=>u*u,addN:(u,i)=>u+i,subN:(u,i)=>u-i,mulN:(u,i)=>u*i,inv:u=>Zr(u,e),sqrt:r.sqrt||(u=>a(c,u)),invertBatch:u=>em(c,u),cmov:(u,i,l)=>l?i:u,toBytes:u=>n?to(u,o):yt(u,o),fromBytes:u=>{if(u.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${u.length}`);return n?eo(u):Ge(u)}});return Object.freeze(c)}function vc(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function xc(e){const t=vc(e);return t+Math.ceil(t/2)}function tm(e,t,n=!1){const r=e.length,s=vc(t),o=xc(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);const a=n?Ge(e):eo(e),c=oe(a,t-H)+H;return n?to(c,s):yt(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nm=BigInt(0),wr=BigInt(1),vr=new WeakMap,Ro=new WeakMap;function rm(e,t){const n=(o,a)=>{const c=a.negate();return o?c:a},r=o=>{if(!Number.isSafeInteger(o)||o<=0||o>t)throw new Error(`Wrong window size=${o}, should be [1..${t}]`)},s=o=>{r(o);const a=Math.ceil(t/o)+1,c=2**(o-1);return{windows:a,windowSize:c}};return{constTimeNegate:n,unsafeLadder(o,a){let c=e.ZERO,u=o;for(;a>nm;)a&wr&&(c=c.add(u)),u=u.double(),a>>=wr;return c},precomputeWindow(o,a){const{windows:c,windowSize:u}=s(a),i=[];let l=o,f=l;for(let d=0;d<c;d++){f=l,i.push(f);for(let p=1;p<u;p++)f=f.add(l),i.push(f);l=f.double()}return i},wNAF(o,a,c){const{windows:u,windowSize:i}=s(o);let l=e.ZERO,f=e.BASE;const d=BigInt(2**o-1),p=2**o,h=BigInt(o);for(let g=0;g<u;g++){const y=g*i;let w=Number(c&d);c>>=h,w>i&&(w-=p,c+=wr);const v=y,x=y+Math.abs(w)-1,P=g%2!==0,_=w<0;w===0?f=f.add(n(P,a[v])):l=l.add(n(_,a[x]))}return{p:l,f}},wNAFCached(o,a,c){const u=Ro.get(o)||1;let i=vr.get(o);return i||(i=this.precomputeWindow(o,u),u!==1&&vr.set(o,c(i))),this.wNAF(u,i,a)},setWindowSize(o,a){r(a),Ro.set(o,a),vr.delete(o)}}}function sm(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((l,f)=>{if(!t.isValid(l))throw new Error(`wrong scalar at index ${f}`)}),n.forEach((l,f)=>{if(!(l instanceof e))throw new Error(`wrong point at index ${f}`)});const s=yc(BigInt(n.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(e.ZERO),u=Math.floor((t.BITS-1)/o)*o;let i=e.ZERO;for(let l=u;l>=0;l-=o){c.fill(e.ZERO);for(let d=0;d<r.length;d++){const p=r[d],h=Number(p>>BigInt(l)&BigInt(a));c[h]=c[h].add(n[d])}let f=e.ZERO;for(let d=c.length-1,p=e.ZERO;d>0;d--)p=p.add(c[d]),f=f.add(p);if(i=i.add(f),l!==0)for(let d=0;d<o;d++)i=i.double()}return i}function Ec(e){return Xh(e.Fp),Vt(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...bc(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Co(e){e.lowS!==void 0&&pt("lowS",e.lowS),e.prehash!==void 0&&pt("prehash",e.prehash)}function om(e){const t=Ec(e);Vt(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:am,hexToBytes:im}=Vh,Be={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(e,t)=>{const{Err:n}=Be;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=ot(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?ot(s.length/2|128):"";return`${ot(e)}${o}${s}${t}`},decode(e,t){const{Err:n}=Be;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let a=0;if(!o)a=s;else{const u=s&127;if(!u)throw new n("tlv.decode(long): indefinite length not supported");if(u>4)throw new n("tlv.decode(long): byte length is too big");const i=t.subarray(r,r+u);if(i.length!==u)throw new n("tlv.decode: length bytes not complete");if(i[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of i)a=a<<8|l;if(r+=u,a<128)throw new n("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+a);if(c.length!==a)throw new n("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+a)}}},_int:{encode(e){const{Err:t}=Be;if(e<Ae)throw new t("integer: negative integers are not allowed");let n=ot(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected assertion");return n},decode(e){const{Err:t}=Be;if(e[0]&128)throw new t("Invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return am(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Be,s=typeof e=="string"?im(e):e;Ht(s);const{v:o,l:a}=r.decode(48,s);if(a.length)throw new t("Invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,o),{v:i,l}=r.decode(2,u);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(i)}},hexFromSig(e){const{_tlv:t,_int:n}=Be,r=`${t.encode(2,n.encode(e.r))}${t.encode(2,n.encode(e.s))}`;return t.encode(48,r)}},Ae=BigInt(0),X=BigInt(1);BigInt(2);const Do=BigInt(3);BigInt(4);function cm(e){const t=om(e),{Fp:n}=t,r=wc(t.n,t.nBitLength),s=t.toBytes||((g,y,w)=>{const v=y.toAffine();return Mt(Uint8Array.from([4]),n.toBytes(v.x),n.toBytes(v.y))}),o=t.fromBytes||(g=>{const y=g.subarray(1),w=n.fromBytes(y.subarray(0,n.BYTES)),v=n.fromBytes(y.subarray(n.BYTES,2*n.BYTES));return{x:w,y:v}});function a(g){const{a:y,b:w}=t,v=n.sqr(g),x=n.mul(v,g);return n.add(n.add(x,n.mul(g,y)),w)}if(!n.eql(n.sqr(t.Gy),a(t.Gx)))throw new Error("bad generator point: equation left != right");function c(g){return Ln(g,X,t.n)}function u(g){const{allowedPrivateKeyLengths:y,nByteLength:w,wrapPrivateKey:v,n:x}=t;if(y&&typeof g!="bigint"){if(Ke(g)&&(g=ht(g)),typeof g!="string"||!y.includes(g.length))throw new Error("Invalid key");g=g.padStart(w*2,"0")}let P;try{P=typeof g=="bigint"?g:Ge(pe("private key",g,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof g}`)}return v&&(P=oe(P,x)),He("private key",P,X,x),P}function i(g){if(!(g instanceof d))throw new Error("ProjectivePoint expected")}const l=Vr((g,y)=>{const{px:w,py:v,pz:x}=g;if(n.eql(x,n.ONE))return{x:w,y:v};const P=g.is0();y==null&&(y=P?n.ONE:n.inv(x));const _=n.mul(w,y),m=n.mul(v,y),b=n.mul(x,y);if(P)return{x:n.ZERO,y:n.ZERO};if(!n.eql(b,n.ONE))throw new Error("invZ was invalid");return{x:_,y:m}}),f=Vr(g=>{if(g.is0()){if(t.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:y,y:w}=g.toAffine();if(!n.isValid(y)||!n.isValid(w))throw new Error("bad point: x or y not FE");const v=n.sqr(w),x=a(y);if(!n.eql(v,x))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(y,w,v){if(this.px=y,this.py=w,this.pz=v,y==null||!n.isValid(y))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(v==null||!n.isValid(v))throw new Error("z required");Object.freeze(this)}static fromAffine(y){const{x:w,y:v}=y||{};if(!y||!n.isValid(w)||!n.isValid(v))throw new Error("invalid affine point");if(y instanceof d)throw new Error("projective point not allowed");const x=P=>n.eql(P,n.ZERO);return x(w)&&x(v)?d.ZERO:new d(w,v,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(y){const w=n.invertBatch(y.map(v=>v.pz));return y.map((v,x)=>v.toAffine(w[x])).map(d.fromAffine)}static fromHex(y){const w=d.fromAffine(o(pe("pointHex",y)));return w.assertValidity(),w}static fromPrivateKey(y){return d.BASE.multiply(u(y))}static msm(y,w){return sm(d,r,y,w)}_setWindowSize(y){h.setWindowSize(this,y)}assertValidity(){f(this)}hasEvenY(){const{y}=this.toAffine();if(n.isOdd)return!n.isOdd(y);throw new Error("Field doesn't support isOdd")}equals(y){i(y);const{px:w,py:v,pz:x}=this,{px:P,py:_,pz:m}=y,b=n.eql(n.mul(w,m),n.mul(P,x)),E=n.eql(n.mul(v,m),n.mul(_,x));return b&&E}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:y,b:w}=t,v=n.mul(w,Do),{px:x,py:P,pz:_}=this;let m=n.ZERO,b=n.ZERO,E=n.ZERO,I=n.mul(x,x),S=n.mul(P,P),T=n.mul(_,_),k=n.mul(x,P);return k=n.add(k,k),E=n.mul(x,_),E=n.add(E,E),m=n.mul(y,E),b=n.mul(v,T),b=n.add(m,b),m=n.sub(S,b),b=n.add(S,b),b=n.mul(m,b),m=n.mul(k,m),E=n.mul(v,E),T=n.mul(y,T),k=n.sub(I,T),k=n.mul(y,k),k=n.add(k,E),E=n.add(I,I),I=n.add(E,I),I=n.add(I,T),I=n.mul(I,k),b=n.add(b,I),T=n.mul(P,_),T=n.add(T,T),I=n.mul(T,k),m=n.sub(m,I),E=n.mul(T,S),E=n.add(E,E),E=n.add(E,E),new d(m,b,E)}add(y){i(y);const{px:w,py:v,pz:x}=this,{px:P,py:_,pz:m}=y;let b=n.ZERO,E=n.ZERO,I=n.ZERO;const S=t.a,T=n.mul(t.b,Do);let k=n.mul(w,P),N=n.mul(v,_),B=n.mul(x,m),A=n.add(w,v),$=n.add(P,_);A=n.mul(A,$),$=n.add(k,N),A=n.sub(A,$),$=n.add(w,x);let M=n.add(P,m);return $=n.mul($,M),M=n.add(k,B),$=n.sub($,M),M=n.add(v,x),b=n.add(_,m),M=n.mul(M,b),b=n.add(N,B),M=n.sub(M,b),I=n.mul(S,$),b=n.mul(T,B),I=n.add(b,I),b=n.sub(N,I),I=n.add(N,I),E=n.mul(b,I),N=n.add(k,k),N=n.add(N,k),B=n.mul(S,B),$=n.mul(T,$),N=n.add(N,B),B=n.sub(k,B),B=n.mul(S,B),$=n.add($,B),k=n.mul(N,$),E=n.add(E,k),k=n.mul(M,$),b=n.mul(A,b),b=n.sub(b,k),k=n.mul(A,N),I=n.mul(M,I),I=n.add(I,k),new d(b,E,I)}subtract(y){return this.add(y.negate())}is0(){return this.equals(d.ZERO)}wNAF(y){return h.wNAFCached(this,y,d.normalizeZ)}multiplyUnsafe(y){He("scalar",y,Ae,t.n);const w=d.ZERO;if(y===Ae)return w;if(y===X)return this;const{endo:v}=t;if(!v)return h.unsafeLadder(this,y);let{k1neg:x,k1:P,k2neg:_,k2:m}=v.splitScalar(y),b=w,E=w,I=this;for(;P>Ae||m>Ae;)P&X&&(b=b.add(I)),m&X&&(E=E.add(I)),I=I.double(),P>>=X,m>>=X;return x&&(b=b.negate()),_&&(E=E.negate()),E=new d(n.mul(E.px,v.beta),E.py,E.pz),b.add(E)}multiply(y){const{endo:w,n:v}=t;He("scalar",y,X,v);let x,P;if(w){const{k1neg:_,k1:m,k2neg:b,k2:E}=w.splitScalar(y);let{p:I,f:S}=this.wNAF(m),{p:T,f:k}=this.wNAF(E);I=h.constTimeNegate(_,I),T=h.constTimeNegate(b,T),T=new d(n.mul(T.px,w.beta),T.py,T.pz),x=I.add(T),P=S.add(k)}else{const{p:_,f:m}=this.wNAF(y);x=_,P=m}return d.normalizeZ([x,P])[0]}multiplyAndAddUnsafe(y,w,v){const x=d.BASE,P=(m,b)=>b===Ae||b===X||!m.equals(x)?m.multiplyUnsafe(b):m.multiply(b),_=P(this,w).add(P(y,v));return _.is0()?void 0:_}toAffine(y){return l(this,y)}isTorsionFree(){const{h:y,isTorsionFree:w}=t;if(y===X)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:y,clearCofactor:w}=t;return y===X?this:w?w(d,this):this.multiplyUnsafe(t.h)}toRawBytes(y=!0){return pt("isCompressed",y),this.assertValidity(),s(d,this,y)}toHex(y=!0){return pt("isCompressed",y),ht(this.toRawBytes(y))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const p=t.nBitLength,h=rm(d,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:u,weierstrassEquation:a,isWithinCurveOrder:c}}function um(e){const t=Ec(e);return Vt(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function fm(e){const t=um(e),{Fp:n,n:r}=t,s=n.BYTES+1,o=2*n.BYTES+1;function a(B){return oe(B,r)}function c(B){return Zr(B,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:i,weierstrassEquation:l,isWithinCurveOrder:f}=cm({...t,toBytes(B,A,$){const M=A.toAffine(),q=n.toBytes(M.x),z=Mt;return pt("isCompressed",$),$?z(Uint8Array.from([A.hasEvenY()?2:3]),q):z(Uint8Array.from([4]),q,n.toBytes(M.y))},fromBytes(B){const A=B.length,$=B[0],M=B.subarray(1);if(A===s&&($===2||$===3)){const q=Ge(M);if(!Ln(q,X,n.ORDER))throw new Error("Point is not on curve");const z=l(q);let te;try{te=n.sqrt(z)}catch(J){const ce=J instanceof Error?": "+J.message:"";throw new Error("Point is not on curve"+ce)}const j=(te&X)===X;return($&1)===1!==j&&(te=n.neg(te)),{x:q,y:te}}else if(A===o&&$===4){const q=n.fromBytes(M.subarray(0,n.BYTES)),z=n.fromBytes(M.subarray(n.BYTES,2*n.BYTES));return{x:q,y:z}}else throw new Error(`Point of length ${A} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),d=B=>ht(yt(B,t.nByteLength));function p(B){const A=r>>X;return B>A}function h(B){return p(B)?a(-B):B}const g=(B,A,$)=>Ge(B.slice(A,$));class y{constructor(A,$,M){this.r=A,this.s=$,this.recovery=M,this.assertValidity()}static fromCompact(A){const $=t.nByteLength;return A=pe("compactSignature",A,$*2),new y(g(A,0,$),g(A,$,2*$))}static fromDER(A){const{r:$,s:M}=Be.toSig(pe("DER",A));return new y($,M)}assertValidity(){He("r",this.r,X,r),He("s",this.s,X,r)}addRecoveryBit(A){return new y(this.r,this.s,A)}recoverPublicKey(A){const{r:$,s:M,recovery:q}=this,z=m(pe("msgHash",A));if(q==null||![0,1,2,3].includes(q))throw new Error("recovery id invalid");const te=q===2||q===3?$+t.n:$;if(te>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const j=q&1?"03":"02",G=u.fromHex(j+d(te)),J=c(te),ce=a(-z*J),_e=a(M*J),se=u.BASE.multiplyAndAddUnsafe(G,ce,_e);if(!se)throw new Error("point at infinify");return se.assertValidity(),se}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return mt(this.toDERHex())}toDERHex(){return Be.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return mt(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const w={isValidPrivateKey(B){try{return i(B),!0}catch{return!1}},normPrivateKeyToScalar:i,randomPrivateKey:()=>{const B=xc(t.n);return tm(t.randomBytes(B),t.n)},precompute(B=8,A=u.BASE){return A._setWindowSize(B),A.multiply(BigInt(3)),A}};function v(B,A=!0){return u.fromPrivateKey(B).toRawBytes(A)}function x(B){const A=Ke(B),$=typeof B=="string",M=(A||$)&&B.length;return A?M===s||M===o:$?M===2*s||M===2*o:B instanceof u}function P(B,A,$=!0){if(x(B))throw new Error("first arg must be private key");if(!x(A))throw new Error("second arg must be public key");return u.fromHex(A).multiply(i(B)).toRawBytes($)}const _=t.bits2int||function(B){const A=Ge(B),$=B.length*8-t.nBitLength;return $>0?A>>BigInt($):A},m=t.bits2int_modN||function(B){return a(_(B))},b=no(t.nBitLength);function E(B){return He(`num < 2^${t.nBitLength}`,B,Ae,b),yt(B,t.nByteLength)}function I(B,A,$=S){if(["recovered","canonical"].some(Ue=>Ue in $))throw new Error("sign() legacy options not supported");const{hash:M,randomBytes:q}=t;let{lowS:z,prehash:te,extraEntropy:j}=$;z==null&&(z=!0),B=pe("msgHash",B),Co($),te&&(B=pe("prehashed msgHash",M(B)));const G=m(B),J=i(A),ce=[E(J),E(G)];if(j!=null&&j!==!1){const Ue=j===!0?q(n.BYTES):j;ce.push(pe("extraEntropy",Ue))}const _e=Mt(...ce),se=G;function ir(Ue){const et=_(Ue);if(!f(et))return;const co=c(et),be=u.BASE.multiply(et).toAffine(),tt=a(be.x);if(tt===Ae)return;const Zt=a(co*a(se+tt*J));if(Zt===Ae)return;let uo=(be.x===tt?0:2)|Number(be.y&X),fo=Zt;return z&&p(Zt)&&(fo=h(Zt),uo^=1),new y(tt,fo,uo)}return{seed:_e,k2sig:ir}}const S={lowS:t.lowS,prehash:!1},T={lowS:t.lowS,prehash:!1};function k(B,A,$=S){const{seed:M,k2sig:q}=I(B,A,$),z=t;return gc(z.hash.outputLen,z.nByteLength,z.hmac)(M,q)}u.BASE._setWindowSize(8);function N(B,A,$,M=T){const q=B;if(A=pe("msgHash",A),$=pe("publicKey",$),"strict"in M)throw new Error("options.strict was renamed to lowS");Co(M);const{lowS:z,prehash:te}=M;let j,G;try{if(typeof q=="string"||Ke(q))try{j=y.fromDER(q)}catch(be){if(!(be instanceof Be.Err))throw be;j=y.fromCompact(q)}else if(typeof q=="object"&&typeof q.r=="bigint"&&typeof q.s=="bigint"){const{r:be,s:tt}=q;j=new y(be,tt)}else throw new Error("PARSE");G=u.fromHex($)}catch(be){if(be.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(z&&j.hasHighS())return!1;te&&(A=t.hash(A));const{r:J,s:ce}=j,_e=m(A),se=c(ce),ir=a(_e*se),Ue=a(J*se),et=u.BASE.multiplyAndAddUnsafe(G,ir,Ue)?.toAffine();return et?a(et.x)===J:!1}return{CURVE:t,getPublicKey:v,getSharedSecret:P,sign:k,verify:N,ProjectivePoint:u,Signature:y,utils:w}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lm(e){return{hash:e,hmac:(t,...n)=>mc(e,t,lu(...n)),randomBytes:du}}function dm(e,t){const n=r=>fm({...e,...lm(r)});return Object.freeze({...n(t),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ic=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Lo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),pm=BigInt(1),Kr=BigInt(2),qo=(e,t)=>(e+t/Kr)/t;function hm(e){const t=Ic,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),i=e*e*e%t,l=i*i*e%t,f=ue(l,n,t)*l%t,d=ue(f,n,t)*l%t,p=ue(d,Kr,t)*i%t,h=ue(p,s,t)*p%t,g=ue(h,o,t)*h%t,y=ue(g,c,t)*g%t,w=ue(y,u,t)*y%t,v=ue(w,c,t)*g%t,x=ue(v,n,t)*l%t,P=ue(x,a,t)*h%t,_=ue(P,r,t)*i%t,m=ue(_,Kr,t);if(!Yr.eql(Yr.sqr(m),e))throw new Error("Cannot find square root");return m}const Yr=wc(Ic,void 0,void 0,{sqrt:hm}),xt=dm({a:BigInt(0),b:BigInt(7),Fp:Yr,n:Lo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Lo,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-pm*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,a=BigInt("0x100000000000000000000000000000000"),c=qo(o*e,t),u=qo(-r*e,t);let i=oe(e-c*n-u*s,t),l=oe(-c*r-u*o,t);const f=i>a,d=l>a;if(f&&(i=t-i),d&&(l=t-l),i>a||l>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:i,k2neg:d,k2:l}}}},pu);BigInt(0);xt.ProjectivePoint;const mm=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:xt},Symbol.toStringTag,{value:"Module"}));function Jr({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new xt.Signature(U(e),U(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?a:ke(a)}async function ro(e,t){const{address:n,factory:r,factoryData:s,hash:o,signature:a,universalSignatureVerifierAddress:c=e.chain?.contracts?.universalSignatureVerifier?.address,...u}=t,i=C(a)?a:typeof a=="object"&&"r"in a&&"s"in a?Jr(a):Y(a),l=await(async()=>!r&&!s||Js(i)?i:uc({address:r,data:s,signature:i}))();try{const f=c?{to:c,data:Pe({abi:Cr,functionName:"isValidSig",args:[n,o,l]}),...u}:{data:Ct({abi:Cr,args:[n,o,l],bytecode:Ni}),...u},{data:d}=await R(e,jt,"call")(f);return xa(d??"0x0")}catch(f){try{if(je(xe(n),await Ye({hash:o,signature:a})))return!0}catch{}if(f instanceof Rs)return!1;throw f}}async function ym(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...a}){const c=On(n);return ro(e,{address:t,factory:r,factoryData:s,hash:c,signature:o,...a})}async function gm(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:a,primaryType:c,types:u,domain:i,...l}=t,f=Hs({message:a,primaryType:c,types:u,domain:i});return ro(e,{address:n,factory:r,factoryData:s,hash:f,signature:o,...l})}async function bm(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}function Pc(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:a,fromBlock:c,onError:u,onLogs:i,poll:l,pollingInterval:f=e.pollingInterval,strict:d}=t;return(typeof l<"u"?l:typeof c=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="fallback"&&e.transport.transports[0].config.type==="webSocket"))?(()=>{const y=d??!1,w=re(["watchContractEvent",r,s,o,e.uid,a,f,y,c]);return Re(w,{onLogs:i,onError:u},v=>{let x;c!==void 0&&(x=c-1n);let P,_=!1;const m=zt(async()=>{if(!_){try{P=await R(e,qs,"createContractEventFilter")({abi:n,address:r,args:s,eventName:a,strict:y,fromBlock:c})}catch{}_=!0;return}try{let b;if(P)b=await R(e,$n,"getFilterChanges")({filter:P});else{const E=await R(e,Ut,"getBlockNumber")({});x&&x<E?b=await R(e,Us,"getContractEvents")({abi:n,address:r,args:s,eventName:a,fromBlock:x+1n,toBlock:E,strict:y}):b=[],x=E}if(b.length===0)return;if(o)v.onLogs(b);else for(const E of b)v.onLogs([E])}catch(b){P&&b instanceof us&&(_=!1),v.onError?.(b)}},{emitOnBegin:!0,interval:f});return async()=>{P&&await R(e,Mn,"uninstallFilter")({filter:P}),m()}})})():(()=>{const y=d??!1,w=re(["watchContractEvent",r,s,o,e.uid,a,f,y]);let v=!0,x=()=>v=!1;return Re(w,{onLogs:i,onError:u},P=>((async()=>{try{const _=(()=>{if(e.transport.type==="fallback"){const E=e.transport.transports.find(I=>I.config.type==="webSocket");return E?E.value:e.transport}return e.transport})(),m=a?vt({abi:n,eventName:a,args:s}):[],{unsubscribe:b}=await _.subscribe({params:["logs",{address:r,topics:m}],onData(E){if(!v)return;const I=E.result;try{const{eventName:S,args:T}=Nn({abi:n,data:I.data,topics:I.topics,strict:d}),k=Oe(I,{args:T,eventName:S});P.onLogs([k])}catch(S){let T,k;if(S instanceof lt||S instanceof Rt){if(d)return;T=S.abiItem.name,k=S.abiItem.inputs?.some(B=>!("name"in B&&B.name))}const N=Oe(I,{args:k?[]:{},eventName:T});P.onLogs([N])}},onError(E){P.onError?.(E)}});x=b,v||x()}catch(_){u?.(_)}})(),()=>x()))})()}async function _c(e,t){const{abi:n,account:r=e.account,address:s,args:o,dataSuffix:a,functionName:c,...u}=t;if(typeof r>"u")throw new Dt({docsPath:"/docs/contract/writeContract"});const i=r?de(r):null,l=Pe({abi:n,args:o,functionName:c});try{return await R(e,Ns,"sendTransaction")({data:`${l}${a?a.replace("0x",""):""}`,to:s,account:i,...u})}catch(f){throw Ze(f,{abi:n,address:s,args:o,docsPath:"/docs/contract/writeContract",functionName:c,sender:i?.address})}}function wm({abi:e,address:t,client:n}){const r=n,[s,o]=r?"public"in r&&"wallet"in r?[r.public,r.wallet]:"public"in r?[r.public,void 0]:"wallet"in r?[void 0,r.wallet]:[r,r]:[void 0,void 0],a=s!=null,c=o!=null,u={};let i=!1,l=!1,f=!1;for(const d of e)if(d.type==="function"?d.stateMutability==="view"||d.stateMutability==="pure"?i=!0:l=!0:d.type==="event"&&(f=!0),i&&l&&f)break;return a&&(i&&(u.read=new Proxy({},{get(d,p){return(...h)=>{const{args:g,options:y}=Jt(h);return R(s,Ee,"readContract")({abi:e,address:t,functionName:p,args:g,...y})}}})),l&&(u.simulate=new Proxy({},{get(d,p){return(...h)=>{const{args:g,options:y}=Jt(h);return R(s,pc,"simulateContract")({abi:e,address:t,functionName:p,args:g,...y})}}})),f&&(u.createEventFilter=new Proxy({},{get(d,p){return(...h)=>{const g=e.find(v=>v.type==="event"&&v.name===p),{args:y,options:w}=xr(h,g);return R(s,qs,"createContractEventFilter")({abi:e,address:t,eventName:p,args:y,...w})}}}),u.getEvents=new Proxy({},{get(d,p){return(...h)=>{const g=e.find(v=>v.type==="event"&&v.name===p),{args:y,options:w}=xr(h,g);return R(s,Us,"getContractEvents")({abi:e,address:t,eventName:p,args:y,...w})}}}),u.watchEvent=new Proxy({},{get(d,p){return(...h)=>{const g=e.find(v=>v.type==="event"&&v.name===p),{args:y,options:w}=xr(h,g);return R(s,Pc,"watchContractEvent")({abi:e,address:t,eventName:p,args:y,...w})}}}))),c&&l&&(u.write=new Proxy({},{get(d,p){return(...h)=>{const{args:g,options:y}=Jt(h);return R(o,_c,"writeContract")({abi:e,address:t,functionName:p,args:g,...y})}}})),(a||c)&&l&&(u.estimateGas=new Proxy({},{get(d,p){return(...h)=>{const{args:g,options:y}=Jt(h);return R(s??o,Li,"estimateContractGas")({abi:e,address:t,functionName:p,args:g,...y,account:y.account??o.account})}}})),u.address=t,u.abi=e,u}function Jt(e){const t=e.length&&Array.isArray(e[0]),n=t?e[0]:[],r=(t?e[1]:e[0])??{};return{args:n,options:r}}function xr(e,t){let n=!1;Array.isArray(e[0])?n=!0:e.length===1?n=t.inputs.some(o=>o.indexed):e.length===2&&(n=!0);const r=n?e[0]:void 0,s=(n?e[1]:e[0])??{};return{args:r,options:s}}function vm(e,t={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,retryCount:o,retryDelay:a}=t;return({chain:c,pollingInterval:u=4e3,timeout:i,...l})=>{let f=e,d=()=>{};const p=bn({key:n,name:r,async request({method:h,params:g}){const y=async(w=0)=>{const v=f[w]({...l,chain:c,retryCount:0,timeout:i});try{const x=await v.request({method:h,params:g});return d({method:h,params:g,response:x,transport:v,status:"success"}),x}catch(x){if(d({error:x,method:h,params:g,transport:v,status:"error"}),xm(x)||w===f.length-1)throw x;return y(w+1)}};return y()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:h=>d=h,transports:f.map(h=>h({chain:c,retryCount:0}))});if(s){const h=typeof s=="object"?s:{};Em({chain:c,interval:h.interval??u,onTransports:g=>f=g,sampleCount:h.sampleCount,timeout:h.timeout,transports:f,weights:h.weights})}return p}}function xm(e){return"code"in e&&typeof e.code=="number"&&(e.code===Ea.code||e.code===Ia.code||e.code===5e3)}function Em({chain:e,interval:t=4e3,onTransports:n,sampleCount:r=10,timeout:s=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:u=.3}=a,i=[],l=async()=>{const f=await Promise.all(o.map(async h=>{const g=h({chain:e,retryCount:0,timeout:s}),y=Date.now();let w,v;try{await g.request({method:"net_listening"}),v=1}catch{v=0}finally{w=Date.now()}return{latency:w-y,success:v}}));i.push(f),i.length>r&&i.shift();const d=Math.max(...i.map(h=>Math.max(...h.map(({latency:g})=>g)))),p=o.map((h,g)=>{const y=i.map(_=>_[g].latency),v=1-y.reduce((_,m)=>_+m,0)/y.length/d,x=i.map(_=>_[g].success),P=x.reduce((_,m)=>_+m,0)/x.length;return P===0?[0,g]:[u*v+c*P,g]}).sort((h,g)=>g[0]-h[0]);n(p.map(([,h])=>o[h])),await kr(t),l()};l()}class so extends O{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Im(e,t={}){const{batch:n,fetchOptions:r,key:s="http",name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:u}=t;return({chain:i,retryCount:l,timeout:f})=>{const{batchSize:d=1e3,wait:p=0}=typeof n=="object"?n:{},h=t.retryCount??l,g=f??t.timeout??1e4,y=e||i?.rpcUrls.default.http[0];if(!y)throw new so;const w=wp(y,{fetchOptions:r,onRequest:a,onResponse:c,timeout:g});return bn({key:s,name:o,async request({method:v,params:x}){const P={method:v,params:x},{schedule:_}=Ds({id:y,wait:p,shouldSplitBatch(I){return I.length>d},fn:I=>w.request({body:I}),sort:(I,S)=>I.id-S.id}),m=async I=>n?_(I):[await w.request({body:I})],[{error:b,result:E}]=await m(P);if(b)throw new ds({body:P,error:b,url:y});return E},retryCount:h,retryDelay:u,timeout:g,type:"http"},{fetchOptions:r,url:y})}}function Pm(e){const{scheme:t,statement:n,...r}=e.match(_m)?.groups??{},{chainId:s,expirationTime:o,issuedAt:a,notBefore:c,requestId:u,...i}=e.match(Sm)?.groups??{},l=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...i,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...a?{issuedAt:new Date(a)}:{},...c?{notBefore:new Date(c)}:{},...u?{requestId:u}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const _m=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Sm=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Bm(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:a=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&a>=r.expirationTime||r.notBefore&&a<r.notBefore)return!1;try{if(!r.address||t&&!je(r.address,t))return!1}catch{return!1}return!0}async function Am(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:a,signature:c,time:u=new Date,...i}=t,l=Pm(s);if(!l.address||!Bm({address:n,domain:r,message:l,nonce:o,scheme:a,time:u}))return!1;const d=On(s);return ro(e,{address:l.address,hash:d,signature:c,...i})}function Sc(e){return{call:t=>jt(e,t),createBlockFilter:()=>R0(e),createContractEventFilter:t=>qs(e,t),createEventFilter:t=>Ci(e,t),createPendingTransactionFilter:()=>Di(e),estimateContractGas:t=>Li(e,t),estimateGas:t=>Bs(e,t),getBalance:t=>Va(e,t),getBlobBaseFee:()=>D0(e),getBlock:t=>Te(e,t),getBlockNumber:t=>Ut(e,t),getBlockTransactionCount:t=>G0(e,t),getBytecode:t=>Bo(e,t),getChainId:()=>Lt(e),getCode:t=>Bo(e,t),getContractEvents:t=>Us(e,t),getEip712Domain:t=>Z0(e,t),getEnsAddress:t=>x0(e,t),getEnsAvatar:t=>M0(e,t),getEnsName:t=>F0(e,t),getEnsResolver:t=>O0(e,t),getEnsText:t=>Oi(e,t),getFeeHistory:t=>J0(e,t),estimateFeesPerGas:t=>md(e,t),getFilterChanges:t=>$n(e,t),getFilterLogs:t=>X0(e,t),getGasPrice:()=>Ss(e),getLogs:t=>js(e,t),getProof:t=>sh(e,t),estimateMaxPriorityFeePerGas:t=>hd(e,t),getStorageAt:t=>Q0(e,t),getTransaction:t=>zs(e,t),getTransactionConfirmations:t=>ep(e,t),getTransactionCount:t=>As(e,t),getTransactionReceipt:t=>zr(e,t),multicall:t=>op(e,t),prepareTransactionRequest:t=>Pn(e,t),readContract:t=>Ee(e,t),sendRawTransaction:t=>Ts(e,t),simulateContract:t=>pc(e,t),verifyMessage:t=>ym(e,t),verifySiweMessage:t=>Am(e,t),verifyTypedData:t=>gm(e,t),uninstallFilter:t=>Mn(e,t),waitForTransactionReceipt:t=>oh(e,t),watchBlocks:t=>ip(e,t),watchBlockNumber:t=>qi(e,t),watchContractEvent:t=>Pc(e,t),watchEvent:t=>cp(e,t),watchPendingTransactions:t=>up(e,t)}}function Tm(e){const{key:t="public",name:n="Public Client"}=e;return wn({...e,key:t,name:n,type:"publicClient"}).extend(Sc)}function Bc({mode:e}){return t=>{const n=t.extend(()=>({mode:e}));return{dropTransaction:r=>ch(n,r),dumpState:()=>C0(n),getAutomine:()=>uh(n),getTxpoolContent:()=>fh(n),getTxpoolStatus:()=>lh(n),impersonateAccount:r=>tp(n,r),increaseTime:r=>np(n,r),inspectTxpool:()=>dh(n),loadState:r=>rp(n,r),mine:r=>sp(n,r),removeBlockTimestampInterval:()=>ph(n),reset:r=>hh(n,r),revert:r=>mh(n,r),sendUnsignedTransaction:r=>gh(n,r),setAutomine:r=>wh(n,r),setBalance:r=>bh(n,r),setBlockGasLimit:r=>vh(n,r),setBlockTimestampInterval:r=>xh(n,r),setCode:r=>Eh(n,r),setCoinbase:r=>Ih(n,r),setIntervalMining:r=>Ph(n,r),setLoggingEnabled:r=>_h(n,r),setMinGasPrice:r=>Sh(n,r),setNextBlockBaseFeePerGas:r=>Bh(n,r),setNextBlockTimestamp:r=>Ah(n,r),setNonce:r=>Th(n,r),setRpcUrl:r=>Nh(n,r),setStorageAt:r=>kh(n,r),snapshot:()=>$h(n),stopImpersonatingAccount:r=>Oh(n,r)}}}function Nm(e){const{key:t="test",name:n="Test Client",mode:r}=e;return wn({...e,key:t,name:n,type:"testClient"}).extend(o=>({mode:r,...Bc({mode:r})(o)}))}function Ac(e){return{addChain:t=>Jl(e,t),deployContract:t=>wd(e,t),getAddresses:()=>fp(e),getChainId:()=>Lt(e),getPermissions:()=>lp(e),prepareTransactionRequest:t=>Pn(e,t),requestAddresses:()=>ah(e),requestPermissions:t=>ih(e,t),sendRawTransaction:t=>Ts(e,t),sendTransaction:t=>Ns(e,t),signMessage:t=>Mh(e,t),signTransaction:t=>yh(e,t),signTypedData:t=>Fh(e,t),switchChain:t=>Rh(e,t),watchAsset:t=>bm(e,t),writeContract:t=>_c(e,t)}}function km(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return wn({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(Ac)}function $m(e,t={}){const{keepAlive:n,key:r="webSocket",name:s="WebSocket JSON-RPC",reconnect:o,retryDelay:a}=t;return({chain:c,retryCount:u,timeout:i})=>{const l=t.retryCount??u,f=i??t.timeout??1e4,d=e||c?.rpcUrls.default.webSocket?.[0];if(!d)throw new so;return bn({key:r,name:s,async request({method:p,params:h}){const g={method:p,params:h},y=await rn(d,{keepAlive:n,reconnect:o}),{error:w,result:v}=await y.requestAsync({body:g,timeout:f});if(w)throw new ds({body:g,error:w,url:d});return v},retryCount:l,retryDelay:a,timeout:f,type:"webSocket"},{getSocket(){return xp(d)},getRpcClient(){return rn(d)},async subscribe({params:p,onData:h,onError:g}){const y=await rn(d),{result:w}=await new Promise((v,x)=>y.request({body:{method:"eth_subscribe",params:p},onError(P){x(P),g?.(P)},onResponse(P){if(P.error){x(P.error),g?.(P.error);return}if(typeof P.id=="number"){v(P);return}P.method==="eth_subscription"&&h(P.params)}}));return{subscriptionId:w,async unsubscribe(){return new Promise(v=>y.request({body:{method:"eth_unsubscribe",params:[w]},onResponse:v}))}}}})}}const Mm="0x0000000000000000000000000000000000000000";class Fm extends Error{constructor(t,n){super(n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=n}}const Er="/docs/contract/decodeDeployData";function Om(e){const{abi:t,bytecode:n,data:r}=e;if(r===n)return{bytecode:n};const s=t.find(a=>"type"in a&&a.type==="constructor");if(!s)throw new ps({docsPath:Er});if(!("inputs"in s))throw new kt({docsPath:Er});if(!s.inputs||s.inputs.length===0)throw new kt({docsPath:Er});return{args:De(s.inputs,`0x${r.replace(n,"")}`),bytecode:n}}function Rm({r:e,yParityAndS:t}){const n=ke(t),r=n[0]&128?1:0,s=n;return r===1&&(s[0]&=127),{r:e,s:Y(s),yParity:r}}function jo(e){const{r:t,s:n}=xt.Signature.fromCompact(e.slice(2,130));return{r:F(t,{size:32}),yParityAndS:F(n,{size:32})}}function Uo(e){const{r:t,s:n}=xt.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[s,o]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof s<"u"?{r:F(t,{size:32}),s:F(n,{size:32}),v:s,yParity:o}:{r:F(t,{size:32}),s:F(n,{size:32}),yParity:o}}async function Cm(e){const{serializedTransaction:t,signature:n}=e,r=lc(t),s=n??{r:r.r,s:r.s,v:r.v,yParity:r.yParity},o=Pa({...r,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await Ye({hash:V(o),signature:s})}function Dm(e){const{r:t,s:n,v:r,yParity:s}=e,o=Number(s??r-27n);let a=n;if(o===1){const c=ke(n);c[0]|=128,a=Y(c)}return{r:t,yParityAndS:a}}function zo({r:e,yParityAndS:t}){return`0x${new xt.Signature(U(e),U(t)).toCompactHex()}`}function Lm(e){const{sidecars:t,version:n}=e,r=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),s=[];for(const{commitment:o}of t)s.push(_a({commitment:o,to:r,version:n}));return s}function qm(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),n=typeof e.blobs[0]=="string"?e.blobs.map(c=>ke(c)):e.blobs,r=n.reduce((c,u)=>c+u.length,0),s=an(new Uint8Array(r));let o=!0;for(const c of n){const u=an(c);for(;o&&u.position<c.length;){u.incrementPosition(1);let i=31;c.length-u.position<31&&(i=c.length-u.position);for(const l in Array.from({length:i})){const f=u.readByte();if(f===128&&!u.inspectBytes(u.remaining).includes(128)){o=!1;break}s.pushByte(f)}}}const a=s.bytes.slice(0,s.position);return t==="hex"?Y(a):a}function Tc({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function jm(e,t){try{e.loadTrustedSetup(t)}catch(n){const r=n;if(!r.message.includes("trusted setup is already loaded"))throw r}return Tc(e)}const Um=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:ps,AbiConstructorParamsNotFoundError:kt,AbiDecodingDataSizeInvalidError:Ql,AbiDecodingDataSizeTooSmallError:hs,AbiDecodingZeroDataError:Ot,AbiEncodingArrayLengthMismatchError:Sa,AbiEncodingBytesSizeMismatchError:Ba,AbiEncodingLengthMismatchError:ms,AbiErrorInputsNotFoundError:Aa,AbiErrorNotFoundError:Fr,AbiErrorSignatureNotFoundError:ys,AbiEventNotFoundError:Or,AbiEventSignatureEmptyTopicsError:Ta,AbiEventSignatureNotFoundError:gs,AbiFunctionNotFoundError:Ve,AbiFunctionOutputsNotFoundError:bs,AbiFunctionSignatureNotFoundError:Na,AccountStateConflictError:za,BaseError:O,BaseFeeScalarError:La,BlockNotFoundError:_s,BytesSizeMismatchError:ws,CallExecutionError:Rs,ChainDisconnectedError:hu,ChainDoesNotSupportContract:cn,ChainMismatchError:Jo,ChainNotFoundError:Yo,CircularReferenceError:mi,ClientChainNotConfiguredError:as,ContractFunctionExecutionError:Ii,ContractFunctionRevertedError:pn,ContractFunctionZeroDataError:Pi,CounterfactualDeploymentFailedError:_i,DecodeLogDataMismatch:lt,DecodeLogTopicsMismatch:Rt,EIP1193ProviderRpcError:Fm,Eip1559FeesNotSupportedError:In,EnsAvatarInvalidNftUriError:rt,EnsAvatarUnsupportedNamespaceError:$i,EnsAvatarUriResolutionError:An,EstimateGasExecutionError:Ua,ExecutionRevertedError:Pt,FeeCapTooHighError:sn,FeeCapTooLowError:Ir,FeeConflictError:Qo,FilterTypeNotSupportedError:Ri,HttpRequestError:it,InsufficientFundsError:Br,IntegerOutOfRangeError:mu,InternalRpcError:ca,IntrinsicGasTooHighError:Ar,IntrinsicGasTooLowError:Tr,InvalidAbiDecodingTypeError:$a,InvalidAbiEncodingTypeError:ka,InvalidAbiItemError:si,InvalidAbiParameterError:ai,InvalidAbiParametersError:ii,InvalidAbiTypeParameterError:di,InvalidAddressError:ve,InvalidArrayError:Ma,InvalidBytesBooleanError:aa,InvalidChainIdError:yu,InvalidDecimalNumberError:Wl,InvalidDefinitionTypeError:Fa,InvalidFunctionModifierError:li,InvalidHexBooleanError:gu,InvalidHexValueError:da,InvalidInputRpcError:us,InvalidLegacyVError:ga,InvalidModifierError:fi,InvalidParameterError:ci,InvalidParamsRpcError:bu,InvalidParenthesisError:yi,InvalidRequestRpcError:wu,InvalidSerializableTransactionError:vu,InvalidSerializedTransactionError:bt,InvalidSerializedTransactionTypeError:pa,InvalidSignatureError:st,InvalidStorageKeySizeError:xu,InvalidStructSignatureError:hi,InvalidStructTypeError:Hi,JsonRpcVersionUnsupportedError:Eu,LimitExceededRpcError:Iu,MaxFeePerGasTooLowError:qa,MethodNotFoundRpcError:Pu,MethodNotSupportedRpcError:_u,NonceMaxValueError:Sr,NonceTooHighError:Pr,NonceTooLowError:_r,ParseRpcError:Su,ProviderDisconnectedError:Bu,ProviderRpcError:Au,RawContractError:Sn,ResourceNotFoundRpcError:Tu,ResourceUnavailableRpcError:Nu,RpcError:ku,RpcRequestError:ds,SizeExceedsPaddingSizeError:$u,SizeOverflowError:Mu,SliceOffsetOutOfBoundsError:Fu,SocketClosedError:Tt,SolidityProtectedKeywordError:ui,StateAssignmentConflictError:Ga,SwitchChainError:Ou,TimeoutError:un,TipAboveFeeCapError:on,TransactionExecutionError:Xo,TransactionNotFoundError:is,TransactionReceiptNotFoundError:cs,TransactionRejectedRpcError:Ea,TransactionTypeNotSupportedError:Nr,UnauthorizedProviderError:Ru,UnknownNodeError:Ft,UnknownRpcError:Cu,UnknownSignatureError:pi,UnknownTypeError:oi,UnsupportedPackedAbiType:Oa,UnsupportedProviderMethodError:Du,UrlRequiredError:so,UserRejectedRequestError:Ia,WaitForTransactionReceiptTimeoutError:va,WebSocketRequestError:$r,assertCurrentChain:Is,assertRequest:wt,assertTransactionEIP1559:ha,assertTransactionEIP2930:ma,assertTransactionLegacy:ya,blobsToCommitments:ta,blobsToProofs:ra,boolToBytes:Lu,boolToHex:Qr,bytesToBigInt:ks,bytesToBool:$s,bytesToHex:Y,bytesToNumber:me,bytesToRlp:qu,bytesToString:Ms,ccipFetch:hn,ccipRequest:hn,checksumAddress:yn,commitmentToVersionedHash:_a,commitmentsToVersionedHashes:na,compactSignatureToHex:zo,compactSignatureToSignature:Rm,concat:le,concatBytes:ju,concatHex:Ce,createClient:wn,createNonceManager:dc,createPublicClient:Tm,createTestClient:Nm,createTransport:bn,createWalletClient:km,custom:Uu,decodeAbiParameters:De,decodeDeployData:Om,decodeErrorResult:Os,decodeEventLog:Nn,decodeFunctionData:Sp,decodeFunctionResult:Xe,defineBlock:zu,defineChain:Yl,defineKzg:Tc,defineTransaction:Gu,defineTransactionReceipt:Hu,defineTransactionRequest:dd,deploylessCallViaBytecodeBytecode:Ai,deploylessCallViaFactoryBytecode:Ti,domainSeparator:Pp,encodeAbiParameters:Ie,encodeDeployData:Ct,encodeErrorResult:Bp,encodeEventTopics:vt,encodeFunctionData:Pe,encodeFunctionResult:Ap,encodePacked:Tp,erc20Abi:xd,erc20Abi_bytes32:Ed,erc4626Abi:Pd,erc721Abi:Id,etherUnits:ba,extractChain:yp,fallback:vm,formatBlock:ns,formatEther:ss,formatGwei:$e,formatLog:Oe,formatTransaction:ua,formatTransactionReceipt:fa,formatTransactionRequest:Je,formatUnits:Hl,fromBlobs:qm,fromBytes:_d,fromHex:Vu,fromRlp:Zs,getAbiItem:qe,getAddress:xe,getChainContractAddress:Qe,getContract:wm,getContractAddress:Np,getContractError:Ze,getCreate2Address:Qi,getCreateAddress:Xi,getEventSelector:dt,getEventSignature:_t,getFunctionSelector:We,getFunctionSignature:_t,getSerializedTransactionType:fc,getTransactionType:sa,getTypesForEIP712Domain:Fn,gweiUnits:wa,hashDomain:Vs,hashMessage:On,hashTypedData:Hs,hexToBigInt:U,hexToBool:xa,hexToBytes:ke,hexToCompactSignature:jo,hexToNumber:W,hexToRlp:Wu,hexToSignature:Uo,hexToString:Zu,http:Im,isAddress:ie,isAddressEqual:je,isBytes:Hr,isErc6492Signature:Js,isHash:tc,isHex:C,keccak256:V,labelhash:Bi,maxInt104:Ku,maxInt112:Yu,maxInt120:Ju,maxInt128:Xu,maxInt136:Qu,maxInt144:ef,maxInt152:tf,maxInt16:nf,maxInt160:rf,maxInt168:sf,maxInt176:of,maxInt184:af,maxInt192:cf,maxInt200:uf,maxInt208:ff,maxInt216:lf,maxInt224:df,maxInt232:pf,maxInt24:hf,maxInt240:mf,maxInt248:yf,maxInt256:gf,maxInt32:bf,maxInt40:wf,maxInt48:vf,maxInt56:xf,maxInt64:Ef,maxInt72:If,maxInt8:Pf,maxInt80:_f,maxInt88:Sf,maxInt96:Bf,maxUint104:Af,maxUint112:Tf,maxUint120:Nf,maxUint128:kf,maxUint136:$f,maxUint144:Mf,maxUint152:Ff,maxUint16:Of,maxUint160:Rf,maxUint168:Cf,maxUint176:Df,maxUint184:Lf,maxUint192:qf,maxUint200:jf,maxUint208:Uf,maxUint216:zf,maxUint224:Gf,maxUint232:Hf,maxUint24:Vf,maxUint240:Wf,maxUint248:Zf,maxUint256:ea,maxUint32:Kf,maxUint40:Yf,maxUint48:Jf,maxUint56:Xf,maxUint64:Qf,maxUint72:el,maxUint8:tl,maxUint80:nl,maxUint88:rl,maxUint96:sl,minInt104:ol,minInt112:al,minInt120:il,minInt128:cl,minInt136:ul,minInt144:fl,minInt152:ll,minInt16:dl,minInt160:pl,minInt168:hl,minInt176:ml,minInt184:yl,minInt192:gl,minInt200:bl,minInt208:wl,minInt216:vl,minInt224:xl,minInt232:El,minInt24:Il,minInt240:Pl,minInt248:_l,minInt256:Sl,minInt32:Bl,minInt40:Al,minInt48:Tl,minInt56:Nl,minInt64:kl,minInt72:$l,minInt8:Ml,minInt80:Fl,minInt88:Ol,minInt96:Rl,multicall3Abi:fn,namehash:Bt,nonceManager:th,numberToBytes:Cl,numberToHex:F,offchainLookup:Ui,offchainLookupAbiItem:Gs,offchainLookupSignature:ji,pad:St,padBytes:Dl,padHex:we,parseAbi:Fs,parseAbiItem:a0,parseAbiParameter:i0,parseAbiParameters:c0,parseCompactSignature:jo,parseErc6492Signature:Hp,parseEther:Xp,parseEventLogs:kn,parseGwei:Qp,parseSignature:Uo,parseTransaction:lc,parseUnits:Nt,prepareEncodeFunctionData:vi,presignMessagePrefix:sc,publicActions:Sc,recoverAddress:Ye,recoverMessageAddress:ac,recoverPublicKey:Ra,recoverTransactionAddress:Cm,recoverTypedDataAddress:ic,ripemd160:qp,rpcSchema:Ll,rpcTransactionType:Da,serializeAccessList:ql,serializeCompactSignature:zo,serializeErc6492Signature:uc,serializeSignature:Jr,serializeTransaction:Pa,serializeTypedData:Yi,setErrorConfig:Vl,setupKzg:jm,sha256:jl,sidecarsToVersionedHashes:Lm,signatureToCompactSignature:Dm,signatureToHex:Jr,size:ne,slice:Fe,sliceBytes:ia,sliceHex:ls,stringToBytes:at,stringToHex:ft,stringify:re,testActions:Bc,toBlobSidecars:os,toBlobs:Ul,toBytes:fe,toEventHash:dn,toEventSelector:dt,toEventSignature:_t,toFunctionHash:dn,toFunctionSelector:We,toFunctionSignature:_t,toHex:ye,toPrefixedMessage:oc,toRlp:ts,transactionType:zl,trim:gt,universalSignatureValidatorAbi:Cr,universalSignatureValidatorByteCode:Ni,validateTypedData:Ws,verifyHash:jp,verifyMessage:Up,verifyTypedData:zp,walletActions:Ac,webSocket:$m,weiUnits:Gl,withRetry:Mr,withTimeout:fs,zeroAddress:Mm,zeroHash:Gp},Symbol.toStringTag,{value:"Module"})),Hy=(e,t)=>{const n=lo.useRef(null);lo.useEffect(()=>{const r=()=>{n.current||(n.current=window.setInterval(e,t))},s=()=>{n.current!==null&&(window.clearInterval(n.current),n.current=null)};return document.hasFocus()&&r(),window.addEventListener("focus",r),window.addEventListener("blur",s),()=>{window.removeEventListener("focus",r),window.removeEventListener("blur",s),s()}},[e,t])};var Nc={},kc={},qn={};Object.defineProperty(qn,"__esModule",{value:!0});qn.gasMargin=void 0;function zm(e){return e*120n/100n}qn.gasMargin=zm;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.gasMargin=void 0;var t=qn;Object.defineProperty(e,"gasMargin",{enumerable:!0,get:function(){return t.gasMargin}})})(kc);var $c={},jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.toHex=void 0;function Gm(e){let n=BigInt(e.toString()).toString(16);return n.length%2!==0&&(n=`0${n}`),`0x${n}`}jn.toHex=Gm;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toHex=void 0;var t=jn;Object.defineProperty(e,"toHex",{enumerable:!0,get:function(){return t.toHex}})})($c);var oo={},Un={};const Hm=Ko(Um);Object.defineProperty(Un,"__esModule",{value:!0});Un.shortenAddress=void 0;const Vm=Hm;function Wm(e,t=4){try{const n=(0,Vm.getAddress)(e);return`${n.substring(0,t+2)}...${n.substring(42-t)}`}catch{throw`Invalid 'address' parameter '${e}'.`}}Un.shortenAddress=Wm;var zn={},Mc={exports:{}};/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */(function(e){(function(t,n){e.exports?e.exports=n():t.numeral=n()})(L,function(){var t,n,r="2.0.6",s={},o={},a={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},c={currentLocale:a.currentLocale,zeroFormat:a.zeroFormat,nullFormat:a.nullFormat,defaultFormat:a.defaultFormat,scalePercentBy100:a.scalePercentBy100};function u(i,l){this._input=i,this._value=l}return t=function(i){var l,f,d,p;if(t.isNumeral(i))l=i.value();else if(i===0||typeof i>"u")l=0;else if(i===null||n.isNaN(i))l=null;else if(typeof i=="string")if(c.zeroFormat&&i===c.zeroFormat)l=0;else if(c.nullFormat&&i===c.nullFormat||!i.replace(/[^0-9]+/g,"").length)l=null;else{for(f in s)if(p=typeof s[f].regexps.unformat=="function"?s[f].regexps.unformat():s[f].regexps.unformat,p&&i.match(p)){d=s[f].unformat;break}d=d||t._.stringToNumber,l=d(i)}else l=Number(i)||null;return new u(i,l)},t.version=r,t.isNumeral=function(i){return i instanceof u},t._=n={numberToFormat:function(i,l,f){var d=o[t.options.currentLocale],p=!1,h=!1,g=0,y="",w=1e12,v=1e9,x=1e6,P=1e3,_="",m=!1,b,E,I,S,T,k,N;if(i=i||0,E=Math.abs(i),t._.includes(l,"(")?(p=!0,l=l.replace(/[\(|\)]/g,"")):(t._.includes(l,"+")||t._.includes(l,"-"))&&(T=t._.includes(l,"+")?l.indexOf("+"):i<0?l.indexOf("-"):-1,l=l.replace(/[\+|\-]/g,"")),t._.includes(l,"a")&&(b=l.match(/a(k|m|b|t)?/),b=b?b[1]:!1,t._.includes(l," a")&&(y=" "),l=l.replace(new RegExp(y+"a[kmbt]?"),""),E>=w&&!b||b==="t"?(y+=d.abbreviations.trillion,i=i/w):E<w&&E>=v&&!b||b==="b"?(y+=d.abbreviations.billion,i=i/v):E<v&&E>=x&&!b||b==="m"?(y+=d.abbreviations.million,i=i/x):(E<x&&E>=P&&!b||b==="k")&&(y+=d.abbreviations.thousand,i=i/P)),t._.includes(l,"[.]")&&(h=!0,l=l.replace("[.]",".")),I=i.toString().split(".")[0],S=l.split(".")[1],k=l.indexOf(","),g=(l.split(".")[0].split(",")[0].match(/0/g)||[]).length,S?(t._.includes(S,"[")?(S=S.replace("]",""),S=S.split("["),_=t._.toFixed(i,S[0].length+S[1].length,f,S[1].length)):_=t._.toFixed(i,S.length,f),I=_.split(".")[0],t._.includes(_,".")?_=d.delimiters.decimal+_.split(".")[1]:_="",h&&Number(_.slice(1))===0&&(_="")):I=t._.toFixed(i,0,f),y&&!b&&Number(I)>=1e3&&y!==d.abbreviations.trillion)switch(I=String(Number(I)/1e3),y){case d.abbreviations.thousand:y=d.abbreviations.million;break;case d.abbreviations.million:y=d.abbreviations.billion;break;case d.abbreviations.billion:y=d.abbreviations.trillion;break}if(t._.includes(I,"-")&&(I=I.slice(1),m=!0),I.length<g)for(var B=g-I.length;B>0;B--)I="0"+I;return k>-1&&(I=I.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+d.delimiters.thousands)),l.indexOf(".")===0&&(I=""),N=I+_+(y||""),p?N=(p&&m?"(":"")+N+(p&&m?")":""):T>=0?N=T===0?(m?"-":"+")+N:N+(m?"-":"+"):m&&(N="-"+N),N},stringToNumber:function(i){var l=o[c.currentLocale],f=i,d={thousand:3,million:6,billion:9,trillion:12},p,h,g;if(c.zeroFormat&&i===c.zeroFormat)h=0;else if(c.nullFormat&&i===c.nullFormat||!i.replace(/[^0-9]+/g,"").length)h=null;else{h=1,l.delimiters.decimal!=="."&&(i=i.replace(/\./g,"").replace(l.delimiters.decimal,"."));for(p in d)if(g=new RegExp("[^a-zA-Z]"+l.abbreviations[p]+"(?:\\)|(\\"+l.currency.symbol+")?(?:\\))?)?$"),f.match(g)){h*=Math.pow(10,d[p]);break}h*=(i.split("-").length+Math.min(i.split("(").length-1,i.split(")").length-1))%2?1:-1,i=i.replace(/[^0-9\.]+/g,""),h*=Number(i)}return h},isNaN:function(i){return typeof i=="number"&&isNaN(i)},includes:function(i,l){return i.indexOf(l)!==-1},insert:function(i,l,f){return i.slice(0,f)+l+i.slice(f)},reduce:function(i,l){if(this===null)throw new TypeError("Array.prototype.reduce called on null or undefined");if(typeof l!="function")throw new TypeError(l+" is not a function");var f=Object(i),d=f.length>>>0,p=0,h;if(arguments.length===3)h=arguments[2];else{for(;p<d&&!(p in f);)p++;if(p>=d)throw new TypeError("Reduce of empty array with no initial value");h=f[p++]}for(;p<d;p++)p in f&&(h=l(h,f[p],p,f));return h},multiplier:function(i){var l=i.toString().split(".");return l.length<2?1:Math.pow(10,l[1].length)},correctionFactor:function(){var i=Array.prototype.slice.call(arguments);return i.reduce(function(l,f){var d=n.multiplier(f);return l>d?l:d},1)},toFixed:function(i,l,f,d){var p=i.toString().split("."),h=l-(d||0),g,y,w,v;return p.length===2?g=Math.min(Math.max(p[1].length,h),l):g=h,w=Math.pow(10,g),v=(f(i+"e+"+g)/w).toFixed(g),d>l-g&&(y=new RegExp("\\.?0{1,"+(d-(l-g))+"}$"),v=v.replace(y,"")),v}},t.options=c,t.formats=s,t.locales=o,t.locale=function(i){return i&&(c.currentLocale=i.toLowerCase()),c.currentLocale},t.localeData=function(i){if(!i)return o[c.currentLocale];if(i=i.toLowerCase(),!o[i])throw new Error("Unknown locale : "+i);return o[i]},t.reset=function(){for(var i in a)c[i]=a[i]},t.zeroFormat=function(i){c.zeroFormat=typeof i=="string"?i:null},t.nullFormat=function(i){c.nullFormat=typeof i=="string"?i:null},t.defaultFormat=function(i){c.defaultFormat=typeof i=="string"?i:"0.0"},t.register=function(i,l,f){if(l=l.toLowerCase(),this[i+"s"][l])throw new TypeError(l+" "+i+" already registered.");return this[i+"s"][l]=f,f},t.validate=function(i,l){var f,d,p,h,g,y,w,v;if(typeof i!="string"&&(i+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",i)),i=i.trim(),i.match(/^\d+$/))return!0;if(i==="")return!1;try{w=t.localeData(l)}catch{w=t.localeData(t.locale())}return p=w.currency.symbol,g=w.abbreviations,f=w.delimiters.decimal,w.delimiters.thousands==="."?d="\\.":d=w.delimiters.thousands,v=i.match(/^[^\d]+/),v!==null&&(i=i.substr(1),v[0]!==p)||(v=i.match(/[^\d]+$/),v!==null&&(i=i.slice(0,-1),v[0]!==g.thousand&&v[0]!==g.million&&v[0]!==g.billion&&v[0]!==g.trillion))?!1:(y=new RegExp(d+"{2}"),i.match(/[^\d.,]/g)?!1:(h=i.split(f),h.length>2?!1:h.length<2?!!h[0].match(/^\d+.*\d$/)&&!h[0].match(y):h[0].length===1?!!h[0].match(/^\d+$/)&&!h[0].match(y)&&!!h[1].match(/^\d+$/):!!h[0].match(/^\d+.*\d$/)&&!h[0].match(y)&&!!h[1].match(/^\d+$/)))},t.fn=u.prototype={clone:function(){return t(this)},format:function(i,l){var f=this._value,d=i||c.defaultFormat,p,h,g;if(l=l||Math.round,f===0&&c.zeroFormat!==null)h=c.zeroFormat;else if(f===null&&c.nullFormat!==null)h=c.nullFormat;else{for(p in s)if(d.match(s[p].regexps.format)){g=s[p].format;break}g=g||t._.numberToFormat,h=g(f,d,l)}return h},value:function(){return this._value},input:function(){return this._input},set:function(i){return this._value=Number(i),this},add:function(i){var l=n.correctionFactor.call(null,this._value,i);function f(d,p,h,g){return d+Math.round(l*p)}return this._value=n.reduce([this._value,i],f,0)/l,this},subtract:function(i){var l=n.correctionFactor.call(null,this._value,i);function f(d,p,h,g){return d-Math.round(l*p)}return this._value=n.reduce([i],f,Math.round(this._value*l))/l,this},multiply:function(i){function l(f,d,p,h){var g=n.correctionFactor(f,d);return Math.round(f*g)*Math.round(d*g)/Math.round(g*g)}return this._value=n.reduce([this._value,i],l,1),this},divide:function(i){function l(f,d,p,h){var g=n.correctionFactor(f,d);return Math.round(f*g)/Math.round(d*g)}return this._value=n.reduce([this._value,i],l),this},difference:function(i){return Math.abs(t(this._value).subtract(i).value())}},t.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(i){var l=i%10;return~~(i%100/10)===1?"th":l===1?"st":l===2?"nd":l===3?"rd":"th"},currency:{symbol:"$"}}),function(){t.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(i,l,f){var d=t._.includes(l," BPS")?" ":"",p;return i=i*1e4,l=l.replace(/\s?BPS/,""),p=t._.numberToFormat(i,l,f),t._.includes(p,")")?(p=p.split(""),p.splice(-1,0,d+"BPS"),p=p.join("")):p=p+d+"BPS",p},unformat:function(i){return+(t._.stringToNumber(i)*1e-4).toFixed(15)}})}(),function(){var i={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},l={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},f=i.suffixes.concat(l.suffixes.filter(function(p){return i.suffixes.indexOf(p)<0})),d=f.join("|");d="("+d.replace("B","B(?!PS)")+")",t.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(d)},format:function(p,h,g){var y,w=t._.includes(h,"ib")?l:i,v=t._.includes(h," b")||t._.includes(h," ib")?" ":"",x,P,_;for(h=h.replace(/\s?i?b/,""),x=0;x<=w.suffixes.length;x++)if(P=Math.pow(w.base,x),_=Math.pow(w.base,x+1),p===null||p===0||p>=P&&p<_){v+=w.suffixes[x],P>0&&(p=p/P);break}return y=t._.numberToFormat(p,h,g),y+v},unformat:function(p){var h=t._.stringToNumber(p),g,y;if(h){for(g=i.suffixes.length-1;g>=0;g--){if(t._.includes(p,i.suffixes[g])){y=Math.pow(i.base,g);break}if(t._.includes(p,l.suffixes[g])){y=Math.pow(l.base,g);break}}h*=y||1}return h}})}(),function(){t.register("format","currency",{regexps:{format:/(\$)/},format:function(i,l,f){var d=t.locales[t.options.currentLocale],p={before:l.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:l.match(/([\+|\-|\)|\s|\$]*)$/)[0]},h,g,y;for(l=l.replace(/\s?\$\s?/,""),h=t._.numberToFormat(i,l,f),i>=0?(p.before=p.before.replace(/[\-\(]/,""),p.after=p.after.replace(/[\-\)]/,"")):i<0&&!t._.includes(p.before,"-")&&!t._.includes(p.before,"(")&&(p.before="-"+p.before),y=0;y<p.before.length;y++)switch(g=p.before[y],g){case"$":h=t._.insert(h,d.currency.symbol,y);break;case" ":h=t._.insert(h," ",y+d.currency.symbol.length-1);break}for(y=p.after.length-1;y>=0;y--)switch(g=p.after[y],g){case"$":h=y===p.after.length-1?h+d.currency.symbol:t._.insert(h,d.currency.symbol,-(p.after.length-(1+y)));break;case" ":h=y===p.after.length-1?h+" ":t._.insert(h," ",-(p.after.length-(1+y)+d.currency.symbol.length-1));break}return h}})}(),function(){t.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(i,l,f){var d,p=typeof i=="number"&&!t._.isNaN(i)?i.toExponential():"0e+0",h=p.split("e");return l=l.replace(/e[\+|\-]{1}0/,""),d=t._.numberToFormat(Number(h[0]),l,f),d+"e"+h[1]},unformat:function(i){var l=t._.includes(i,"e+")?i.split("e+"):i.split("e-"),f=Number(l[0]),d=Number(l[1]);d=t._.includes(i,"e-")?d*=-1:d;function p(h,g,y,w){var v=t._.correctionFactor(h,g),x=h*v*(g*v)/(v*v);return x}return t._.reduce([f,Math.pow(10,d)],p,1)}})}(),function(){t.register("format","ordinal",{regexps:{format:/(o)/},format:function(i,l,f){var d=t.locales[t.options.currentLocale],p,h=t._.includes(l," o")?" ":"";return l=l.replace(/\s?o/,""),h+=d.ordinal(i),p=t._.numberToFormat(i,l,f),p+h}})}(),function(){t.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(i,l,f){var d=t._.includes(l," %")?" ":"",p;return t.options.scalePercentBy100&&(i=i*100),l=l.replace(/\s?\%/,""),p=t._.numberToFormat(i,l,f),t._.includes(p,")")?(p=p.split(""),p.splice(-1,0,d+"%"),p=p.join("")):p=p+d+"%",p},unformat:function(i){var l=t._.stringToNumber(i);return t.options.scalePercentBy100?l*.01:l}})}(),function(){t.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(i,l,f){var d=Math.floor(i/60/60),p=Math.floor((i-d*60*60)/60),h=Math.round(i-d*60*60-p*60);return d+":"+(p<10?"0"+p:p)+":"+(h<10?"0"+h:h)},unformat:function(i){var l=i.split(":"),f=0;return l.length===3?(f=f+Number(l[0])*60*60,f=f+Number(l[1])*60,f=f+Number(l[2])):l.length===2&&(f=f+Number(l[0])*60,f=f+Number(l[1])),Number(f)}})}(),t})})(Mc);var ao=Mc.exports,Zm=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zn,"__esModule",{value:!0});zn.formatNumber=void 0;const Km=Zm(ao),Ym=e=>(0,Km.default)(e).format("(0.00a)");zn.formatNumber=Ym;var Gn={},Jm=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.formatPercent=void 0;const Xm=Jm(ao),Qm=e=>(0,Xm.default)(e).format("(0.00%)");Gn.formatPercent=Qm;var Hn={},ey=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hn,"__esModule",{value:!0});Hn.formatUSD=void 0;const Xt=ey(ao),ty=(e,t="$0.00a")=>(typeof e=="string"&&(e=Number(e)),e===0?"$0.00":e<1e-6?"<$0.01":e<1e-4?(0,Xt.default)(e).format("$0.000000a"):e<.001?(0,Xt.default)(e).format("$0.0000a"):e<.01?(0,Xt.default)(e).format("$0.000a"):(0,Xt.default)(e).format(t));Hn.formatUSD=ty;(function(e){var t=L&&L.__createBinding||(Object.create?function(r,s,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,a,c)}:function(r,s,o,a){a===void 0&&(a=o),r[a]=s[o]}),n=L&&L.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&t(s,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(Un,e),n(zn,e),n(Gn,e),n(Hn,e)})(oo);var Fc={},Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.calculateGasMargin=void 0;function ny(e){return e*120n/100n}Vn.calculateGasMargin=ny;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.calculateGasMargin=void 0;var t=Vn;Object.defineProperty(e,"calculateGasMargin",{enumerable:!0,get:function(){return t.calculateGasMargin}})})(Fc);var Oc={},Wn={},Rc={exports:{}};(function(e){(function(t){var n,r=20,s=1,o=1e6,a=1e6,c=-7,u=21,i=!1,l="[big.js] ",f=l+"Invalid ",d=f+"decimal places",p=f+"rounding mode",h=l+"Division by zero",g={},y=void 0,w=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function v(){function m(b){var E=this;if(!(E instanceof m))return b===y?v():new m(b);if(b instanceof m)E.s=b.s,E.e=b.e,E.c=b.c.slice();else{if(typeof b!="string"){if(m.strict===!0)throw TypeError(f+"number");b=b===0&&1/b<0?"-0":String(b)}x(E,b)}E.constructor=m}return m.prototype=g,m.DP=r,m.RM=s,m.NE=c,m.PE=u,m.strict=i,m.roundDown=0,m.roundHalfUp=1,m.roundHalfEven=2,m.roundUp=3,m}function x(m,b){var E,I,S;if(!w.test(b))throw Error(f+"number");for(m.s=b.charAt(0)=="-"?(b=b.slice(1),-1):1,(E=b.indexOf("."))>-1&&(b=b.replace(".","")),(I=b.search(/e/i))>0?(E<0&&(E=I),E+=+b.slice(I+1),b=b.substring(0,I)):E<0&&(E=b.length),S=b.length,I=0;I<S&&b.charAt(I)=="0";)++I;if(I==S)m.c=[m.e=0];else{for(;S>0&&b.charAt(--S)=="0";);for(m.e=E-I-1,m.c=[],E=0;I<=S;)m.c[E++]=+b.charAt(I++)}return m}function P(m,b,E,I){var S=m.c;if(E===y&&(E=m.constructor.RM),E!==0&&E!==1&&E!==2&&E!==3)throw Error(p);if(b<1)I=E===3&&(I||!!S[0])||b===0&&(E===1&&S[0]>=5||E===2&&(S[0]>5||S[0]===5&&(I||S[1]!==y))),S.length=1,I?(m.e=m.e-b+1,S[0]=1):S[0]=m.e=0;else if(b<S.length){if(I=E===1&&S[b]>=5||E===2&&(S[b]>5||S[b]===5&&(I||S[b+1]!==y||S[b-1]&1))||E===3&&(I||!!S[0]),S.length=b--,I)for(;++S[b]>9;)S[b]=0,b--||(++m.e,S.unshift(1));for(b=S.length;!S[--b];)S.pop()}return m}function _(m,b,E){var I=m.e,S=m.c.join(""),T=S.length;if(b)S=S.charAt(0)+(T>1?"."+S.slice(1):"")+(I<0?"e":"e+")+I;else if(I<0){for(;++I;)S="0"+S;S="0."+S}else if(I>0)if(++I>T)for(I-=T;I--;)S+="0";else I<T&&(S=S.slice(0,I)+"."+S.slice(I));else T>1&&(S=S.charAt(0)+"."+S.slice(1));return m.s<0&&E?"-"+S:S}g.abs=function(){var m=new this.constructor(this);return m.s=1,m},g.cmp=function(m){var b,E=this,I=E.c,S=(m=new E.constructor(m)).c,T=E.s,k=m.s,N=E.e,B=m.e;if(!I[0]||!S[0])return I[0]?T:S[0]?-k:0;if(T!=k)return T;if(b=T<0,N!=B)return N>B^b?1:-1;for(k=(N=I.length)<(B=S.length)?N:B,T=-1;++T<k;)if(I[T]!=S[T])return I[T]>S[T]^b?1:-1;return N==B?0:N>B^b?1:-1},g.div=function(m){var b=this,E=b.constructor,I=b.c,S=(m=new E(m)).c,T=b.s==m.s?1:-1,k=E.DP;if(k!==~~k||k<0||k>o)throw Error(d);if(!S[0])throw Error(h);if(!I[0])return m.s=T,m.c=[m.e=0],m;var N,B,A,$,M,q=S.slice(),z=N=S.length,te=I.length,j=I.slice(0,N),G=j.length,J=m,ce=J.c=[],_e=0,se=k+(J.e=b.e-m.e)+1;for(J.s=T,T=se<0?0:se,q.unshift(0);G++<N;)j.push(0);do{for(A=0;A<10;A++){if(N!=(G=j.length))$=N>G?1:-1;else for(M=-1,$=0;++M<N;)if(S[M]!=j[M]){$=S[M]>j[M]?1:-1;break}if($<0){for(B=G==N?S:q;G;){if(j[--G]<B[G]){for(M=G;M&&!j[--M];)j[M]=9;--j[M],j[G]+=10}j[G]-=B[G]}for(;!j[0];)j.shift()}else break}ce[_e++]=$?A:++A,j[0]&&$?j[G]=I[z]||0:j=[I[z]]}while((z++<te||j[0]!==y)&&T--);return!ce[0]&&_e!=1&&(ce.shift(),J.e--,se--),_e>se&&P(J,se,E.RM,j[0]!==y),J},g.eq=function(m){return this.cmp(m)===0},g.gt=function(m){return this.cmp(m)>0},g.gte=function(m){return this.cmp(m)>-1},g.lt=function(m){return this.cmp(m)<0},g.lte=function(m){return this.cmp(m)<1},g.minus=g.sub=function(m){var b,E,I,S,T=this,k=T.constructor,N=T.s,B=(m=new k(m)).s;if(N!=B)return m.s=-B,T.plus(m);var A=T.c.slice(),$=T.e,M=m.c,q=m.e;if(!A[0]||!M[0])return M[0]?m.s=-B:A[0]?m=new k(T):m.s=1,m;if(N=$-q){for((S=N<0)?(N=-N,I=A):(q=$,I=M),I.reverse(),B=N;B--;)I.push(0);I.reverse()}else for(E=((S=A.length<M.length)?A:M).length,N=B=0;B<E;B++)if(A[B]!=M[B]){S=A[B]<M[B];break}if(S&&(I=A,A=M,M=I,m.s=-m.s),(B=(E=M.length)-(b=A.length))>0)for(;B--;)A[b++]=0;for(B=b;E>N;){if(A[--E]<M[E]){for(b=E;b&&!A[--b];)A[b]=9;--A[b],A[E]+=10}A[E]-=M[E]}for(;A[--B]===0;)A.pop();for(;A[0]===0;)A.shift(),--q;return A[0]||(m.s=1,A=[q=0]),m.c=A,m.e=q,m},g.mod=function(m){var b,E=this,I=E.constructor,S=E.s,T=(m=new I(m)).s;if(!m.c[0])throw Error(h);return E.s=m.s=1,b=m.cmp(E)==1,E.s=S,m.s=T,b?new I(E):(S=I.DP,T=I.RM,I.DP=I.RM=0,E=E.div(m),I.DP=S,I.RM=T,this.minus(E.times(m)))},g.plus=g.add=function(m){var b,E,I,S=this,T=S.constructor;if(m=new T(m),S.s!=m.s)return m.s=-m.s,S.minus(m);var k=S.e,N=S.c,B=m.e,A=m.c;if(!N[0]||!A[0])return A[0]||(N[0]?m=new T(S):m.s=S.s),m;if(N=N.slice(),b=k-B){for(b>0?(B=k,I=A):(b=-b,I=N),I.reverse();b--;)I.push(0);I.reverse()}for(N.length-A.length<0&&(I=A,A=N,N=I),b=A.length,E=0;b;N[b]%=10)E=(N[--b]=N[b]+A[b]+E)/10|0;for(E&&(N.unshift(E),++B),b=N.length;N[--b]===0;)N.pop();return m.c=N,m.e=B,m},g.pow=function(m){var b=this,E=new b.constructor("1"),I=E,S=m<0;if(m!==~~m||m<-a||m>a)throw Error(f+"exponent");for(S&&(m=-m);m&1&&(I=I.times(b)),m>>=1,!!m;)b=b.times(b);return S?E.div(I):I},g.prec=function(m,b){if(m!==~~m||m<1||m>o)throw Error(f+"precision");return P(new this.constructor(this),m,b)},g.round=function(m,b){if(m===y)m=0;else if(m!==~~m||m<-o||m>o)throw Error(d);return P(new this.constructor(this),m+this.e+1,b)},g.sqrt=function(){var m,b,E,I=this,S=I.constructor,T=I.s,k=I.e,N=new S("0.5");if(!I.c[0])return new S(I);if(T<0)throw Error(l+"No square root");T=Math.sqrt(I+""),T===0||T===1/0?(b=I.c.join(""),b.length+k&1||(b+="0"),T=Math.sqrt(b),k=((k+1)/2|0)-(k<0||k&1),m=new S((T==1/0?"5e":(T=T.toExponential()).slice(0,T.indexOf("e")+1))+k)):m=new S(T+""),k=m.e+(S.DP+=4);do E=m,m=N.times(E.plus(I.div(E)));while(E.c.slice(0,k).join("")!==m.c.slice(0,k).join(""));return P(m,(S.DP-=4)+m.e+1,S.RM)},g.times=g.mul=function(m){var b,E=this,I=E.constructor,S=E.c,T=(m=new I(m)).c,k=S.length,N=T.length,B=E.e,A=m.e;if(m.s=E.s==m.s?1:-1,!S[0]||!T[0])return m.c=[m.e=0],m;for(m.e=B+A,k<N&&(b=S,S=T,T=b,A=k,k=N,N=A),b=new Array(A=k+N);A--;)b[A]=0;for(B=N;B--;){for(N=0,A=k+B;A>B;)N=b[A]+T[B]*S[A-B-1]+N,b[A--]=N%10,N=N/10|0;b[A]=N}for(N?++m.e:b.shift(),B=b.length;!b[--B];)b.pop();return m.c=b,m},g.toExponential=function(m,b){var E=this,I=E.c[0];if(m!==y){if(m!==~~m||m<0||m>o)throw Error(d);for(E=P(new E.constructor(E),++m,b);E.c.length<m;)E.c.push(0)}return _(E,!0,!!I)},g.toFixed=function(m,b){var E=this,I=E.c[0];if(m!==y){if(m!==~~m||m<0||m>o)throw Error(d);for(E=P(new E.constructor(E),m+E.e+1,b),m=m+E.e+1;E.c.length<m;)E.c.push(0)}return _(E,!1,!!I)},g.toJSON=g.toString=function(){var m=this,b=m.constructor;return _(m,m.e<=b.NE||m.e>=b.PE,!!m.c[0])},g.toNumber=function(){var m=Number(_(this,!0,!0));if(this.constructor.strict===!0&&!this.eq(m.toString()))throw Error(l+"Imprecise conversion");return m},g.toPrecision=function(m,b){var E=this,I=E.constructor,S=E.c[0];if(m!==y){if(m!==~~m||m<1||m>o)throw Error(f+"precision");for(E=P(new I(E),m,b);E.c.length<m;)E.c.push(0)}return _(E,m<=E.e||E.e<=I.NE||E.e>=I.PE,!!S)},g.valueOf=function(){var m=this,b=m.constructor;if(b.strict===!0)throw Error(l+"valueOf disallowed");return _(m,m.e<=b.NE||m.e>=b.PE,!0)},n=v(),n.default=n.Big=n,e.exports?e.exports=n:t.Big=n})(L)})(Rc);var ry=Rc.exports,Cc={exports:{}};(function(e){function t(n){return n.prototype.toFormat=function(s,o,a){if(!this.e&&this.e!==0)return this.toString();var c,u,i,l,f,d,p,h,g,y,w,v,x,P,_,m=this.format||{},b=this.constructor.format||{};if(s!=f?typeof s=="object"?(a=s,s=f):o!=f?typeof o=="object"?(a=o,o=f):typeof a!="object"&&(a={}):a={}:a={},c=this.toFixed(s,o).split("."),h=c[0],g=c[1],p=this.s<0?h.slice(1):h,d=p.length,y=a.decimalSeparator,y==f&&(y=m.decimalSeparator,y==f&&(y=b.decimalSeparator,y==f&&(y="."))),w=a.groupSeparator,w==f&&(w=m.groupSeparator,w==f&&(w=b.groupSeparator)),w&&(v=a.groupSize,v==f&&(v=m.groupSize,v==f&&(v=b.groupSize,v==f&&(v=0))),x=a.secondaryGroupSize,x==f&&(x=m.secondaryGroupSize,x==f&&(x=b.secondaryGroupSize,x==f&&(x=0))),x?(u=+x,i=+v,d-=i):(u=+v,i=+x),u>0&&d>0)){for(l=d%u||u,h=p.substr(0,l);l<d;l+=u)h+=w+p.substr(l,u);i>0&&(h+=w+p.slice(l)),this.s<0&&(h="-"+h)}return g?(P=a.fractionGroupSeparator,P==f&&(P=m.fractionGroupSeparator,P==f&&(P=b.fractionGroupSeparator)),P&&(_=a.fractionGroupSize,_==f&&(_=m.fractionGroupSize,_==f&&(_=b.fractionGroupSize,_==f&&(_=0))),_=+_,_&&(g=g.replace(new RegExp("\\d{"+_+"}\\B","g"),"$&"+P))),h+y+g):h},n.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},n}e.exports&&(e.exports=t)})(Cc);var Dc=Cc.exports,Lc=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wn,"__esModule",{value:!0});const qc=Lc(ry),sy=Lc(Dc);qc.default.strict=!0;Wn.default=(0,sy.default)(qc.default);var io={},D={},Zn={},Kn={},oy="Invariant failed";function ay(e,t){if(!e)throw new Error(oy)}var jc=ay,Yn={};const iy=Ko(Zl);var Uc=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yn,"__esModule",{value:!0});const cy=Uc(iy),uy=Uc(Dc);Yn.default=(0,uy.default)(cy.default);var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});var Xr;(function(e){e[e.ROUND_DOWN=0]="ROUND_DOWN",e[e.ROUND_HALF_UP=1]="ROUND_HALF_UP",e[e.ROUND_UP=3]="ROUND_UP"})(Xr||(Xr={}));Jn.default=Xr;var Xn=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Kn,"__esModule",{value:!0});const Qt=Xn(jc),ut=Xn(Wn),At=Xn(Yn),Me=Xn(Jn),fy={[Me.default.ROUND_DOWN]:At.default.ROUND_DOWN,[Me.default.ROUND_HALF_UP]:At.default.ROUND_HALF_UP,[Me.default.ROUND_UP]:At.default.ROUND_UP},ly={[Me.default.ROUND_DOWN]:ut.default.roundDown,[Me.default.ROUND_HALF_UP]:ut.default.roundHalfUp,[Me.default.ROUND_UP]:ut.default.roundUp};class Z{numerator;denominator;constructor(t,n=1n){this.numerator=typeof t!="bigint"?BigInt(t):t,this.denominator=typeof n!="bigint"?BigInt(n):n}static tryParseFraction(t){if(typeof t=="number"||typeof t=="string"||typeof t=="bigint")return new Z(t);if("numerator"in t&&"denominator"in t)return t;throw new Error("Could not parse fraction")}get quotient(){return this.numerator/this.denominator}get remainder(){return new Z(this.numerator%this.denominator,this.denominator)}invert(){return new Z(this.denominator,this.numerator)}add(t){const n=Z.tryParseFraction(t);return this.denominator===n.denominator?new Z(this.numerator+n.numerator,this.denominator):new Z(this.numerator*n.denominator+n.numerator*this.denominator,this.denominator*n.denominator)}subtract(t){const n=Z.tryParseFraction(t);return this.denominator===n.denominator?new Z(this.numerator-n.numerator,this.denominator):new Z(this.numerator*n.denominator-n.numerator*this.denominator,this.denominator*n.denominator)}lessThan(t){const n=Z.tryParseFraction(t);return this.numerator*n.denominator<n.numerator*this.denominator}equalTo(t){const n=Z.tryParseFraction(t);return this.numerator*n.denominator===n.numerator*this.denominator}greaterThan(t){const n=Z.tryParseFraction(t);return this.numerator*n.denominator>n.numerator*this.denominator}multiply(t){const n=Z.tryParseFraction(t);return new Z(this.numerator*n.numerator,this.denominator*n.denominator)}divide(t){const n=Z.tryParseFraction(t);return new Z(this.numerator*n.denominator,this.denominator*n.numerator)}toSignificant(t,n={groupSeparator:""},r=Me.default.ROUND_HALF_UP){(0,Qt.default)(Number.isInteger(t),`${t} is not an integer.`),(0,Qt.default)(t>0,`${t} is not positive.`),At.default.set({precision:t+1,rounding:fy[r]});const s=new At.default(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return s.toFormat(s.decimalPlaces(),n)}toFixed(t,n={groupSeparator:""},r=Me.default.ROUND_HALF_UP){return(0,Qt.default)(Number.isInteger(t),`${t} is not an integer.`),(0,Qt.default)(t>=0,`${t} is negative.`),ut.default.DP=t,ut.default.RM=ly[r],new ut.default(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,n)}toJSON(){return{n:this.numerator.toString(),d:this.denominator.toString()}}get asFraction(){return new Z(this.numerator,this.denominator)}}Kn.default=Z;var dy=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zn,"__esModule",{value:!0});const py=oo,zc=dy(Kn),Go=new zc.default(100n);function en(e){return new Gc(e.numerator,e.denominator)}class Gc extends zc.default{isPercent=!0;add(t){return en(super.add(t))}subtract(t){return en(super.subtract(t))}multiply(t){return en(super.multiply(t))}divide(t){return en(super.divide(t))}toSignificant(t=5,n,r){return super.multiply(Go).toSignificant(t,n,r)}toFixed(t=2,n,r){return super.multiply(Go).toFixed(t,n,r)}toPercentageString(t=2){return(0,py.formatPercent)(super.toFixed(t+2))}}Zn.default=Gc;var hy=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D,"__esModule",{value:!0});D.ZERO_PERCENT=D.MAX_UINT128=D.MAX_UINT256=D.MAX_SAFE_INTEGER=D._1e6=D._1e9=D._1e12=D._1e18=D._10000=D._9995=D._9994=D._1000=D._997=D._100=D.TEN=D.FIVE=D.THREE=D.TWO=D.ONE=D.ZERO=void 0;const my=hy(Zn);D.ZERO=0n;D.ONE=1n;D.TWO=2n;D.THREE=3n;D.FIVE=5n;D.TEN=10n;D._100=100n;D._997=997n;D._1000=1000n;D._9994=9994n;D._9995=9995n;D._10000=10000n;D._1e18=10n**18n;D._1e12=10n**12n;D._1e9=10n**9n;D._1e6=10n**6n;D.MAX_SAFE_INTEGER=BigInt(Number.MAX_SAFE_INTEGER);D.MAX_UINT256=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");D.MAX_UINT128=2n**128n-1n;D.ZERO_PERCENT=new my.default(0);(function(e){var t=L&&L.__createBinding||(Object.create?function(r,s,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,a,c)}:function(r,s,o,a){a===void 0&&(a=o),r[a]=s[o]}),n=L&&L.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&t(s,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(D,e)})(io);var Hc={},Qn={};Object.defineProperty(Qn,"__esModule",{value:!0});Qn.abs=void 0;function yy(e){return e<0n?-e:e}Qn.abs=yy;var er={};Object.defineProperty(er,"__esModule",{value:!0});er.difference=void 0;function gy(e,t){return e>t?e-t:t-e}er.difference=gy;var tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.maximum=void 0;function by(...e){let t=e[0];for(let n=1;n<e.length;n++){const r=e[n];r>t&&(t=r)}return t}tr.maximum=by;var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.minimum=void 0;function wy(...e){let t=e[0];for(let n=1;n<e.length;n++){const r=e[n];r<t&&(t=r)}return t}nr.minimum=wy;var rr={},vy=L&&L.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rr,"__esModule",{value:!0});rr.sqrt=void 0;const xy=vy(jc),It=io;function Ey(e){if((0,xy.default)(e>=It.ZERO,"NEGATIVE"),e<It.MAX_SAFE_INTEGER)return BigInt(Math.floor(Math.sqrt(Number(e))));let t,n;for(t=e,n=e/It.TWO+It.ONE;n<t;)t=n,n=(e/n+n)/It.TWO;return t}rr.sqrt=Ey;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sqrt=e.minimum=e.maximum=e.difference=e.abs=void 0;var t=Qn;Object.defineProperty(e,"abs",{enumerable:!0,get:function(){return t.abs}});var n=er;Object.defineProperty(e,"difference",{enumerable:!0,get:function(){return n.difference}});var r=tr;Object.defineProperty(e,"maximum",{enumerable:!0,get:function(){return r.maximum}});var s=nr;Object.defineProperty(e,"minimum",{enumerable:!0,get:function(){return s.minimum}});var o=rr;Object.defineProperty(e,"sqrt",{enumerable:!0,get:function(){return o.sqrt}})})(Hc);(function(e){var t=L&&L.__createBinding||(Object.create?function(i,l,f,d){d===void 0&&(d=f);var p=Object.getOwnPropertyDescriptor(l,f);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(i,d,p)}:function(i,l,f,d){d===void 0&&(d=f),i[d]=l[f]}),n=L&&L.__exportStar||function(i,l){for(var f in i)f!=="default"&&!Object.prototype.hasOwnProperty.call(l,f)&&t(l,i,f)},r=L&&L.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(e,"__esModule",{value:!0}),e.Rounding=e.Percent=e.Fraction=e.Decimal=e.Big=void 0;var s=Wn;Object.defineProperty(e,"Big",{enumerable:!0,get:function(){return r(s).default}}),n(io,e);var o=Yn;Object.defineProperty(e,"Decimal",{enumerable:!0,get:function(){return r(o).default}});var a=Kn;Object.defineProperty(e,"Fraction",{enumerable:!0,get:function(){return r(a).default}}),n(Hc,e);var c=Zn;Object.defineProperty(e,"Percent",{enumerable:!0,get:function(){return r(c).default}});var u=Jn;Object.defineProperty(e,"Rounding",{enumerable:!0,get:function(){return r(u).default}})})(Oc);var Vc={},sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.isPromiseFulfilled=void 0;const Iy=e=>e.status==="fulfilled";sr.isPromiseFulfilled=Iy;var or={};Object.defineProperty(or,"__esModule",{value:!0});or.isPromiseRejected=void 0;const Py=e=>e.status==="rejected";or.isPromiseRejected=Py;var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.isZero=void 0;function _y(e){return/^0x0*$/.test(e)}ar.isZero=_y;(function(e){var t=L&&L.__createBinding||(Object.create?function(r,s,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,a,c)}:function(r,s,o,a){a===void 0&&(a=o),r[a]=s[o]}),n=L&&L.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&t(s,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(sr,e),n(or,e),n(ar,e)})(Vc);(function(e){var t=L&&L.__createBinding||(Object.create?function(r,s,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(s,o);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,a,c)}:function(r,s,o,a){a===void 0&&(a=o),r[a]=s[o]}),n=L&&L.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&t(s,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),n(kc,e),n($c,e),n(oo,e),n(Fc,e),n(Oc,e),n(Vc,e)})(Nc);function Ho(e,t,n,r=""){if(Math.abs(e)<1/n||Math.abs(t)<1/n)return Math.abs(e-t)<=10;const s=Math.abs(e/t-1)<n;return s||console.log("Expected close: ",e,t,n,r),s}function K(e){const t=Math.abs(e);if(t<Number.MAX_SAFE_INTEGER)return BigInt(Math.round(e));const n=Math.floor(Math.log(t)/Math.LN2);console.assert(n>=51,"Internal Error 314");const r=n-51,s=Math.round(t/Math.pow(2,r)),o=BigInt(s)*2n**BigInt(r);return e>0?o:o*-1n}var Sy=6e4,By=1e3;function Wt(...e){e.forEach(t=>{t.tokenId||(t.tokenId=`${t.address||""}_${t.chainId}`)})}var Wc=class{address;token0;token1;fee;reserve0;reserve1;minLiquidity;swapGasCost;constructor(e,t,n,r,s,o,a=By,c=Sy){this.address=e||"",this.token0=t,this.token1=n,t&&n&&Wt(this.token0,this.token1),this.fee=r,this.minLiquidity=a,this.swapGasCost=c,this.reserve0=s,this.reserve1=o}updateReserves(e,t){this.reserve0=e,this.reserve1=t}getReserve0(){return this.reserve0}getReserve1(){return this.reserve1}calcOutByInReal(e,t){return this.calcOutByIn(e,t).out}granularity0(){return 1}granularity1(){return 1}alwaysAppropriateForPricing(){return!1}},Zc=class extends Wc{reserve0Number;reserve1Number;constructor(e,t,n,r,s,o){super(e,t,n,r,s,o),this.reserve0Number=Number(s||"0"),this.reserve1Number=Number(o||"0")}updateReserves(e,t){this.reserve0=e,this.reserve0Number=Number(e),this.reserve1=t,this.reserve1Number=Number(t)}calcOutByIn(e,t){const n=t?this.reserve0Number:this.reserve1Number,r=t?this.reserve1Number:this.reserve0Number,s=r*e/(n/(1-this.fee)+e);if(r-s<this.minLiquidity)throw"CP OutOfLiquidity";return{out:s,gasSpent:this.swapGasCost}}calcOutByInReal(e,t){const n=t?this.reserve0Number:this.reserve1Number,r=t?this.reserve1Number:this.reserve0Number,s=Math.floor(e*(1-this.fee)*1e3),o=r*s/(n*1e3+s);return Math.floor(o)}calcInByOut(e,t){const n=t?this.reserve0Number:this.reserve1Number,r=t?this.reserve1Number:this.reserve0Number;return r-e<this.minLiquidity?{inp:Number.POSITIVE_INFINITY,gasSpent:this.swapGasCost}:{inp:n*e/(1-this.fee)/(r-e),gasSpent:this.swapGasCost}}calcCurrentPriceWithoutFee(e){return this.calcPrice(0,e,!1)}calcPrice(e,t,n){const r=t?this.reserve0Number:this.reserve1Number,s=t?this.reserve1Number:this.reserve0Number,o=n?1-this.fee:1,a=r/o;return s*a/(a+e)/(a+e)}calcInputByPrice(e,t,n){const r=t?this.reserve0Number:this.reserve1Number,s=t?this.reserve1Number:this.reserve0Number,o=n?1-this.fee:1,a=r/o;return Math.sqrt(s*a*e)-a}getLiquidity(){return Math.sqrt(this.reserve0Number*this.reserve1Number)}};BigInt("0xfffcb933bd6fad37aa2d162d1a594001");BigInt("0x100000000000000000000000000000000");BigInt("0xfff97272373d413259a46990580e213a");BigInt("0xfff2e50f5f656932ef12357cf3c7fdcc");BigInt("0xffe5caca7e10e4e61c3624eaa0941cd0");BigInt("0xffcb9843d60f6159c9db58835c926644");BigInt("0xff973b41fa98c081472e6896dfb254c0");BigInt("0xff2ea16466c96a3843ec78b326b52861");BigInt("0xfe5dee046a99a2a811c461f1969c3053");BigInt("0xfcbe86c7900a88aedcffc83b479aa3a4");BigInt("0xf987a7253ac413176f2b074cf7815e54");BigInt("0xf3392b0822b70005940c7a398e4b70f3");BigInt("0xe7159475a2c29b7443b29c7fa6e889d9");BigInt("0xd097f3bdfd2022b8845ad8f792aa5825");BigInt("0xa9f746462d870fdf8a65dc1f90e061e5");BigInt("0x70d869a156d2a1b890bb3df62baf32f7");BigInt("0x31be135f97d08fd981231505542fcfa6");BigInt("0x9aa508b5b7a84e1c677de54f3e99bc9");BigInt("0x5d6af8dedb81196699c329225ee604");BigInt("0x2216e584f5fa1ea926041bedfe98");BigInt("0x48a170391f7dc42444e8fa2");K(1e18);function Kc(e,t){return t.base===0n||t.elastic===0n?e:e*t.elastic/t.base}function Ay(e,t){return t.base===0n||t.elastic===0n?e:e*t.base/t.elastic}var nt=class{elastic2Base;rebaseBI;constructor(e){this.rebaseBI=e,e!==void 0?e.base===0n||e.elastic===0n?this.elastic2Base=1:this.elastic2Base=parseInt(e.elastic.toString())/parseInt(e.base.toString()):this.elastic2Base=1}toAmount(e){return e*this.elastic2Base}toShare(e){return e/this.elastic2Base}toAmountBI(e){return Kc(e,this.rebaseBI)}};function tn(e,t,n){return Kc(e,t)*K(1e12)/K(10**n)}function Vo(e,t,n){const r=e*K(10**n)/K(1e12);return Ay(r,t)}var Ty=class extends Wc{k;decimals0;decimals1;decimalsCompensation0;decimalsCompensation1;total0;total1;constructor(e,t,n,r,s,o,a,c,u,i){super(e,t,n,r,s===void 0?void 0:tn(s,u,a),o===void 0?void 0:tn(o,i,c)),this.k=0n,this.decimals0=a,this.decimals1=c,e?(this.decimalsCompensation0=10**(12-a),this.decimalsCompensation1=10**(12-c),this.total0=new nt(u),this.total1=new nt(i)):(this.decimalsCompensation0=0,this.decimalsCompensation1=0,this.total0=void 0,this.total1=void 0)}getReserve0(){return Vo(this.reserve0,this.total0.rebaseBI,this.decimals0)}getReserve1(){return Vo(this.reserve1,this.total1.rebaseBI,this.decimals1)}granularity0(){return Math.max(1/this.decimalsCompensation0,1)}granularity1(){return Math.max(1/this.decimalsCompensation1,1)}updateReserves(e,t){this.k=0n,this.reserve0=tn(e,this.total0.rebaseBI,this.decimals0),this.reserve1=tn(t,this.total1.rebaseBI,this.decimals1)}updateReservesAmounts(e,t){this.k=0n,this.reserve0=e*K(1e12)/K(10**this.decimals0),this.reserve1=t*K(1e12)/K(10**this.decimals1)}getTotal0(){return this.total0.rebaseBI}getTotal1(){return this.total1.rebaseBI}updateTotals(e,t){this.total0=new nt(e),this.total1=new nt(t)}updateTotal0(e){this.total0=new nt(e)}updateTotal1(e){this.total1=new nt(e)}computeK(){if(this.k===0n){const e=this.reserve0,t=this.reserve1;this.k=e*t*(e*e+t*t)}return this.k}computeY(e,t){const n=this.computeK(),r=e<<1n,s=e*3n,o=e*e*e;let a=t,c=t;for(let u=0;u<255;++u){const i=c*c;if(c=(i*c*r+n)/(i*s+o),Nc.abs(c-a)<=1)break;a=c}return c}calcOutByIn(e,t,n=!0){e=t?this.total0.toAmount(e):this.total1.toAmount(e),e*=t?this.decimalsCompensation0:this.decimalsCompensation1;const r=t?this.reserve0:this.reserve1,s=t?this.reserve1:this.reserve0,o=r+K(Math.floor(e*(1-this.fee))),a=this.computeY(o,s),c=parseInt((s-a).toString())-1,u=Math.max(c,0),l=(t?this.total1.toShare(u):this.total0.toShare(u))/(t?this.decimalsCompensation1:this.decimalsCompensation0),f=t?this.getReserve1():this.getReserve0();if(n&&f-K(l)<this.minLiquidity)throw new Error("StableSwap OutOfLiquidity");return{out:l,gasSpent:this.swapGasCost}}calcOutByInReal(e,t){return Math.floor(this.calcOutByIn(e,t,!1).out)}calcInByOut(e,t){e=t?this.total1.toAmount(e):this.total0.toAmount(e),e*=t?this.decimalsCompensation1:this.decimalsCompensation0;const n=t?this.reserve0:this.reserve1,s=(t?this.reserve1:this.reserve0)-K(Math.ceil(e));if(s<this.minLiquidity)return{inp:Number.POSITIVE_INFINITY,gasSpent:this.swapGasCost};const o=this.computeY(s,n),a=parseInt((o-n).toString())/(1-this.fee),u=(t?this.total0.toShare(a):this.total1.toShare(a))/(t?this.decimalsCompensation0:this.decimalsCompensation1);return{inp:Math.max(u,1),gasSpent:this.swapGasCost}}calcCurrentPriceWithoutFee(e){const t=this.reserve0>this.reserve1,n=t?this.reserve0:this.reserve1,r=parseInt(n.toString()),o=parseInt(this.computeK().toString())/r/2,a=-o/r,c=r**6/27+o*o,u=6*r**5/27+2*o*a,i=Math.sqrt(c),l=1/2/i*u,f=i+o,d=l+a,p=i-o,h=l-a,g=f**(1/3),y=1/3*g/f*d,w=p**(1/3),v=1/3*w/p*h,x=y-v,P=t?this.total1.toShare(this.total0.toAmount(x)):this.total0.toShare(this.total1.toAmount(x)),_=t===e?-P:-1/P,m=this.decimalsCompensation0/this.decimalsCompensation1;return e?_*m:_/m}},Wo=65535;function mn(e,t){return{status:"NoWay",fromToken:e,toToken:t,amountIn:0,amountInBI:0n,amountOut:0,amountOutBI:0n,legs:[],gasSpent:0,totalAmountOut:0,totalAmountOutBI:0n}}var Ny=class{pool;vert0;vert1;canBeUsed;direction;amountInPrevious;amountOutPrevious;spentGas;spentGasNew;bestEdgeIncome;constructor(e,t,n){this.pool=e,this.vert0=t,this.vert1=n,this.amountInPrevious=0,this.amountOutPrevious=0,this.canBeUsed=!0,this.direction=!0,this.spentGas=0,this.spentGasNew=0,this.bestEdgeIncome=0}cleanTmpData(){this.amountInPrevious=0,this.amountOutPrevious=0,this.canBeUsed=!0,this.direction=!0,this.spentGas=0,this.spentGasNew=0,this.bestEdgeIncome=0}reserve(e){return e===this.vert0?this.pool.getReserve0():this.pool.getReserve1()}calcOutput(e,t){let n,r;if(e===this.vert1)if(this.direction)if(t<this.amountOutPrevious){const{inp:s,gasSpent:o}=this.pool.calcInByOut(this.amountOutPrevious-t,!0);n=this.amountInPrevious-s,r=o}else{const{out:s,gasSpent:o}=this.pool.calcOutByIn(t-this.amountOutPrevious,!1);n=s+this.amountInPrevious,r=o}else{const{out:s,gasSpent:o}=this.pool.calcOutByIn(this.amountOutPrevious+t,!1);n=s-this.amountInPrevious,r=o}else if(this.direction){const{out:s,gasSpent:o}=this.pool.calcOutByIn(this.amountInPrevious+t,!0);n=s-this.amountOutPrevious,r=o}else if(t<this.amountInPrevious){const{inp:s,gasSpent:o}=this.pool.calcInByOut(this.amountInPrevious-t,!1);n=this.amountOutPrevious-s,r=o}else{const{out:s,gasSpent:o}=this.pool.calcOutByIn(t-this.amountInPrevious,!0);n=s+this.amountOutPrevious,r=o}return{out:n,gasSpent:r-this.spentGas}}calcInput(e,t){let n,r;if(e===this.vert1)if(this.direction){const{inp:s,gasSpent:o}=this.pool.calcInByOut(this.amountOutPrevious+t,!0);n=s-this.amountInPrevious,r=o}else if(t<this.amountOutPrevious){const{out:s,gasSpent:o}=this.pool.calcOutByIn(this.amountOutPrevious-t,!1);n=this.amountInPrevious-s,r=o}else{const{inp:s,gasSpent:o}=this.pool.calcInByOut(t-this.amountOutPrevious,!0);n=s+this.amountInPrevious,r=o}else if(this.direction)if(t<this.amountInPrevious){const{out:s,gasSpent:o}=this.pool.calcOutByIn(this.amountInPrevious-t,!0);n=this.amountOutPrevious-s,r=o}else{const{inp:s,gasSpent:o}=this.pool.calcInByOut(t-this.amountInPrevious,!1);n=s+this.amountOutPrevious,r=o}else{const{inp:s,gasSpent:o}=this.pool.calcInByOut(this.amountInPrevious+t,!1);n=s-this.amountOutPrevious,r=o}return{inp:n,gasSpent:r-this.spentGas}}checkMinimalLiquidityExceededAfterSwap(e,t){if(e===this.vert0){const n=parseInt(this.pool.getReserve1().toString());return this.direction?n-t-this.amountOutPrevious<this.pool.minLiquidity:n-t+this.amountOutPrevious<this.pool.minLiquidity}else{const n=parseInt(this.pool.getReserve0().toString());return this.direction?n-t+this.amountInPrevious<this.pool.minLiquidity:n-t-this.amountInPrevious<this.pool.minLiquidity}}testApply(e,t,n){console.assert(this.amountInPrevious*this.amountOutPrevious>=0);const r=this.direction?this.amountInPrevious:-this.amountInPrevious,s=this.direction?this.amountOutPrevious:-this.amountOutPrevious,o=e.getNeibour(this);let a,c=0,u=0;if(o){const i=e===this.vert0?t:-n,l=e===this.vert0?n:-t,f=r+i,d=s+l;console.assert(f*d>=0),f>=0?(a=!0,c=f,u=d):(a=!1,c=-f,u=-d)}else console.error("Error 221");if(a){const i=this.pool.calcOutByIn(c,!0).out,l=Ho(u,i,1e-6);return l||console.log("Err 225-1 !!",u,i,Math.abs(i/u-1)),l}else{const i=this.pool.calcOutByIn(u,!1).out,l=Ho(c,i,1e-6);return l||console.log("Err 225-2!!",c,i,Math.abs(i/c-1)),l}}applySwap(e){console.assert(this.amountInPrevious*this.amountOutPrevious>=0);const t=this.direction?this.amountInPrevious:-this.amountInPrevious,n=this.direction?this.amountOutPrevious:-this.amountOutPrevious,r=e.getNeibour(this);if(r){const s=e===this.vert0?e.bestIncome:-r.bestIncome,o=e===this.vert0?r.bestIncome:-e.bestIncome,a=t+s,c=n+o;console.assert(a*c>=0),a>=0?(this.direction=!0,this.amountInPrevious=a,this.amountOutPrevious=c):(this.direction=!1,this.amountInPrevious=-a,this.amountOutPrevious=-c)}else console.error("Error 221");this.spentGas=this.spentGasNew}},ky=class{token;edges;price;gasPrice;bestIncome;gasSpent;bestTotal;bestSource;checkLine;constructor(e){this.token=e,Wt(this.token),this.edges=[],this.price=0,this.gasPrice=0,this.bestIncome=0,this.gasSpent=0,this.bestTotal=0,this.bestSource=void 0,this.checkLine=-1}cleanTmpData(){this.bestIncome=0,this.gasSpent=0,this.bestTotal=0,this.bestSource=void 0,this.checkLine=-1}getNeibour(e){if(e)return e.vert0===this?e.vert1:e.vert0}getOutputEdges(){return this.edges.filter(e=>!(!e.canBeUsed||e.amountInPrevious===0||e.direction!==(e.vert0===this)))}getInputEdges(){return this.edges.filter(e=>!(!e.canBeUsed||e.amountInPrevious===0||e.direction===(e.vert0===this)))}},Yc=class{vertices;edges;tokens;constructor(e,t,n,r,s=0,o=!1){const a=n instanceof Array?n:[{chainId:n.chainId,baseToken:n,gasPrice:r||0}];Wt(...a.map(u=>u.baseToken)),this.vertices=[],this.edges=[],this.tokens=new Map,e.forEach(u=>{const i=this.getOrCreateVertice(u.token0),l=this.getOrCreateVertice(u.token1),f=new Ny(u,i,l);i.edges.push(f),l.edges.push(f),this.edges.push(f)});const c=this.getVert(t);c!==void 0&&this.setPricesStable(c,1,a,s,o)}getVert(e){return this.tokens.get(e.tokenId)}cleanTmpData(){this.edges.forEach(e=>e.cleanTmpData()),this.vertices.forEach(e=>e.cleanTmpData())}setPricesStable(e,t,n,r=0,s=!1){const o=new Set;let a=[];const c=new Map,u=f=>c.get(f);function i(f,d){f.price=d;const p=f.edges.filter(g=>{if(o.has(f.getNeibour(g)))return!1;if(g.pool.alwaysAppropriateForPricing())return!0;const y=d*parseInt(g.reserve(f).toString());return y<r?!1:(c.set(g,y),!0)});p.sort((g,y)=>u(g)-u(y));const h=[];for(;a.length&&p.length;)u(a[0])<u(p[0])?h.push(a.shift()):h.push(p.shift());a=[...h,...a,...p],o.add(f)}for(s&&console.log(`Pricing: Initial token ${e.token.symbol} price=${t}`),i(e,t);a.length>0;){const f=a.pop(),[d,p]=o.has(f.vert1)?[f.vert1,f.vert0]:[f.vert0,f.vert1];if(o.has(p))continue;const h=f.pool.calcCurrentPriceWithoutFee(d===f.vert1);s&&console.log(`Pricing: + Token ${p.token.symbol} price=${d.price*h} from ${d.token.symbol} pool=${f.pool.address} liquidity=${c.get(f)}`),i(p,d.price*h)}const l=new Map;n.forEach(f=>{const d=this.getVert(f.baseToken)?.price||0;l.set(f.chainId,f.gasPrice*d)}),o.forEach(f=>{const d=l.get(f.token.chainId);console.assert(d!==void 0,"Error 427"),console.assert(f.price!==0,"Error 428"),f.gasPrice=d/f.price})}setPricesStableInsideChain(e,t,n){const r=new Set;let s=[];const o=new Map,a=u=>o.get(u);function c(u,i,l){u.price=i,u.gasPrice=l;const f=u.edges.filter(p=>u.getNeibour(p)?.token.chainId===u.token.chainId&&!r.has(u.getNeibour(p)));f.forEach(p=>o.set(p,i*parseInt(p.reserve(u).toString()))),f.sort((p,h)=>a(p)-a(h));const d=[];for(;s.length&&f.length;)a(s[0])<a(f[0])?d.push(s.shift()):d.push(f.shift());s=[...d,...s,...f],r.add(u)}for(c(e,t,n);s.length>0;){const u=s.pop(),[i,l]=r.has(u.vert1)?[u.vert1,u.vert0]:[u.vert0,u.vert1];if(r.has(l))continue;const f=u.pool.calcCurrentPriceWithoutFee(i===u.vert1);c(l,i.price*f,i.gasPrice/f)}}setPrices(e,t,n){if(e.price!==0)return;e.price=t,e.gasPrice=n,e.edges.map(s=>[s,parseInt(s.reserve(e).toString())]).sort(([,s],[,o])=>o-s).forEach(([s])=>{const o=s.vert0===e?s.vert1:s.vert0;if(o.price!==0)return;const a=s.pool.calcCurrentPriceWithoutFee(e===s.vert1);this.setPrices(o,t*a,n/a)})}getOrCreateVertice(e){let t=this.getVert(e);return t||(t=new ky(e),this.vertices.push(t),this.tokens.set(e.tokenId,t),t)}findBestPathExactIn(e,t,n){const r=this.getVert(e),s=this.getVert(t);if(!r||!s)return;this.edges.forEach(u=>{u.bestEdgeIncome=0,u.spentGasNew=0}),this.vertices.forEach(u=>{u.bestIncome=0,u.gasSpent=0,u.bestTotal=0,u.bestSource=void 0,u.checkLine=-1}),r.bestIncome=n,r.bestTotal=n;const o=new Set,a=[r];let c=0;for(;;){let u,i,l=0;if(a.forEach((f,d)=>{(i===void 0||f.bestTotal>i)&&(i=f.bestTotal,u=f,l=d)}),!u)return;if(u.checkLine=c++,u===s){const f=[];for(let d=s;d?.bestSource;d=d.getNeibour(d.bestSource))f.unshift(d.bestSource);return{path:f,output:s.bestIncome,gasSpent:s.gasSpent,totalOutput:s.bestTotal}}a.splice(l,1),u.edges.forEach(f=>{const d=u===f.vert0?f.vert1:f.vert0;if(o.has(d))return;let p,h;try{const{out:x,gasSpent:P}=f.calcOutput(u,u.bestIncome);if(!isFinite(x)||!isFinite(P))return;p=x,h=P}catch{f.bestEdgeIncome=-1;return}const g=u.gasSpent+h,y=d.price/s.price,w=d.gasPrice*y,v=p*y-g*w;console.assert(f.bestEdgeIncome===0,"Error 373"),f.bestEdgeIncome=p*y,f.spentGasNew=f.spentGas+h,d.bestSource||a.push(d),(!d.bestSource||v>d.bestTotal)&&(d.bestIncome=p,d.gasSpent=g,d.bestTotal=v,d.bestSource=f)}),o.add(u)}}findBestPathExactOut(e,t,n){const r=this.getVert(t),s=this.getVert(e);if(!r||!s)return;this.edges.forEach(u=>{u.bestEdgeIncome=0,u.spentGasNew=0}),this.vertices.forEach(u=>{u.bestIncome=0,u.gasSpent=0,u.bestTotal=0,u.bestSource=void 0,u.checkLine=-1}),r.bestIncome=n,r.bestTotal=n;const o=new Set,a=[r];let c=0;for(;;){let u,i,l=0;if(a.forEach((f,d)=>{(i===void 0||f.bestTotal<i)&&(i=f.bestTotal,u=f,l=d)}),!u)return;if(u.checkLine=c++,u===s){const f=[];for(let d=s;d?.bestSource;d=d.getNeibour(d.bestSource))f.push(d.bestSource);return{path:f,input:s.bestIncome,gasSpent:s.gasSpent,totalInput:s.bestTotal}}a.splice(l,1),u.edges.forEach(f=>{const d=u===f.vert0?f.vert1:f.vert0;if(o.has(d))return;let p,h;try{const{inp:x,gasSpent:P}=f.calcInput(u,u.bestIncome);if(!isFinite(x)||!isFinite(P)||x<0)return;p=x,h=P}catch{return}const g=u.gasSpent+h,y=d.price/s.price,w=d.gasPrice*y,v=p*y+g*w;console.assert(f.bestEdgeIncome===0,"Error 373"),f.bestEdgeIncome=p*y,f.spentGasNew=f.spentGas+h,d.bestSource||a.push(d),(!d.bestSource||v<d.bestTotal)&&(d.bestIncome=p,d.gasSpent=g,d.bestTotal=v,d.bestSource=f)}),o.add(u)}}addPath(e,t,n){let r=e;n.forEach(s=>{r?(s.applySwap(r),r=r.getNeibour(s)):console.error("Unexpected 315")})}getPrimaryPriceForPath(e,t){let n=1,r=e;return t.forEach(s=>{const o=s.vert0===r,a=s.pool.calcCurrentPriceWithoutFee(o);n*=a,r=r.getNeibour(s)}),n}findBestRouteExactIn(e,t,n,r){let s;typeof n=="bigint"?(s=n,n=Number(n)):s=K(n);let o=[];if(Array.isArray(r)){const x=r.reduce((P,_)=>P+_,0);o=r.map(P=>P/x)}else for(let x=0;x<r;++x)o.push(1/r);this.edges.forEach(x=>{x.amountInPrevious=0,x.amountOutPrevious=0,x.direction=!0});let a=0,c=0,u=0,i=0,l,f;for(f=0;f<o.length;++f){const x=this.findBestPathExactIn(e,t,n*o[f]);if(x)a+=x.output,c+=x.gasSpent,u+=x.totalOutput,this.addPath(this.getVert(e),this.getVert(t),x.path),i+=o[f];else break}if(f===0||a===0)return mn(e,t);let d;f<o.length?d="Partial":d="Success",this.removeEdgesWithLowFlow(.001);const p=this.getVert(e),h=this.getVert(t),{legs:g,gasSpent:y}=this.getRouteLegs(p,h);console.assert(y<=c,"Internal Error 491"),a=this.updateLegsAmountOut(g,n*i),u=a-h.gasPrice*y,a===0&&(d="NoWay",u=0);let w,v;try{w=a/n/i;const x=this.getVert(t)?.price,P=this.getVert(e)?.price;l=x&&P?P/x:void 0,v=l!==void 0?1-w/l:void 0}catch{}return{status:d,fromToken:e,toToken:t,primaryPrice:l,swapPrice:w,priceImpact:v,amountIn:n*i,amountInBI:d==="Success"?s:K(n*i),amountOut:a,amountOutBI:K(a),legs:g,gasSpent:y,totalAmountOut:u,totalAmountOutBI:K(u)}}findBestRouteExactOut(e,t,n,r){let s=[];if(Array.isArray(r)){const x=r.reduce((P,_)=>P+_,0);s=r.map(P=>P/x)}else for(let x=0;x<r;++x)s.push(1/r);this.edges.forEach(x=>{x.amountInPrevious=0,x.amountOutPrevious=0,x.direction=!0});let o=0,a=0,c=0,u,i;for(i=0;i<s.length;++i){const x=this.findBestPathExactOut(e,t,n*s[i]);if(x)o+=x.input,a+=x.gasSpent,this.addPath(this.getVert(e),this.getVert(t),x.path),c+=s[i];else break}if(i==0)return mn(e,t);let l;i<s.length?l="Partial":l="Success";const f=this.removeEdgesWithLowFlow(.001),d=this.getVert(e),p=this.getVert(t),{legs:h,gasSpent:g,topologyWasChanged:y}=this.getRouteLegs(d,p);console.assert(g<=a,"Internal Error 491"),(y||f>0)&&(o=this.calcLegsAmountIn(h,n));let w,v;try{w=n/o;const x=this.getVert(t)?.price,P=this.getVert(e)?.price;u=x&&P?P/x:void 0,v=u!==void 0?1-w/u:void 0}catch{}return{status:l,fromToken:e,toToken:t,primaryPrice:u,swapPrice:w,priceImpact:v,amountIn:o,amountInBI:K(o),amountOut:n*c,amountOutBI:K(n*c),legs:h,gasSpent:g,totalAmountOut:n-g*p.gasPrice,totalAmountOutBI:K(n-g*p.gasPrice)}}getRouteLegs(e,t){const{vertices:n,topologyWasChanged:r}=this.cleanTopology(e,t),s=[];let o=0;return n.forEach(a=>{const c=a.getOutputEdges().map(l=>{const f=this.edgeFrom(l);return f?[l,f.vert,f.amount]:[l]});let u=c.reduce((l,f)=>l+f[2],0);if(u<=0)return;const i=u;c.forEach((l,f)=>{const d=l[2],p=f+1===c.length?1:d/u,h=l[0],g=h.pool instanceof Ty?"Stable":h.pool instanceof Zc?"Classic":"Unknown";s.push({poolAddress:h.pool.address,poolType:g,poolFee:h.pool.fee,tokenFrom:a.token,tokenTo:a.getNeibour(h).token,assumedAmountIn:h.direction?h.amountInPrevious:h.amountOutPrevious,assumedAmountOut:h.direction?h.amountOutPrevious:h.amountInPrevious,swapPortion:p,absolutePortion:d/i}),o+=h.pool.calcOutByIn(h.direction?h.amountInPrevious:h.amountOutPrevious,h.direction).gasSpent,u-=d}),console.assert(u/i<1e-12,"Error 281")}),{legs:s,gasSpent:o,topologyWasChanged:r}}edgeFrom(e){if(e.amountInPrevious!==0)return e.direction?{vert:e.vert0,amount:e.amountInPrevious}:{vert:e.vert1,amount:e.amountOutPrevious}}removeEdgesWithLowFlow(e){const t=[];return this.vertices.forEach(n=>{const r=n.getOutputEdges();if(r.length<=1)return;const s=r.map(a=>{const c=this.edgeFrom(a);if(c!==void 0)return c.amount;console.error("Tines: Internal Error 1123")}),o=s.reduce((a,c)=>(a+=c,a),0);r.forEach((a,c)=>{s[c]/o<e&&t.push(a)})}),t.forEach(n=>{n.canBeUsed=!1}),t.length}updateLegsAmountOut(e,t){const n=new Map;return n.set(e[0].tokenFrom.tokenId,t),e.forEach(r=>{const s=this.getVert(r.tokenFrom);console.assert(s!==void 0,"Internal Error 570");const o=s.edges.find(h=>h.pool.address===r.poolAddress);console.assert(o!==void 0,"Internel Error 569");const a=o.pool,c=s===o.vert0,u=n.get(r.tokenFrom.tokenId);console.assert(u!==void 0,"Internal Error 564");const i=Math.round(r.swapPortion*Wo)/Wo,l=Math.floor(u*i);n.set(r.tokenFrom.tokenId,u-l);const f=a.calcOutByInReal(l,c),d=s.getNeibour(o),p=n.get(d.token.tokenId);n.set(d.token.tokenId,(p||0)+f),r.assumedAmountIn=l,r.assumedAmountOut=f}),n.get(e[e.length-1].tokenTo.tokenId)||0}calcLegsAmountIn(e,t){const n=new Map;e.forEach(s=>{const o=n.get(s.tokenFrom.tokenId)||0;n.set(s.tokenFrom.tokenId,o+s.assumedAmountOut)});const r=new Map;r.set(e[e.length-1].tokenTo.tokenId,t);for(let s=e.length-1;s>=0;--s){const o=e[s],a=this.getVert(o.tokenTo);console.assert(a!==void 0,"Internal Error 884");const c=a.edges.find(y=>y.pool.address===o.poolAddress);console.assert(c!==void 0,"Internel Error 888");const u=c.pool,i=a===c.vert1,l=r.get(o.tokenTo.tokenId);console.assert(l!==void 0,"Internal Error 893");const f=n.get(o.tokenFrom.tokenId);console.assert(f!==void 0,"Internal Error 903");const d=l*o.assumedAmountOut/f,p=u.calcInByOut(d,i).inp,h=a.getNeibour(c),g=r.get(h.token.tokenId);r.set(h.token.tokenId,(g||0)+p)}return r.get(e[0].tokenFrom.tokenId)||0}cleanTopology(e,t){let n=!1,r=this.topologySort(e,t);if(r.status!==2){for(n=!0;r.status===0;)this.removeWeakestEdge(r.vertices),r=this.topologySort(e,t);if(r.status===3&&(this.removeDeadEnds(r.vertices),r=this.topologySort(e,t)),console.assert(r.status===2,"Internal Error 563"),r.status!==2)return{vertices:[],topologyWasChanged:n}}return{vertices:r.vertices,topologyWasChanged:n}}removeDeadEnds(e){e.forEach(t=>{t.getInputEdges().forEach(n=>{n.canBeUsed=!1})})}removeWeakestEdge(e){let t,n,r=Number.MAX_VALUE;e.forEach((s,o)=>{const a=o===0?e[e.length-1]:e[o-1];let c=0;s.getOutputEdges().forEach(u=>{s.getNeibour(u)===a&&(c+=u.direction?u.amountOutPrevious:u.amountInPrevious)}),c<r&&(t=s,n=a,r=c)}),t!==void 0&&t.getOutputEdges().forEach(s=>{t.getNeibour(s)===n&&(s.canBeUsed=!1)})}topologySort(e,t){const n=new Map,r=[],s=[],o=[];function a(u){const i=n.get(u);if(i===2||i===3)return i;if(i===1)return console.assert(s.length===0,"Internal Error 566"),s.push(u),1;n.set(u,1);let l=!1;const f=u.getOutputEdges();for(let d=0;d<f.length;++d){const p=f[d],h=a(u.getNeibour(p));if(h===0)return 0;if(h===1)return s[0]===u?0:(s.push(u),1);h===2&&(l=!0)}return l?(console.assert(u!==t,"Internal Error 589"),r.push(u),n.set(u,2),2):u!==t?(o.push(u),n.set(u,3),3):(r.push(u),n.set(u,2),2)}const c=a(e);return c===0?{status:0,vertices:s}:o.length?{status:3,vertices:o}:c===2?{status:2,vertices:r.reverse()}:(console.assert(!0,"Internal Error 612"),{status:1,vertices:[]})}};function $y(e){if(!(e.primaryPrice===void 0||e.swapPrice===void 0)){let t=1;return e.legs.forEach(n=>{t*=1-n.poolFee}),Math.max(0,1-e.swapPrice/e.primaryPrice/t)}}var My=12,Zo=100;function Jc(e,t,n){typeof t=="bigint"&&(t=parseInt(t.toString()));const r=$y(e);if(!r)return My;const s=Math.sqrt(e.gasSpent*(n||0)*t/r),o=Math.round(t/s);return isFinite(o)?Math.max(1,Math.min(o,Zo)):Zo}function Fy(e,t){return e.status==="NoWay"?t:t.status==="NoWay"?e:e.status==="Partial"&&t.status==="Success"?t:t.status==="Partial"&&e.status==="Success"||e.totalAmountOut>t.totalAmountOut?e:t}function Xc(e){const t=new Map;return e.forEach(n=>{const r=n.token0.chainId||0,s=n.token1.chainId||0,o=r<s?`_${r}_${s}`:`_${s}_${r}`;t.set(n.address+o,n)}),Array.from(t.values())}function Oy(e,t,n,r,s,o,a){if(r=Xc(r),Qc(r,s),Wt(e,t),e.tokenId===t.tokenId)return mn(e,t);const c=new Yc(r,e,s,o),u=c.findBestRouteExactIn(e,t,n,1);c.cleanTmpData();const i=Jc(u,n,c.getVert(e)?.gasPrice);if(i===1)return u;const l=c.findBestRouteExactIn(e,t,n,i);return Fy(u,l)}function Ry(e,t,n){if(e.status==="NoWay")return t;if(t.status==="NoWay")return e;if(e.status==="Partial"&&t.status==="Success")return t;if(t.status==="Partial"&&e.status==="Success")return e;const r=e.amountIn+e.gasSpent*n,s=t.amountIn+t.gasSpent*n;return r<s?e:t}function Cy(e,t,n,r,s,o,a){if(r=Xc(r),Qc(r,s),Wt(e,t),e.tokenId===t.tokenId)return mn(e,t);typeof n=="bigint"&&(n=parseInt(n.toString()));const c=new Yc(r,e,s,o),u=c.findBestRouteExactOut(e,t,n,1);c.cleanTmpData();const i=c.getVert(e),l=Jc(u,u.amountIn,i?.gasPrice);if(l===1)return u;const f=c.findBestRouteExactOut(e,t,n,l);return Ry(u,f,i?.gasPrice||0)}function Qc(e,t){t instanceof Array&&t.forEach(o=>{if(o.chainId!==o.baseToken.chainId)throw new Error(`Chain '${o.chainId}' has baseToken with '${o.baseToken.chainId}' that are not the same`)});const n=t instanceof Array?t.map(o=>o.chainId):[t.chainId],r=new Set(n),s=o=>{if(!r.has(o.chainId))throw new Error(`Token ${o.name}/${o.address} chainId='${o.chainId}' is not in list of possible chains: [${n.join(", ")}]`)};e.forEach(o=>{s(o.token0),s(o.token1)})}BigInt("0xfffcb933bd6fad37aa2d162d1a594001");BigInt("0x100000000000000000000000000000000");BigInt("0xfff97272373d413259a46990580e213a");BigInt("0xfff2e50f5f656932ef12357cf3c7fdcc");BigInt("0xffe5caca7e10e4e61c3624eaa0941cd0");BigInt("0xffcb9843d60f6159c9db58835c926644");BigInt("0xff973b41fa98c081472e6896dfb254c0");BigInt("0xff2ea16466c96a3843ec78b326b52861");BigInt("0xfe5dee046a99a2a811c461f1969c3053");BigInt("0xfcbe86c7900a88aedcffc83b479aa3a4");BigInt("0xf987a7253ac413176f2b074cf7815e54");BigInt("0xf3392b0822b70005940c7a398e4b70f3");BigInt("0xe7159475a2c29b7443b29c7fa6e889d9");BigInt("0xd097f3bdfd2022b8845ad8f792aa5825");BigInt("0xa9f746462d870fdf8a65dc1f90e061e5");BigInt("0x70d869a156d2a1b890bb3df62baf32f7");BigInt("0x31be135f97d08fd981231505542fcfa6");BigInt("0x9aa508b5b7a84e1c677de54f3e99bc9");BigInt("0x5d6af8dedb81196699c329225ee604");BigInt("0x2216e584f5fa1ea926041bedfe98");BigInt("0x48a170391f7dc42444e8fa2");const Dy=e=>e.reduce((t,n)=>t+n,0),Vy=e=>e.length>0?e.reduce((t,n)=>t*n,1):0,nn=({name:e,symbol:t,id:n,decimals:r})=>({name:e,symbol:t,address:n,decimals:r}),Wy=e=>Dy(e.map(({quantity:t})=>t)),Zy=e=>Ne(e.isNFT?Kl(BigInt(e.reserve),e.decimals):BigInt(e.reserve),{decimals:e.decimals}),Ky=(e,t,n)=>t>0?e*n/t:0n,Yy=(e,t,n)=>t>0?e*n/t:0n,Jy=(e,t,n)=>n>0?e*t/n:0n,Xy=(e,t)=>e+e*BigInt(Math.ceil(t*1e3))/1000n,Qy=(e,t)=>e-e*BigInt(Math.ceil(t*1e3))/1000n,eg=(e,t,n,r,s)=>{if(r<=0||!t)return;const o=nn(e),a=nn(t),c=n.map(({id:i,token0:l,token1:f,reserve0:d,reserve1:p,totalFee:h})=>new Zc(i,nn(l),nn(f),Number(h??0),Nt(d.toString(),l.decimals),Nt(p.toString(),l.decimals))),u=[{baseToken:{name:"ETH",symbol:"ETH",address:"0x0",decimals:18},gasPrice:0}];return s?Cy(o,a,r,c,u):Oy(o,a,r,c,u)},tg=e=>e.volume24hUSD?vn(e.volume24hUSD):e.isNFTNFT||!e.token0.isNFT?`${Ne(e.volume24h0,{type:"compact"})} ${e.token0.symbol}`:`${Ne(e.volume24h1,{type:"compact"})} ${e.token1.symbol}`,ng=e=>e.reserveUSD?vn(e.reserveUSD):e.isNFTNFT||!e.token0.isNFT?`${Ne(BigInt(e.token0.reserve)*2n,{decimals:e.token0.decimals,type:"compact"})} ${e.token0.symbol}`:`${Ne(BigInt(e.token1.reserve)*2n,{decimals:e.token1.decimals,type:"compact"})} ${e.token1.symbol}`,rg=e=>{const t=Number(e.lpFee);return e.volumeUSD?vn(e.volumeUSD*t):e.isNFTNFT||!e.token0.isNFT?`${Ne(e.volume0*t,{type:"compact"})} ${e.token0.symbol}`:`${Ne(e.volume1*t,{type:"compact"})} ${e.token1.symbol}`},sg=e=>{const t=Number(e.lpFee);return e.volume24hUSD?vn(e.volume24hUSD*t):e.isNFTNFT||!e.token0.isNFT?`${Ne(e.volume24h0*t,{type:"compact"})} ${e.token0.symbol}`:`${Ne(e.volume24h1*t,{type:"compact"})} ${e.token1.symbol}`};export{Ii as C,ng as a,rg as b,Xy as c,Qy as d,eg as e,Wy as f,tg as g,Yy as h,Jy as i,Zy as j,sg as k,op as l,Vy as m,Va as n,pc as o,Xp as p,Ky as q,Ee as r,Dy as s,zs as t,Hy as u,jt as v,oh as w,_c as x};
