import { type LoaderFunctionArgs, defer } from "@remix-run/node";
import {
  Await,
  Link,
  useLoaderData,
  useNavigate,
  useRevalidator,
} from "@remix-run/react";
import { Suspense, useCallback } from "react";

import { fetchPools } from "~/api/pools.server";
import { Badge } from "~/components/Badge";
import { PoolImage } from "~/components/pools/PoolImage";
import { Skeleton } from "~/components/ui/Skeleton";
import { useFocusInterval } from "~/hooks/useFocusInterval";
import { ENV } from "~/lib/env.server";
import { getCollectionIdsMapForGame, getTokenIdsMapForGame } from "~/lib/game";
import { formatPercent } from "~/lib/number";
import {
  getPoolFeesDisplay,
  getPoolReserveDisplay,
  getPoolVolume24hDisplay,
} from "~/lib/pools";
import type { PoolsHandle } from "./pools";

export const handle: PoolsHandle = {
  tab: "pools",
};

export function loader({ request }: LoaderFunctionArgs) {
  const url = new URL(request.url);
  const search = url.searchParams.get("search")?.toLowerCase();
  const game = url.searchParams.get("game");
  /*
  const fetchAndFilterPools = async () => {

    const pools = await fetchPools();
    const gameTokenIdsMap = game
      ? getTokenIdsMapForGame(game, ENV.PUBLIC_CHAIN_ID)
      : {};
    const gameCollectionIdsMap = game
      ? getCollectionIdsMapForGame(game, ENV.PUBLIC_CHAIN_ID)
      : {};

    return pools.filter(
      ({ name, token0, token1, collections }) =>
        // Filter by search query
        (!search ||
          name.toLowerCase().includes(search) ||
          token0.symbol.toLowerCase().includes(search) ||
          token1.symbol.toLowerCase().includes(search) ||
          token0.name.toLowerCase().includes(search) ||
          token1.name.toLowerCase().includes(search) ||
          collections.some((collection) =>
            collection.name.toLowerCase().includes(search),
          )) &&
        // Filter by selected game
        (!game ||
          !!gameTokenIdsMap[token0.id] ||
          !!gameTokenIdsMap[token1.id] ||
          collections.some(
            (collection) => gameCollectionIdsMap[collection.id.toLowerCase()],
          )),
    );
  };

  return defer({
    pools: fetchAndFilterPools(),
  });
  */
  return {
    pools: [
      {
        id: "0x6210775833732f144058713c9b36de09afd1ca3b",
        version: "V1",
        token0: {
          id: "0x0caadd427a6feb5b5fc1137eb05aa7ddd9c08ce9",
          name: "VEE",
          symbol: "VEE",
          decimals: 18,
          derivedMAGIC: "0.001256102638234773389685845218283959",
          isNFT: false,
          isMAGIC: false,
          isETH: false,
          vaultCollections: [],
          vaultReserveItems: [],
          image: "/img/tokens/vee.png",
          collections: [],
          urlSlug: "",
          collectionId: "",
          collectionTokenIds: [],
          priceUSD: 0.0004992978342960962,
          reserve: "243721708413592700330494537",
        },
        token1: {
          id: "0x539bde0d7dbd336b79148aa742883198bbf60342",
          name: "MAGIC",
          symbol: "MAGIC",
          decimals: 18,
          derivedMAGIC: "1",
          isNFT: false,
          isMAGIC: true,
          isETH: false,
          vaultCollections: [],
          vaultReserveItems: [],
          image: "/img/tokens/magic.png",
          collections: [],
          urlSlug: "",
          collectionId: "",
          collectionTokenIds: [],
          priceUSD: 0.39749764,
          reserve: "306139480933399957566962",
        },
        reserve0: "243721708.413592700330494537",
        reserve1: "306139.480933399957566962",
        reserveUSD: 240271.6551774283,
        totalSupply: "6827270791664701315433460",
        txCount: "10654",
        volume0: 1678596309.676119,
        volume1: 1747799.8867158724,
        volumeUSD: 1073703.514658393,
        lpFee: "0.00375",
        protocolFee: "0.00125",
        royaltiesFee: "0",
        royaltiesBeneficiary: null,
        totalFee: "0.005",
        hourData: [
          {
            date: "1729594800",
            reserve0: "243721708.413592700330494537",
            reserve1: "306139.480933399957566962",
            reserveUSD: "240271.6551774283136126957565178801",
            volume0: "3099146.194042494593229323",
            volume1: "3855.455835891285396758",
            volumeUSD: "1512.96518882287133209946629746",
            txCount: "2",
          },
          {
            date: "1729591200",
            reserve0: "246820854.60763519492372386",
            reserve1: "302284.025097508672170204",
            reserveUSD: "237245.7247997825709484968239229601",
            volume0: "46220.894831390014104021",
            volume1: "56.766872815676435365",
            volumeUSD: "22.27656238437991208086743255",
            txCount: "1",
          },
          {
            date: "1729587600",
            reserve0: "246867075.502466584937827881",
            reserve1: "302227.258224692995734839",
            reserveUSD: "238434.3979131093419057112702038",
            volume0: "89791.044551903354448604",
            volume1: "110.228356296419511597",
            volumeUSD: "43.4809089042338630255269737",
            txCount: "1",
          },
          {
            date: "1729584000",
            reserve0: "246956866.547018488292276485",
            reserve1: "302117.029868396576223242",
            reserveUSD: "241217.70497990617322000065134224",
            volume0: "200000",
            volume1: "244.135600353311304639",
            volumeUSD: "97.6760469763979502501682825174873",
            txCount: "1",
          },
          {
            date: "1729580400",
            reserve0: "246756866.547018488292276485",
            reserve1: "302361.165468749887527881",
            reserveUSD: "244197.2361260913685386634008030601",
            volume0: "76409.193220668384010479",
            volume1: "93.357133276806586649",
            volumeUSD: "37.81034249748693002864852459203688",
            txCount: "2",
          },
          {
            date: "1729576800",
            reserve0: "246680457.353797819908266006",
            reserve1: "302454.52260202669411453",
            reserveUSD: "244272.6345453411036014347917978001",
            volume0: "40878.678633569171867412",
            volume1: "49.979202337434702356",
            volumeUSD: "20.23983300840217870540577320681396",
            txCount: "1",
          },
          {
            date: "1729569600",
            reserve0: "246639578.675164250736398594",
            reserve1: "302504.501804364128816886",
            reserveUSD: "244279.4275118260396165543021060801",
            volume0: "50189.928063909537377739",
            volume1: "61.385979437017106382",
            volumeUSD: "24.85482451796397278612783880026361",
            txCount: "1",
          },
          {
            date: "1729566000",
            reserve0: "246589388.747100341199020855",
            reserve1: "302565.887783801145923268",
            reserveUSD: "243058.9657026790155616572493183199",
            volume0: "40282.068814432247522914",
            volume1: "49.488909164371367652",
            volumeUSD: "19.90468253152687543040066769624069",
            txCount: "3",
          },
          {
            date: "1729562400",
            reserve0: "246592920.815914773446543769",
            reserve1: "302561.35129296551729092",
            reserveUSD: "244301.0935818621630524150841072",
            volume0: "46766.840740643019176771",
            volume1: "57.414619365951073581",
            volumeUSD: "23.21763278888539530756551134848474",
            txCount: "2",
          },
          {
            date: "1729558800",
            reserve0: "246586487.65665541646572054",
            reserve1: "302569.022509507791287019",
            reserveUSD: "243079.6864609211754601339176320999",
            volume0: "17374.000000000000524288",
            volume1: "21.424030197162342798",
            volumeUSD: "8.6058818907872231074398741",
            txCount: "1",
          },
          {
            date: "1729555200",
            reserve0: "246603861.656655416466244828",
            reserve1: "302547.598479310628944221",
            reserveUSD: "243062.4746971396010139190378839001",
            volume0: "259519.23829022024210785",
            volume1: "319.358771169774849002",
            volumeUSD: "127.9142582151515610786175686292905",
            txCount: "3",
          },
          {
            date: "1729551600",
            reserve0: "246847080.894945636708352678",
            reserve1: "302248.138141057516971327",
            reserveUSD: "243128.86173783664105916123521704",
            volume0: "106701.031454675089177512",
            volume1: "130.942706838395688319",
            volumeUSD: "52.77143584712535431315977814320012",
            txCount: "3",
          },
          {
            date: "1729537200",
            reserve0: "246945147.20764320540168327",
            reserve1: "302127.706670064080345538",
            reserveUSD: "244203.8492153748622757891306583601",
            volume0: "72077.419433573189883781",
            volume1: "88.423358439624209559",
            volumeUSD: "35.73542580635915640983731149",
            txCount: "1",
          },
          {
            date: "1729533600",
            reserve0: "247017224.627076778591567051",
            reserve1: "302039.283311624456135979",
            reserveUSD: "245446.1042673117207674220194154599",
            volume0: "8660",
            volume1: "10.536403449979736402",
            volumeUSD: "4.302459608158689532590854704222935",
            txCount: "1",
          },
          {
            date: "1729522800",
            reserve0: "247008564.627076778591567051",
            reserve1: "302049.819715074435872381",
            reserveUSD: "248330.66402550686565222210814054",
            volume0: "301200.000000000008388608",
            volume1: "369.707016690503010278",
            volumeUSD: "151.9572553344306655648082256929082",
            txCount: "2",
          },
          {
            date: "1729519200",
            reserve0: "247307364.627076778599955659",
            reserve1: "301683.032833864786172219",
            reserveUSD: "247988.76864447538693109637249878",
            volume0: "22320.45",
            volume1: "27.094370253009600845",
            volumeUSD: "11.19097467929701427663856951540565",
            txCount: "1",
          },
          {
            date: "1729515600",
            reserve0: "247285044.177076778599955659",
            reserve1: "301710.127204117795773064",
            reserveUSD: "244992.3222559031726519041457646401",
            volume0: "4317939.746024447808296125",
            volume1: "5276.947660128764256077",
            volumeUSD: "2126.971138502267690016088087095888",
            txCount: "2",
          },
          {
            date: "1729504800",
            reserve0: "244672103.193461621168628424",
            reserve1: "304907.752476848690321287",
            reserveUSD: "252698.84318555650527666089606902",
            volume0: "11730",
            volume1: "14.545408602220555075",
            volumeUSD: "6.057407836607400081479637497021326",
            txCount: "1",
          },
          {
            date: "1729501200",
            reserve0: "244660373.193461621168628424",
            reserve1: "304922.297885450910876362",
            reserveUSD: "250161.8024807713139315699856536799",
            volume0: "392315.283758872183005021",
            volume1: "489.650479770909249046",
            volumeUSD: "203.05572634776813986451476817",
            txCount: "6",
          },
          {
            date: "1729497600",
            reserve0: "245052688.477220493351633445",
            reserve1: "304432.647405680001627316",
            reserveUSD: "254878.58060364980256722941027576",
            volume0: "123541.092696768747938745",
            volume1: "153.861034491048221697",
            volumeUSD: "64.40814153061150933175989371",
            txCount: "2",
          },
          {
            date: "1729494000",
            reserve0: "245176229.56991726209957219",
            reserve1: "304278.786371188953405619",
            reserveUSD: "256162.70720740610514882115476436",
            volume0: "34370.281779312509018356",
            volume1: "42.793912049258212347",
            volumeUSD: "18.00048560715373514901194877",
            txCount: "2",
          },
          {
            date: "1729490400",
            reserve0: "245210599.851696574608590546",
            reserve1: "304235.992459139695193272",
            reserveUSD: "257280.6961605840092606547087551999",
            volume0: "139658.219059218369172849",
            volume1: "173.69801182304379568",
            volumeUSD: "73.6031776634507207838141153",
            txCount: "2",
          },
          {
            date: "1729486800",
            reserve0: "245350258.070755792977763395",
            reserve1: "304062.294447316651397592",
            reserveUSD: "258354.20909072033207857834597392",
            volume0: "250281.888412298710821339",
            volume1: "310.805958886648259129",
            volumeUSD: "132.37979466600737683185886045",
            txCount: "3",
          },
          {
            date: "1729483200",
            reserve0: "245600539.959168091688584734",
            reserve1: "303751.488488430003138463",
            reserveUSD: "259471.2465247720425211445801708201",
            volume0: "105631.517569899061374138",
            volume1: "130.978582811957193007",
            volumeUSD: "55.94240265189864549941628749",
            txCount: "2",
          },
          {
            date: "1729479600",
            reserve0: "245706171.476737990749958872",
            reserve1: "303620.509905618045945456",
            reserveUSD: "262013.3450310144412439204919465601",
            volume0: "328132.632169553508602125",
            volume1: "404.799137573682929071",
            volumeUSD: "175.0668339083072141852368457990639",
            txCount: "2",
          },
          {
            date: "1729476000",
            reserve0: "245378038.844568437241356747",
            reserve1: "304025.309043191728874527",
            reserveUSD: "259612.58655944530091572510693736",
            volume0: "130423.768253521808439245",
            volume1: "162.004102260387069388",
            volumeUSD: "69.16908357633624109689998992",
            txCount: "3",
          },
          {
            date: "1729472400",
            reserve0: "245508462.612821959049795992",
            reserve1: "303863.304940931341805139",
            reserveUSD: "260680.3122359336790222900841624201",
            volume0: "113059.556057530709721085",
            volume1: "140.288962995420315548",
            volumeUSD: "60.17602336684014462602882772",
            txCount: "2",
          },
          {
            date: "1729468800",
            reserve0: "245621522.168879489759517077",
            reserve1: "303723.015977935921489591",
            reserveUSD: "263675.6541529270979138915574459201",
            volume0: "646774.236341923451290084",
            volume1: "799.471070387749616469",
            volumeUSD: "346.4852663614738919309852667758194",
            txCount: "9",
          },
        ],
        dayData: [
          {
            date: "1729555200",
            reserve0: "243721708.413592700330494537",
            reserve1: "306139.480933399957566962",
            reserveUSD: "240271.6551774283136126957565178801",
            volume0: "3966578.081189230564369401",
            volume1: "4918.995310305210676779",
            volumeUSD: "1938.946162538087193900234744600618",
            txCount: "18",
          },
          {
            date: "1729468800",
            reserve0: "246847080.894945636708352678",
            reserve1: "302248.138141057516971327",
            reserveUSD: "243128.86173783664105916123521704",
            volume0: "7104817.123011595155129013",
            volume1: "8726.548177452601917937",
            volumeUSD: "3587.273033294093589494129268243529",
            txCount: "44",
          },
          {
            date: "1729382400",
            reserve0: "244974747.932537566308226993",
            reserve1: "304522.48704832367110606",
            reserveUSD: "257914.4738330637389034718421532",
            volume0: "38310631.752399878833438246",
            volume1: "48878.875913957977807118",
            volumeUSD: "20735.29600417898496874968499019768",
            txCount: "345",
          },
          {
            date: "1729296000",
            reserve0: "231683535.403981257608288455",
            reserve1: "321820.402379620840857352",
            reserveUSD: "235855.36962071780907977755637872",
            volume0: "6836422.925312345519361905",
            volume1: "9597.048778486146923446",
            volumeUSD: "3555.825691181099608495517829585662",
            txCount: "62",
          },
          {
            date: "1729209600",
            reserve0: "226941457.59099310662280709",
            reserve1: "328511.177946656453247112",
            reserveUSD: "234205.6712002165532073355064272",
            volume0: "1938261.835388644990919027",
            volume1: "2813.966004476892037094",
            volumeUSD: "990.4086692396499972834907046745578",
            txCount: "44",
          },
          {
            date: "1729123200",
            reserve0: "225502599.554175553544213127",
            reserve1: "330598.491292044238470928",
            reserveUSD: "226843.3814413111645785947234572799",
            volume0: "8744661.060235175908649911",
            volume1: "12689.89646669647864366",
            volumeUSD: "4347.718316939113322132336154807679",
            txCount: "33",
          },
          {
            date: "1729036800",
            reserve0: "227088072.031447845903525514",
            reserve1: "328233.89010014397681812",
            reserveUSD: "231644.2144145513206331522276544",
            volume0: "10593055.77703565013161642",
            volume1: "15053.749108894983317146",
            volumeUSD: "5290.147788825684093969130356465269",
            txCount: "56",
          },
          {
            date: "1728950400",
            reserve0: "229846478.094683490266551328",
            reserve1: "324226.71665725746240259",
            reserveUSD: "230289.9885139782149147161551104",
            volume0: "5006710.6334015866136505",
            volume1: "7092.260593508784000087",
            volumeUSD: "2548.720127860248055419748013446247",
            txCount: "42",
          },
        ],
        name: "MAGIC / VEE",
        hasNFT: false,
        isNFTNFT: false,
        collections: [],
        volume24h0: 11071395.204200827,
        volume24h1: 13645.543487757814,
        volume24hUSD: 5526.219195832182,
        volume1wUSD: 42994.33579405697,
        apy: 0.06621183561510424,
      },
      {
        id: "0x33f4668f5a9a36514d85657e699569dbda3d77f1",
        version: "V1",
        token0: {
          id: "0x539bde0d7dbd336b79148aa742883198bbf60342",
          name: "MAGIC",
          symbol: "MAGIC",
          decimals: 18,
          derivedMAGIC: "1",
          isNFT: false,
          isMAGIC: true,
          isETH: false,
          vaultCollections: [],
          vaultReserveItems: [],
          image: "/img/tokens/magic.png",
          collections: [],
          urlSlug: "",
          collectionId: "",
          collectionTokenIds: [],
          priceUSD: 0.39749764,
          reserve: "139488109227830414591577",
        },
        token1: {
          id: "0x9e64d3b9e8ec387a9a58ced80b71ed815f8d82b5",
          name: "Smolcoin",
          symbol: "SMOL",
          decimals: 18,
          derivedMAGIC: "0.000002324970753852755990947678754627225",
          isNFT: false,
          isMAGIC: false,
          isETH: false,
          vaultCollections: [],
          vaultReserveItems: [],
          image: "/img/tokens/smol.png",
          collections: [],
          urlSlug: "",
          collectionId: "",
          collectionTokenIds: [],
          priceUSD: 9.241703877254913e-7,
          reserve: "59995640373833456489957010209",
        },
        reserve0: "139488.109227830414591577",
        reserve1: "59995640373.833456489957010209",
        reserveUSD: 109476.36933189894,
        totalSupply: "85812460278691370906882924",
        txCount: "14748",
        volume0: 5538921.684116947,
        volume1: 1103414490083.9192,
        volumeUSD: 5670416.445201307,
        lpFee: "0.00375",
        protocolFee: "0.00125",
        royaltiesFee: "0",
        royaltiesBeneficiary: null,
        totalFee: "0.005",
        hourData: [
          {
            date: "1729591200",
            reserve0: "139488.109227830414591577",
            reserve1: "59995640373.833456489957010209",
            reserveUSD: "109476.36933189893467380386517798",
            volume0: "1144.880357152160082723",
            volume1: "494626857.860826383026402869",
            volumeUSD: "449.3586372607102052459930543423858",
            txCount: "4",
          },
          {
            date: "1729587600",
            reserve0: "139643.22887067825555743",
            reserve1: "59926955440.66313614782657402",
            reserveUSD: "110167.922622216746223041016806",
            volume0: "406.502927270184950612",
            volume1: "174431945.788478025948655467",
            volumeUSD: "160.45499761758637247687540184",
            txCount: "4",
          },
          {
            date: "1729576800",
            reserve0: "139236.725943408070606818",
            reserve1: "60101387386.451614173775229487",
            reserveUSD: "112452.35012212717898256520638468",
            volume0: "49.979202337434702356",
            volume1: "21516473.463643875593350232",
            volumeUSD: "20.18245804759217306780415828",
            txCount: "1",
          },
          {
            date: "1729558800",
            reserve0: "139186.746741070635904462",
            reserve1: "60122903859.915258049368579719",
            reserveUSD: "111820.6697986470997896785178858",
            volume0: "645.000000000000524288",
            volume1: "278715250.599014045341572388",
            volumeUSD: "259.1867990749062917801158467619276",
            txCount: "1",
          },
          {
            date: "1729548000",
            reserve0: "139831.74674107063642875",
            reserve1: "59844188609.316244004027007331",
            reserveUSD: "114250.59698933686527377250315",
            volume0: "1216.842531933392443476",
            volume1: "520083266.797114478415056722",
            volumeUSD: "497.3056766122630056487084863253972",
            txCount: "3",
          },
          {
            date: "1729522800",
            reserve0: "139147.085188589427444688",
            reserve1: "60136262511.339647004518902391",
            reserveUSD: "114399.96254489295048348301508192",
            volume0: "110.499450026160884333",
            volume1: "47860997.941689446820739166",
            volumeUSD: "45.5418067039275939054058895777996",
            txCount: "2",
          },
          {
            date: "1729519200",
            reserve0: "139257.584638615588329021",
            reserve1: "60088401513.397957557698163225",
            reserveUSD: "113889.35352259534819128816775872",
            volume0: "66.57960677310745141",
            volume1: "28801137.956508087251273631",
            volumeUSD: "27.29431054885369921515903239315526",
            txCount: "1",
          },
          {
            date: "1729508400",
            reserve0: "139324.164245388695780431",
            reserve1: "60059600375.441449470446889594",
            reserveUSD: "115428.21427943678587665928815908",
            volume0: "142.515404289042436795",
            volume1: "61556978.155025304679137249",
            volumeUSD: "59.15300818233794349954320581072367",
            txCount: "1",
          },
          {
            date: "1729501200",
            reserve0: "139466.679649677738217226",
            reserve1: "59998043397.286424165767752345",
            reserveUSD: "115094.59565820366111473455770348",
            volume0: "3356.248202954308906212",
            volume1: "1429473095.972291367561790353",
            volumeUSD: "1387.633566706534970243799356495598",
            txCount: "5",
          },
          {
            date: "1729497600",
            reserve0: "141539.927852632047123438",
            reserve1: "59114971005.828154441307828892",
            reserveUSD: "118500.74628082996628443378226868",
            volume0: "306.460181448242001209",
            volume1: "127928485.942853421946366623",
            volumeUSD: "128.7367441505832663073242560808715",
            txCount: "6",
          },
          {
            date: "1729494000",
            reserve0: "141272.789773580490084041",
            reserve1: "59234716718.883387224881553562",
            reserveUSD: "118933.10314113216040148706556604",
            volume0: "654.544309660508154339",
            volume1: "275108456.802029065195117879",
            volumeUSD: "275.8341507015639693130352613931858",
            txCount: "2",
          },
          {
            date: "1729490400",
            reserve0: "141601.859174007694381912",
            reserve1: "59095825175.685416290076671441",
            reserveUSD: "119747.2547920660252433187129792",
            volume0: "186.708494527744239477",
            volume1: "77789242.728906018839008728",
            volumeUSD: "79.094922731911531689012513",
            txCount: "3",
          },
          {
            date: "1729486800",
            reserve0: "141415.150679479950142435",
            reserve1: "59173614418.414322308915680169",
            reserveUSD: "120156.9549215263033020604956581",
            volume0: "222.876827045186274523",
            volume1: "93127243.382732253171203342",
            volumeUSD: "94.88855886736701740120594382",
            txCount: "2",
          },
          {
            date: "1729479600",
            reserve0: "141192.273852434763867912",
            reserve1: "59266741661.797054562086883511",
            reserveUSD: "121843.74493050986276478354891312",
            volume0: "132.196458348869482081",
            volume1: "55605419.891578164425524049",
            volumeUSD: "57.1583016718344431505145574395972",
            txCount: "1",
          },
          {
            date: "1729468800",
            reserve0: "141324.470310783633349993",
            reserve1: "59211136241.905476397661359462",
            reserveUSD: "123430.83926525873033807098929674",
            volume0: "381.800322319934650689",
            volume1: "160012257.440665434266074721",
            volumeUSD: "166.2207004783444741239395938484323",
            txCount: "5",
          },
        ],
        dayData: [
          {
            date: "1729555200",
            reserve0: "139488.109227830414591577",
            reserve1: "59995640373.833456489957010209",
            reserveUSD: "109476.36933189893467380386517798",
            volume0: "2246.362486759780259979",
            volume1: "969290527.711962329909980956",
            volumeUSD: "889.1828920007950425707884612243134",
            txCount: "10",
          },
          {
            date: "1729468800",
            reserve0: "139831.74674107063642875",
            reserve1: "59844188609.316244004027007331",
            reserveUSD: "114250.59698933686527377250315",
            volume0: "6777.271789326496924544",
            volume1: "2877346583.011393042571292463",
            volumeUSD: "2818.861747355521914497648096184761",
            txCount: "31",
          },
          {
            date: "1729382400",
            reserve0: "141706.270633103568000682",
            reserve1: "59051123984.464810963395284741",
            reserveUSD: "120018.49718313612564952578168684",
            volume0: "35436.725887134988025041",
            volume1: "16417519615.659747921265309748",
            volumeUSD: "15112.16079054464984089018734622131",
            txCount: "356",
          },
          {
            date: "1729296000",
            reserve0: "137947.615790718952152933",
            reserve1: "60612040795.894754222634989241",
            reserveUSD: "101098.89140042010423423608269638",
            volume0: "6973.680586721869576201",
            volume1: "3058061409.730537553678454093",
            volumeUSD: "2546.13191666723884230441544641793",
            txCount: "56",
          },
          {
            date: "1729209600",
            reserve0: "140316.26365907970657756",
            reserve1: "59578116940.490687138486657532",
            reserveUSD: "99531.3715862264163817118370576",
            volume0: "7503.764722635475312103",
            volume1: "3123688713.359266183121276979",
            volumeUSD: "2643.446064931470862558514651414755",
            txCount: "25",
          },
          {
            date: "1729123200",
            reserve0: "144774.909002134748179563",
            reserve1: "57730618976.057618703931992585",
            reserveUSD: "99338.71681492661829854938498488",
            volume0: "4575.143761582781456228",
            volume1: "1807492453.385331191001868172",
            volumeUSD: "1582.935538257772523184258364317222",
            txCount: "28",
          },
          {
            date: "1729036800",
            reserve0: "147284.875618961383742949",
            reserve1: "56977681128.908356266793016704",
            reserveUSD: "103417.07106161291977406574268524",
            volume0: "10347.423865326651087131",
            volume1: "4133403545.610007805450260971",
            volumeUSD: "3659.328717379891811617072038432811",
            txCount: "41",
          },
          {
            date: "1728950400",
            reserve0: "141367.158047190026834566",
            reserve1: "59348350354.654062688359720007",
            reserveUSD: "101974.89693162230487045675812876",
            volume0: "8101.473368632049600006",
            volume1: "3251400059.030900361056635435",
            volumeUSD: "2931.883395344515509892618344936935",
            txCount: "33",
          },
        ],
        name: "MAGIC / SMOL",
        hasNFT: false,
        isNFTNFT: false,
        collections: [],
        volume24h0: 9023.634276086275,
        volume24h1: 3846637110.723356,
        volume24hUSD: 3708.0446393563166,
        volume1wUSD: 32183.93106248186,
        apy: 0.11496088162326057,
      },
      {
        id: "0x7bc27907ac638dbceb74b1fb02fc154da3e15334",
        version: "V1",
        token0: {
          id: "0x539bde0d7dbd336b79148aa742883198bbf60342",
          name: "MAGIC",
          symbol: "MAGIC",
          decimals: 18,
          derivedMAGIC: "1",
          isNFT: false,
          isMAGIC: true,
          isETH: false,
          vaultCollections: [],
          vaultReserveItems: [],
          image: "/img/tokens/magic.png",
          collections: [],
          urlSlug: "",
          collectionId: "",
          collectionTokenIds: [],
          priceUSD: 0.39749764,
          reserve: "68737066623870774147419",
        },
        token1: {
          id: "0xccd05a0fcfc1380e9da27862adb2198e58e0d66f",
          name: "Anima",
          symbol: "ANIMA",
          decimals: 18,
          derivedMAGIC: "0.01035657160732818821621681396728536",
          isNFT: false,
          isMAGIC: false,
          isETH: false,
          vaultCollections: [],
          vaultReserveItems: [],
          image: "/img/tokens/anima.png",
          collections: [],
          urlSlug: "",
          collectionId: "",
          collectionTokenIds: [],
          priceUSD: 0.004116712772403961,
          reserve: "6637048362146526805209913",
        },
        reserve0: "68737.066623870774147419",
        reserve1: "6637048.362146526805209913",
        reserveUSD: 54220.672488396725,
        totalSupply: "505493121384207630900757",
        txCount: "29670",
        volume0: 6923627.634201265,
        volume1: 87995774.33684662,
        volumeUSD: 5157927.751707544,
        lpFee: "0.00375",
        protocolFee: "0.00125",
        royaltiesFee: "0",
        royaltiesBeneficiary: null,
        totalFee: "0.005",
        hourData: [
          {
            date: "1729594800",
            reserve0: "68737.066623870774147419",
            reserve1: "6637048.362146526805209913",
            reserveUSD: "54220.67248839672228373126236968",
            volume0: "80",
            volume1: "7694.896907278884349151",
            volumeUSD: "31.5525088",
            txCount: "1",
          },
          {
            date: "1729587600",
            reserve0: "68657.066623870774147419",
            reserve1: "6644743.259053805689559064",
            reserveUSD: "54165.2213605839513976332166398",
            volume0: "134.200859081073276524",
            volume1: "12974.560812376449109775",
            volumeUSD: "52.9371526949242349115377404",
            txCount: "2",
          },
          {
            date: "1729584000",
            reserve0: "68522.865764789700870895",
            reserve1: "6657717.819866182138668839",
            reserveUSD: "54386.9192445253647970294372886",
            volume0: "41.900788578987241499",
            volume1: "4061.372908588826373298",
            volumeUSD: "16.62842599541636161902325766",
            txCount: "1",
          },
          {
            date: "1729580400",
            reserve0: "68480.964976210713629396",
            reserve1: "6661779.192774770965042137",
            reserveUSD: "55307.57347264785730614915270696",
            volume0: "1260",
            volume1: "124505.063639297336942099",
            volumeUSD: "508.8095838",
            txCount: "2",
          },
          {
            date: "1729573200",
            reserve0: "66920.964976210713629396",
            reserve1: "6757100.471423207079335894",
            reserveUSD: "54040.23713835479744115056233888",
            volume0: "26.508919436705331398",
            volume1: "2683.629340489188365409",
            volumeUSD: "10.73122758532380612035358317806218",
            txCount: "1",
          },
          {
            date: "1729569600",
            reserve0: "66947.473895647418960794",
            reserve1: "6754416.842082717890970485",
            reserveUSD: "54061.64370792758148275456228432",
            volume0: "280.307718622982445103",
            volume1: "28247.077942690119829839",
            volumeUSD: "113.0433240374974090980233466815641",
            txCount: "1",
          },
          {
            date: "1729562400",
            reserve0: "67227.781614270401405897",
            reserve1: "6726169.764140027771140646",
            reserveUSD: "54282.61242641639400564591631452",
            volume0: "24.871701411838538741",
            volume1: "2500",
            volumeUSD: "10.08795018745647873405801279363099",
            txCount: "1",
          },
          {
            date: "1729558800",
            reserve0: "67252.653315682239944638",
            reserve1: "6723669.764140027771140646",
            reserveUSD: "54029.8334114073604519389498042",
            volume0: "25.684897839005421331",
            volume1: "2574.6209830955728159",
            volumeUSD: "10.3445252141974921869049360754163",
            txCount: "1",
          },
          {
            date: "1729555200",
            reserve0: "67278.338213521245365969",
            reserve1: "6721095.143156932198324746",
            reserveUSD: "54050.4682961741578774598344371",
            volume0: "256.651684999008612276",
            volume1: "25618.635662856234197859",
            volumeUSD: "103.2420382051974552242480005905419",
            txCount: "2",
          },
          {
            date: "1729551600",
            reserve0: "67534.989898520253978245",
            reserve1: "6695476.507494075964126887",
            reserveUSD: "54325.2485275543380508863249324",
            volume0: "83.62777764714263651",
            volume1: "8276.297183943785433991",
            volumeUSD: "33.71976781554534116021459712",
            txCount: "2",
          },
          {
            date: "1729548000",
            reserve0: "67451.362120873111341735",
            reserve1: "6703752.804678019749560878",
            reserveUSD: "55111.6507492659790923352326054",
            volume0: "1276.758982154078759537",
            volume1: "127004.47855084238944526",
            volumeUSD: "518.0658420247514409411052217692973",
            txCount: "3",
          },
          {
            date: "1729537200",
            reserve0: "68076.107223133634009736",
            reserve1: "6641668.917756573663572556",
            reserveUSD: "55331.5519594478971333197195456",
            volume0: "4.174731507665151621",
            volume1: "406.099870080169291583",
            volumeUSD: "1.6965891761112777599859708",
            txCount: "1",
          },
          {
            date: "1729522800",
            reserve0: "68071.932491625968858115",
            reserve1: "6642075.017626653832864139",
            reserveUSD: "55965.4305143798290754975171241",
            volume0: "41.975787513284331884",
            volume1: "4105.545458955928056278",
            volumeUSD: "17.29644866228314268825297942923924",
            txCount: "2",
          },
          {
            date: "1729519200",
            reserve0: "68277.673659284453539701",
            reserve1: "6653929.055481385203330952",
            reserveUSD: "55752.67518566410207071488598192",
            volume0: "20.364731507665151622",
            volume1: "1990",
            volumeUSD: "8.337015821357065175986307076229301",
            txCount: "1",
          },
          {
            date: "1729508400",
            reserve0: "68298.038390792118691323",
            reserve1: "6651939.055481385203330952",
            reserveUSD: "56877.53955649201227323983593474",
            volume0: "1401.646161995073220266",
            volume1: "136552.520013510981395014",
            volumeUSD: "583.3755074001907664558224949814281",
            txCount: "2",
          },
          {
            date: "1729501200",
            reserve0: "67561.973859088086518959",
            reserve1: "6723787.915467874217086274",
            reserveUSD: "56564.56410549868296350333612074",
            volume0: "41.24473952269510987",
            volume1: "4094.87459837962296387",
            volumeUSD: "17.2655606363124400917976841",
            txCount: "1",
          },
          {
            date: "1729497600",
            reserve0: "67520.729119565391409089",
            reserve1: "6727882.790066253840050144",
            reserveUSD: "56530.03298422605808331974075254",
            volume0: "50.094312440393851235",
            volume1: "4980.204759016138728617",
            volumeUSD: "20.97010185985250022254185105",
            txCount: "1",
          },
          {
            date: "1729494000",
            reserve0: "67470.634807124997557854",
            reserve1: "6732862.994825269978778761",
            reserveUSD: "56758.75797909861572307774415684",
            volume0: "40.957973743913961486",
            volume1: "4077.390629729747461507",
            volumeUSD: "17.22767042055156375252948978",
            txCount: "1",
          },
          {
            date: "1729490400",
            reserve0: "67429.676833381083596368",
            reserve1: "6736940.385454999726240268",
            reserveUSD: "57022.6883983999805638383170688",
            volume0: "40.908506362503625526",
            volume1: "4077.406086173579475362",
            volumeUSD: "17.2973764720624979840590008",
            txCount: "1",
          },
          {
            date: "1729486800",
            reserve0: "67388.768327018579970842",
            reserve1: "6741017.79154117330571563",
            reserveUSD: "57258.56924933927696155596876892",
            volume0: "109.685552832493557323",
            volume1: "10956.507072706328101608",
            volumeUSD: "46.70106796770068053828824143",
            txCount: "3",
          },
          {
            date: "1729479600",
            reserve0: "67279.082774186086413519",
            reserve1: "6751974.298613879633817238",
            reserveUSD: "58529.76369016381293609909548196",
            volume0: "1492.277805258883085169",
            volume1: "146943.711999690328029645",
            volumeUSD: "638.2472451312008377408469477224161",
            txCount: "2",
          },
          {
            date: "1729472400",
            reserve0: "68771.360579444969498688",
            reserve1: "6605030.586614189305787593",
            reserveUSD: "59036.189932859608783907974752",
            volume0: "44.490836381065252556",
            volume1: "4262.986175891849232439",
            volumeUSD: "19.08523853014946124257680484",
            txCount: "2",
          },
          {
            date: "1729468800",
            reserve0: "68726.869743063904246132",
            reserve1: "6609293.572790081155020032",
            reserveUSD: "59724.14876379686743383353491832",
            volume0: "203.280100397971369502",
            volume1: "19550.024161978665161188",
            volumeUSD: "88.17858326544218523377992636554851",
            txCount: "6",
          },
        ],
        dayData: [
          {
            date: "1729555200",
            reserve0: "68737.066623870774147419",
            reserve1: "6637048.362146526805209913",
            reserveUSD: "54220.67248839672228373126236968",
            volume0: "2130.126569969600866872",
            volume1: "210859.85819667261198333",
            volumeUSD: "857.3767365200132378941488773792155",
            txCount: "12",
          },
          {
            date: "1729468800",
            reserve0: "67534.989898520253978245",
            reserve1: "6695476.507494075964126887",
            reserveUSD: "54325.2485275543380508863249324",
            volume0: "4851.487999264829064107",
            volume1: "477278.046560899512776362",
            volumeUSD: "2027.464015183511200987787517264158",
            txCount: "28",
          },
          {
            date: "1729382400",
            reserve0: "68929.484843461875615634",
            reserve1: "6589807.308492355943604322",
            reserveUSD: "58380.00778342032542277532926108",
            volume0: "14607.892292397526557008",
            volume1: "1479358.361698128173811342",
            volumeUSD: "6253.733791514043160493512843726055",
            txCount: "219",
          },
          {
            date: "1729296000",
            reserve0: "68109.761597102001773642",
            reserve1: "6664344.74180433447656626",
            reserveUSD: "50168.18467035576487138652842416",
            volume0: "1508.131181778568357697",
            volume1: "148029.944873077873957261",
            volumeUSD: "553.4224014556975325908558900424919",
            txCount: "34",
          },
          {
            date: "1729209600",
            reserve0: "68567.771943016972083025",
            reserve1: "6619351.851695010168429559",
            reserveUSD: "48884.062791998255717334263065",
            volume0: "4975.61722531281059144",
            volume1: "489475.851107584387574036",
            volumeUSD: "1753.21807912999992975144306470153",
            txCount: "24",
          },
          {
            date: "1729123200",
            reserve0: "66716.445788809607005249",
            reserve1: "6801023.030471059587717001",
            reserveUSD: "45778.14043050261062841597258024",
            volume0: "3729.223593651269511591",
            volume1: "368865.692174256660210948",
            volumeUSD: "1278.934332089142149524310049419181",
            txCount: "20",
          },
          {
            date: "1729036800",
            reserve0: "70376.189011118928972556",
            reserve1: "6710259.249750846514112856",
            reserveUSD: "49666.52593977063195914445003072",
            volume0: "5749.247159238231849712",
            volume1: "551290.768033304963878588",
            volumeUSD: "2026.273998822334627272441526375385",
            txCount: "33",
          },
          {
            date: "1728950400",
            reserve0: "71788.944055563578173125",
            reserve1: "6666603.634033571074174974",
            reserveUSD: "50989.8606519300360389419632",
            volume0: "5920.53219087929055663",
            volume1: "561366.990924156160569647",
            volumeUSD: "2126.921558776196203697407206864977",
            txCount: "41",
          },
        ],
        name: "MAGIC / ANIMA",
        hasNFT: false,
        isNFTNFT: false,
        collections: [],
        volume24h0: 6981.61456923443,
        volume24h1: 688137.9047575722,
        volume24hUSD: 2884.8407517035243,
        volume1wUSD: 16877.34491349094,
        apy: 0.12374163843695829,
      },
      {
        id: "0x3e8fb78ec6fb60575967bb07ac64e5fa9f498a4a",
        version: "V1",
        token0: {
          id: "0x539bde0d7dbd336b79148aa742883198bbf60342",
          name: "MAGIC",
          symbol: "MAGIC",
          decimals: 18,
          derivedMAGIC: "1",
          isNFT: false,
          isMAGIC: true,
          isETH: false,
          vaultCollections: [],
          vaultReserveItems: [],
          image: "/img/tokens/magic.png",
          collections: [],
          urlSlug: "",
          collectionId: "",
          collectionTokenIds: [],
          priceUSD: 0.39749764,
          reserve: "47784698011401146819303",
        },
        token1: {
          id: "0xeeac5e75216571773c0064b3b591a86253791db6",
          name: "Ellerium",
          symbol: "ELM",
          decimals: 18,
          derivedMAGIC: "0.0424572118182195900431379223632869",
          isNFT: false,
          isMAGIC: false,
          isETH: false,
          vaultCollections: [],
          vaultReserveItems: [],
          image: "/img/tokens/elm.png",
          collections: [],
          urlSlug: "",
          collectionId: "",
          collectionTokenIds: [],
          priceUSD: 0.016876641498722394,
          reserve: "1125478946097336090713960",
        },
        reserve0: "47784.698011401146819303",
        reserve1: "1125478.94609733609071396",
        reserveUSD: 38383.58239794818,
        totalSupply: "215777221243437686039130",
        txCount: "7061",
        volume0: 1634583.732943821,
        volume1: 4878208.419035796,
        volumeUSD: 1166971.0346558797,
        lpFee: "0.00375",
        protocolFee: "0.00125",
        royaltiesFee: "0",
        royaltiesBeneficiary: null,
        totalFee: "0.005",
        hourData: [
          {
            date: "1729576800",
            reserve0: "47784.698011401146819303",
            reserve1: "1125478.94609733609071396",
            reserveUSD: "38383.58239794817613917427431088",
            volume0: "8.091876524982042691",
            volume1: "191.13",
            volumeUSD: "3.25916985349158419550615828438965",
            txCount: "1",
          },
          {
            date: "1729566000",
            reserve0: "47792.789887926128861994",
            reserve1: "1125287.81609733609071396",
            reserveUSD: "38393.17830338277453339668792556",
            volume0: "22.394808393850893968",
            volume1: "525.245249617142782021",
            volumeUSD: "8.997969691529686973962923866499555",
            txCount: "2",
          },
          {
            date: "1729562400",
            reserve0: "47775.117538640798914406",
            reserve1: "1125701.541346953233495981",
            reserveUSD: "38575.69187477154878037255016296",
            volume0: "155.592475047470815141",
            volume1: "3672.550890335580282757",
            volumeUSD: "62.92573401404746226351428684215444",
            txCount: "2",
          },
          {
            date: "1729555200",
            reserve0: "48081.235827974881732627",
            reserve1: "1125552.708911725745117997",
            reserveUSD: "38676.61918350145338754539239304",
            volume0: "18.3038262214544692",
            volume1: "430.47",
            volumeUSD: "7.395977162197749810564979895323705",
            txCount: "1",
          },
          {
            date: "1729530000",
            reserve0: "48099.539654196336201827",
            reserve1: "1125122.238911725745117997",
            reserveUSD: "39302.4753581753711044998746717",
            volume0: "8.680772459841142686",
            volume1: "204.04",
            volumeUSD: "3.563735918969456520469982647703735",
            txCount: "1",
          },
          {
            date: "1729494000",
            reserve0: "48108.220426656177344513",
            reserve1: "1124918.198911725745117997",
            reserveUSD: "40500.79248176517043738850186972",
            volume0: "24.49698037935775735",
            volume1: "575.398763916733127667",
            volumeUSD: "10.35813357549054566306629183942981",
            txCount: "1",
          },
          {
            date: "1729486800",
            reserve0: "48132.717407035535101863",
            reserve1: "1124342.80014780901199033",
            reserveUSD: "41333.10275906974284767161364148",
            volume0: "2.181419924878905106",
            volume1: "51.21",
            volumeUSD: "0.941291300132708128292299196326178",
            txCount: "1",
          },
        ],
        dayData: [
          {
            date: "1729555200",
            reserve0: "47784.698011401146819303",
            reserve1: "1125478.94609733609071396",
            reserveUSD: "38383.58239794817613917427431088",
            volume0: "204.382986187758221",
            volume1: "4819.396139952723064778",
            volumeUSD: "82.57885072126648324354834888836736",
            txCount: "6",
          },
          {
            date: "1729468800",
            reserve0: "48099.539654196336201827",
            reserve1: "1125122.238911725745117997",
            reserveUSD: "39302.4753581753711044998746717",
            volume0: "35.359172764077805142",
            volume1: "830.648763916733127667",
            volumeUSD: "14.86316079459271031182857368345973",
            txCount: "3",
          },
          {
            date: "1729382400",
            reserve0: "48134.898826960414006969",
            reserve1: "1124291.59014780901199033",
            reserveUSD: "41390.20888508540115927237967798",
            volume0: "36.182662208822743099",
            volume1: "847.720403318403644852",
            volumeUSD: "15.38750756086282366748499185389494",
            txCount: "3",
          },
          {
            date: "1729296000",
            reserve0: "48170.909189169236750068",
            reserve1: "1123447.870551127415635182",
            reserveUSD: "34575.71441583744086641404847424",
            volume0: "111.342818875384733763",
            volume1: "2603.755121789853344658",
            volumeUSD: "40.34568634953428250174311018837753",
            txCount: "2",
          },
          {
            date: "1729209600",
            reserve0: "48282.252008044621483831",
            reserve1: "1120844.115429337562290524",
            reserveUSD: "34248.33757908825930306988686276",
            volume0: "98.343222241874477937",
            volume1: "2286.03",
            volumeUSD: "34.98367554230224940319001234239278",
            txCount: "6",
          },
          {
            date: "1729123200",
            reserve0: "48378.895230286495961768",
            reserve1: "1118518.774697160969734064",
            reserveUSD: "32670.79818170419466297767137728",
            volume0: "59.467086616332288866",
            volume1: "1376.722009508366828215",
            volumeUSD: "20.40615980743899259876326196166647",
            txCount: "3",
          },
          {
            date: "1729036800",
            reserve0: "48388.362316902828250634",
            reserve1: "1118292.850215486069161183",
            reserveUSD: "33820.2038838949176965690732684",
            volume0: "32.603965592663364092",
            volume1: "755.26",
            volumeUSD: "11.42055373975990952345842872723764",
            txCount: "1",
          },
          {
            date: "1728950400",
            reserve0: "48420.966282495491614726",
            reserve1: "1117537.590215486069161183",
            reserveUSD: "35219.98632905918958318838716108",
            volume0: "33.93902951786909308",
            volume1: "785.77",
            volumeUSD: "12.47461880614835564290514792080864",
            txCount: "2",
          },
        ],
        name: "MAGIC / ELM",
        hasNFT: false,
        isNFTNFT: false,
        collections: [],
        volume24h0: 239.74215895183602,
        volume24h1: 5650.044903869457,
        volume24hUSD: 97.44201151585919,
        volume1wUSD: 232.4602133219058,
        apy: 0.002502791264658022,
      },
    ],
  };
}

const RowSkeleton = () => (
  <tr>
    <td className="px-4 py-3.5 sm:px-5">
      <div className="flex items-center">
        <div className="flex items-center">
          <Skeleton className="h-9 w-9 rounded-full" />
          <Skeleton className="-translate-x-1/3 h-9 w-9 rounded-full" />
        </div>
        <div className="-ml-2 flex-1 space-y-1 sm:ml-0">
          <Skeleton className="h-4 w-1/2" />
          <Skeleton className="h-4 w-1/4" />
        </div>
      </div>
    </td>
    <td className="hidden px-4 py-3.5 sm:table-cell sm:px-5">
      <Skeleton className="h-4" />
    </td>
    <td className="px-4 py-3.5 sm:px-5">
      <Skeleton className="h-4" />
    </td>
    <td className="hidden px-4 py-3.5 sm:table-cell sm:px-5">
      <Skeleton className="h-4" />
    </td>
    <td className="hidden px-4 py-3.5 sm:table-cell sm:px-5">
      <Skeleton className="h-4" />
    </td>
  </tr>
);

export default function PoolsListPage() {
  const { pools } = useLoaderData<typeof loader>();
  const revalidator = useRevalidator();
  const navigate = useNavigate();

  const refetch = useCallback(() => {
    if (revalidator.state === "idle") {
      // revalidator.revalidate();
    }
  }, [revalidator]);

  useFocusInterval(refetch, 5_000);

  return (
    <table className="mt-4 w-full table-fixed rounded-md bg-night-1100 sm:mt-6">
      <thead>
        <tr className="text-night-100 text-sm">
          <th className="w-2/3 px-4 py-2.5 text-left font-normal text-sm sm:w-1/3 sm:px-5">
            Name
          </th>
          <th className="hidden px-4 py-2.5 text-right font-normal sm:table-cell sm:px-5">
            Volume (24h)
          </th>
          <th className="px-4 py-2.5 text-right font-normal sm:px-5">
            <abbr title="Total Value Locked" className="no-underline">
              TVL
            </abbr>
          </th>
          <th className="hidden px-4 py-2.5 text-right font-normal sm:table-cell sm:px-5">
            LP Fees
          </th>
          <th className="hidden px-4 py-2.5 text-right font-normal sm:table-cell sm:px-5">
            <abbr title="Annual Percentage Yield" className="no-underline">
              APY
            </abbr>
          </th>
        </tr>
      </thead>
      <tbody>
        <Suspense
          fallback={Array.from({ length: 5 }).map((_, i) => (
            // biome-ignore lint/suspicious/noArrayIndexKey: skeleton rows are identical
            <RowSkeleton key={i} />
          ))}
        >
          <Await resolve={pools}>
            {(pools) =>
              pools.map((pool) => (
                // biome-ignore lint/a11y/useKeyWithClickEvents: it is only used for additional hit space
                <tr
                  key={pool.id}
                  className="cursor-pointer border-night-900 border-t transition-colors hover:bg-night-1000"
                  onClick={() => navigate(`/pools/${pool.id}`)}
                >
                  <td className="px-4 py-3.5 text-left font-medium text-white sm:px-5">
                    <Link
                      to={`/pools/${pool.id}`}
                      prefetch="intent"
                      className="flex items-center"
                      onClick={(e) => e.stopPropagation()}
                    >
                      <PoolImage pool={pool} />
                      <div className="-ml-2 space-y-1 sm:ml-0">
                        <span className="block">{pool.name}</span>
                        <div className="flex items-center gap-1">
                          <Badge
                            size="xs"
                            color={
                              pool.version === "V2" ? "primary" : "secondary"
                            }
                          >
                            {pool.version}
                          </Badge>
                          <Badge size="xs">
                            {formatPercent(pool.lpFee, 3)}
                          </Badge>
                        </div>
                      </div>
                    </Link>
                  </td>
                  <td className="hidden px-4 py-3.5 text-right text-night-200 text-sm sm:table-cell sm:px-5">
                    {getPoolVolume24hDisplay(pool)}
                  </td>
                  <td className="px-4 py-3.5 text-right text-night-200 text-sm sm:px-5">
                    {getPoolReserveDisplay(pool)}
                  </td>
                  <td className="hidden px-4 py-3.5 text-right text-night-200 text-sm sm:table-cell sm:px-5">
                    {getPoolFeesDisplay(pool)}
                  </td>
                  <td className="hidden px-4 py-3.5 text-right text-night-200 text-sm sm:table-cell sm:px-5">
                    {formatPercent(pool.apy)}
                  </td>
                </tr>
              ))
            }
          </Await>
        </Suspense>
      </tbody>
    </table>
  );
}
